{"version":3,"sources":["webpack:///delegated ./node_modules/_setimmediate@1.0.5@setimmediate/setImmediate.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/_arrayMap.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/_getTag.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_crossvent@1.5.4@crossvent/src/crossvent.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/_baseIteratee.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///./node_modules/zerod/components/ZliveForm/doc.md","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/_Symbol.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/isString.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/toNumber.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/keys.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/_cacheHas.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_viewerjs@1.3.3@viewerjs/dist/viewer.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_contra@1.9.4@contra/emitter.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/_mapToArray.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/isArrayLike.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/_setToArray.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_react-color@2.17.3@react-color/lib/index.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///./node_modules/zerod/components/ZliveForm/ZeroUpload.jsx","webpack:///./node_modules/zerod/components/ZliveForm/controls.js","webpack:///./node_modules/zerod/components/ZliveForm/linkageAction.js","webpack:///./node_modules/zerod/components/ZliveForm/common.js","webpack:///./node_modules/zerod/components/ZliveForm/customHook.js","webpack:///./node_modules/zerod/components/ZliveForm/FormContext.js","webpack:///./node_modules/zerod/components/ZliveForm/FormGroup.jsx","webpack:///./node_modules/zerod/components/ZliveForm/FormViewer.jsx","webpack:///./node_modules/zerod/components/ZliveForm/ZselectInput.jsx","webpack:///./node_modules/zerod/components/ZliveForm/ZauxiliaryInput.jsx","webpack:///./node_modules/zerod/components/ZliveForm/AddColForm.jsx","webpack:///./node_modules/zerod/components/ZliveForm/GroupMoveBtns.jsx","webpack:///./node_modules/zerod/components/ZliveForm/InsertGroupBtns.jsx","webpack:///./node_modules/zerod/components/ZliveForm/GroupNameEdit.jsx","webpack:///./node_modules/zerod/components/ZliveForm/liveCanstant.js","webpack:///./node_modules/zerod/components/ZliveForm/LinkageConfig/linkRemark.js","webpack:///./node_modules/zerod/components/ZliveForm/LinkageConfig/ValueLinkControl.jsx","webpack:///./node_modules/zerod/components/ZliveForm/LinkageConfig/ValueLinkConfigured.jsx","webpack:///./node_modules/zerod/components/ZliveForm/LinkageConfig/IDLinkagesConfigured.jsx","webpack:///./node_modules/zerod/components/ZliveForm/LinkageConfig/index.jsx","webpack:///./node_modules/zerod/components/ZliveForm/index.jsx","webpack:///./src/views/Main/component-doc/ZliveForm-doc/formData.js","webpack:///./src/views/Main/component-doc/ZliveForm-doc/index.jsx","webpack:///./src/HOC sync index.jsx$","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/_Set.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash.throttle@4.1.1@lodash.throttle/index.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/_SetCache.js from dll-reference _dll_vendor_af5b108254eb523f1722","webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/_copyArray.js from dll-reference _dll_vendor_af5b108254eb523f1722"],"names":["getFileUids","files","key","map","file","propTypes","config","PropTypes","object","getUserInfo","func","getInsertLocation","getLayerModalInsertLocation","showModalLoading","showLayerModalLoading","value","array","onChange","defaultProps","MyUpload","React","forwardRef","props","ref","wrapperElRef","useRef","useState","fileList","setTruefileList","fileState","setFileState","hasUploadDoneServerIdsRef","noUploader","filter","current","includes","uid","modalRef","useEffect","showLoading","length","hasGetDetailIds","server","currentServers","hasServer","find","item","id","isPic","filePath","console","warn","push","serverId","name","originalFileName","fileSuffix","status","type","fileType","url","uploadAsync","error","userinfo","userId","userDO","formData","FormData","forEach","append","urlParamName","httpAjax","urlMethod","userIdName","then","re","data","i","success","catch","msg","finally","handleUpload","commitButton","uploadButton","getControl","children","multiple","listType","className","accept","onPreview","log","onRemove","removeFlieFromList","index","findIndex","serverIndex","splice","confirm","title","content","okText","cancelText","onOk","beforeUpload","reader","FileReader","readAsDataURL","onloadend","result","ZerodMainContext","setConsumer","ZerodLayerContext","memo","getOptionsRules","e","rules","reg","regularExpression","replace","getOptions","required","initialValue","pattern","message","errorMsg","dateFormats","YYYY","docustomOnChange","opt","rest","dataType","isObject","customOnChange","confun","fieldKey","isFunction","imperative","treeDataAddKey","tree","distKey","label","srcKey","isLeaf","ciilds","selectControl","controlName","linkages","getGroupsFn","requestQuery","currentForm","isAsync","JSON","parse","selectionsType","selectionsUrl","selectList","selectionsQuery","selectListFieldNames","others","getCurrentControl","saveFieldOptions","placeholder","linkageAction","selectionsUrlMethod","undefined","controls","onBlur","regType","regExps","field","mode","split","showTime","format","setShowTime","startsWith","use12Hours","timeOpt","es","isTimeRange","validator","rule","callback","time","moment","Error","changeOnSelect","newProps","optionsChange","options","requireType","saveOptionsMapKey","currentSaturability","hsv","s","minSaturability","LoadMapIframe","mapType","messageCallback","iframe","document","getElementById","contentWindow","onload","postMessage","event","loc","latlng","location","address","longitude","latitude","module","poiname","poiaddress","lng","lat","window","addEventListener","removeEventListener","center","MapChooseAddress","showRightModal","disabled","inputValue","openMap","show","modal","scroll","width","val","addonAfter","CascaderLoader","setOptions","Boolean","showSearch","loadData","selectedOptions","targetOption","loading","TreeSelectLoader","treeData","treeDefaultExpandAll","allowClear","treeNode","resolve","itemsFromTree","sourceItem","keyObj","action","currentItem","concatKeys","values","arr","a","d","getNewFields","fields","srcFieldKey","src","srcValue","concat","linkageType","initialValueLinkageAction","ages","seftItem","isArray","setTimeout","formObjs","groups","g","groupRef","getForm","o","form","getFieldsValue","cardGetBirthdayKeys","asyncParamNameKeys","groupHiddenIds","hiddenKeys","disabledKeys","requiredKeys","noRequiredKeys","selectOptions","hasClearSelect","hasOwnProperty","dist","newFormObjs","newItems","asyncFields","gindex","findHideGroup","gh","groupName","formItems","hiddenFields","arrayFilterBy","disabledFields","requiredFields","noRequiredFields","selectOptionsFields","control","fieldType","newItem","paramField","asyncParamName","groupIndex","methods","changeFormItems","resetDisable","resetNoRequired","resetSelect","validateFields","resetFields","formValues","birthday","substring","setFieldsValue","stringJoinSyml","str","sortList","o1","o2","v1","v2","pareLinkages","test","getFormItem","group","linkage","customFormRules","getRules","newField","groupId","seq","span","labelFocused","render","getGroupItem","labelLayout","formFieldInfoList","sort","additive","createRef","translateGroups","sectionList","removeSomeLinkage","linkageRef","hasRemoveAge","age","unlikeness","f","useGetGroupsCallback","formGroups","groupsRef","useCallback","useLinkageCallback","doLinkage","useGetOtherFormsCallback","forms","getShowState","getEachFormMethod","isAll","subForm","useDoSubmitCallback","onSubmit","buttonType","useSubmitBtn","doSubmit","buttonList","defaultValue","context","createContext","Provider","Consumer","ChildComponent","PureComponent","MyForm","FormContext","Zform","FormGroup","getOtherForms","titleLeftRender","titleRightRender","momentFormat","afterItemsRendered","domRef","formRef","setShow","getFormInstance","stateFormItems","setFormItems","useImperativeHandle","getWrapperDom","getFormItems","setGroupName","nameChange","FormViewer","groupTitleLeftRender","groupTitleRightRender","onFormGroupsChange","groupChildrenRender","submitBtnRender","style","_linkage","isBoolean","setFormGroups","imperativeRef","getFormGroups","setAllFormRendered","titleText","allFormRendered","string","bool","size","arrayOf","valueKey","leftPlaceholder","centerPlaceholder","rightPlaceholder","controlCostrom","left","right","leftSpan","centerSpan","rightSpan","MyComponent","ZselectInput","leftChange","centerChange","rightChange","_left","_center","_right","cssClass","target","InputGroup","Group","regExpsList","toString","ZauxiliaryInput","setInputValue","selectValue","setSelectValue","setVals","selected","PercentInput","num","setNum","compact","min","max","precision","commonKeys","textKeys","inputKeys","textarayKeys","selectionsType1keys","selectionsType2keys","selectKeys","cascaderKeys","dateKeys","uploadKeys","colorKeys","controlList","showKeys","configKeys","initSereKey","amap","qqmap","showFieldTypeLinkOther","excludeKeys","cont","showSelectionsTypeLinkOther","urlRules","keys","valkeys","hasError","some","trim","useFormItems","formViewerRef","itemsRef","getFieldValue","hasKey","secretKey","valueChange","m","labelPlaceholder","finished","condition","val1","val2","showBtns","inputType","customInputKeys","initValue","states","setStates","valueType","RegExp","autosize","minRows","useEditPage","formItem","items","ZeditSimpleFormHOC","pageHeader","pageFooter","panelHeader","defaultSpan","submitBtnName","submitMsg","detailApiInterface","detailId","tool","Number","objToArr","keyName","getFormMethods","submitApiInterface","newConf","arrToObj","newSelectionsQuery","currentItems","successMsg","AddColForm","EditForm","GroupMoveBtns","onMoveUp","onMoveDown","InsertGroupBtns","onInsertUp","onInsertDown","GroupNameEdit","edited","setEdited","returner","linkageTypeActionName","srcControlRemark","srcControl","srcValues","linkRemark1","distControls","linkRemark2","distControl","distValues","linkRemark3","srcControls","linkRemark4","linkRemark5","turnSelectOptions","section","needChild","list","getControlitem","findItem","getLinkValue","query","leftSelectedVal","rightSelectedVal","newFormData","onSrcSelected","ValueLinkControl","leftTransferSelections","setLeftTransferSelections","leftTransferSelected","setLeftTransferSelected","rightTransferSelections","setRightTransferSelections","rightTransferSelected","setRightTransferSelected","asyncParamNameRef","setLinkValue","linkValue","selectOptionsRef","leftTransferPropsRef","getSelectControl","dropdownMatchSelectWidth","dropdownStyle","optLabelRender","leftTitle","rightTitle","leftItemRender","findControl","rightTransferPropsRef","linkRemark","actionType","rightData","actionItem","sibligItem","ValueLinkConfigured","configured","setConfigured","getCurrentConfigured","c","valueLabel","IDLinkagesConfigured","linkageTypes","tab","active","itemKeys","LinkageConfig","getScrollAreaWrapperEl","wrapperRef","tabPanes","setTabPanes","tabKey","setTabKey","linkageTypesState","setLinkageTypes","curentLinkTypeRef","objRef","defaultLinkagesRef","insetLocaltion","resetScrollArea","onItemClick","l","currentControl","setCurrentControl","configuredRef","IDconfigured","currentConf","currentConfigured","currentLinkageType","newConfigs","ReactDom","createPortal","el","setScrollAreaStyle","height","clientHeight","marginTop","wrapperEl","existLinkage","links","other","dv","di","existIndex","con","newFields","hasFieldindex","df","existLinkageIndex","hasAgeIndex","commitFormData","layoutFormRef","onSave","errors","code","description","hasEmptyGroup","formList","itemindex","sectionId","remark","useGetItems","showModal","layerRef","showViewerRef","formRenderedRef","hasCodeRef","newLinkages","showLayer","setFormData","openUpdateControl","setNewCurrentGroupItems","groupRefIndex","slice","useFormProps","colContentRender","padding","cursor","getParentElement","_pE","parentElement","getGroupIndex","newGroups","getNewGroupData","groupnameNumRef","GenNonDuplicateID","showLayerRightModal","ShowFormViewer","margin","ZliveForm","LiveForm","formProps","drakeRef","nextSiblingRef","dragula","querySelector","removeOnSpill","revertOnSpill","direction","copy","copySortSource","accepts","source","sibling","moves","handle","dataset","on","cloneEl","sourceEl","nextElementSibling","_parEl","exec","currentGroup","newFormItems","currentindex","currentFormitem","siblingItem","sibingindex","targetGroup","targetFormItems","groupid","removeChild","appendChild","containers","stateGroupName","onGroupNameChange","hasindex","groupItem","unshift","warning","version","configuration","formTypeId","gmtCreate","gmtModified","formId","labelWidth","AmdDocHOC","HOC","AshowDemoHOC","doc","demo0","Myjavascript","Dom","demo1","state","formValue","dogCard","submit","demo2"],"mappings":"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,IAbb;AAcCztB,YAAM,EACL,yGAfF;AAgBCqH,kBAAY,EAAE,IAhBf;AAiBCqN,SAAG,EAAE,CAjBN;AAkBC4Y,eAAS,EAAE,qBAlBZ;AAmBCC,iBAAW,EAAE;AAnBd,KAtGkB;AARpB,GADY,CAbC;AAoJd1W,YAAU,EAAE;AApJE,CAAf,E,CAsJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"static/js/7.17e7a1c31448ecd0c8a5.js","sourcesContent":["module.exports = (__webpack_require__(\"dBtz\"))(297);","module.exports = (__webpack_require__(\"dBtz\"))(220);","module.exports = (__webpack_require__(\"dBtz\"))(43);","module.exports = (__webpack_require__(\"dBtz\"))(305);","module.exports = (__webpack_require__(\"dBtz\"))(329);","module.exports = \"<div class=\\\"z-doc-titles\\\"></div>\\n\\n<h1 id=\\\"-zliveform\\\">动态表单配置：ZliveForm</h1>\\n<p><code>ZliveForm</code>是动态表单配置模块</p>\\n<p><code>ZliveForm.FormViewer</code>是动态表单展示模块(包括控件联动效果)</p>\\n<p>控件联动功能有：1、单选/多选控制其他控件禁用，2、单选/多选控制其他控件必填，3、单选/多选控制其控件非必填，4、单选/多选 控制 其他单选/多选的选择项，5.1、单选/多选控制一个组隐藏，5.2、单选/多选控制其他控件隐藏，6、身份证号取出生年月日，7、单选联动异步请求选项</p>\\n<p>2、ZliveForm 的例子</p>\\n<div class=\\\"z-demo-box\\\" data-render=\\\"demo0\\\" data-title=\\\"ZliveForm的例子\\\"></div>\\n\\n<pre><code class=\\\"language-jsx\\\">import React from &quot;react&quot;;\\nimport { ZliveForm } from &quot;zerod&quot;;\\nimport formData from &quot;./formData&quot;;\\nimport linkages from &quot;./linkages&quot;;\\nclass Myjavascript extends React.PureComponent {\\n    formData = { ...formData, linkages };\\n    onSave = newFormData =&gt; {\\n        console.log(newFormData);\\n    };\\n    render() {\\n        return &lt;ZliveForm formData={this.formData} onSave={this.onSave} /&gt;;\\n    }\\n}</code></pre>\\n<p>1、ZliveForm.FormViewer 的例子</p>\\n<div class=\\\"z-demo-box\\\" data-render=\\\"demo1\\\" data-title=\\\"ZliveForm.FormViewer的例子\\\"></div>\\n\\n<pre><code class=\\\"language-jsx\\\">import React from &quot;react&quot;;\\nimport { ZliveForm } from &quot;zerod&quot;;\\nimport formData from &quot;./formData&quot;;\\nimport linkages from &quot;./linkages&quot;;\\nclass Myjavascript extends React.PureComponent {\\n    formData = { ...formData, linkages };\\n    onSubmit = values =&gt; {\\n        console.log(values);\\n        return Promise.resolve();\\n    };\\n    render() {\\n        return &lt;ZliveForm.FormViewer formData={this.formData} onSubmit={this.onSubmit} /&gt;;\\n    }\\n}</code></pre>\\n<div class=\\\"z-doc-titles\\\"></div>\\n\\n<h2 id=\\\"zliveform-props\\\">ZliveForm 的 props</h2>\\n<table>\\n<thead>\\n<tr>\\n<th>参数</th>\\n<th>说明</th>\\n<th>类型</th>\\n<th>默认值</th>\\n</tr>\\n</thead>\\n<tbody><tr>\\n<td>formData</td>\\n<td>渲染整个表单的数据</td>\\n<td>object</td>\\n<td>--</td>\\n</tr>\\n<tr>\\n<td>onSave</td>\\n<td>保存按钮的事件</td>\\n<td>function(newFormData){}</td>\\n<td>--</td>\\n</tr>\\n</tbody></table>\\n<div class=\\\"z-doc-titles\\\"></div>\\n\\n<h2 id=\\\"zliveform-formviewer-props\\\">ZliveForm.FormViewer 的 props</h2>\\n<p>可追 <code>className</code>、<code>style</code></p>\\n<table>\\n<thead>\\n<tr>\\n<th>参数</th>\\n<th>说明</th>\\n<th>类型</th>\\n<th>默认值</th>\\n</tr>\\n</thead>\\n<tbody><tr>\\n<td>formData</td>\\n<td>渲染整个表单的数据</td>\\n<td>object</td>\\n<td>--</td>\\n</tr>\\n<tr>\\n<td>formValues</td>\\n<td>表单字段对应的值</td>\\n<td>object</td>\\n<td>--</td>\\n</tr>\\n<tr>\\n<td>onSubmit</td>\\n<td>submit 类型的按钮触发表单验证通过后的确定回调函数，同/Zform 的 onSubmit</td>\\n<td>function(values){return Promise.resolve()}</td>\\n<td>--</td>\\n</tr>\\n<tr>\\n<td>momentFormat</td>\\n<td>是否在触发 onSubmit 函数后里面传出的 values 中存在 moment 对象进行表单控件对应的 format 格式化，启用此属性，相关 moment 值的控件必需 format 属性</td>\\n<td>boolean</td>\\n<td>false</td>\\n</tr>\\n<tr>\\n<td>submitBtnRender</td>\\n<td>表单之下的渲染函数，可以渲染一个或多个按钮，或者其他内容。提供了一个 submit 函数，可以直接绑定给提交按钮 click 等,触发后会用 onSubmit 回调</td>\\n<td>(submit)=&gt;{return ReactNode}</td>\\n<td>--</td>\\n</tr>\\n<tr>\\n<td>linkage</td>\\n<td>是否启用联动功能 (联动的前提 formData 中存在 linkages 配置)</td>\\n<td>boolean</td>\\n<td>true</td>\\n</tr>\\n<tr>\\n<td>title</td>\\n<td>表单的标题，默认来自 formData.name, 如果 title==false,则不显示标题</td>\\n<td>boolean | string</td>\\n<td>--</td>\\n</tr>\\n<tr>\\n<td>afterItemsRendered</td>\\n<td>所有表单控件渲染完成（包括异步）的回调</td>\\n<td>funcion</td>\\n<td>--</td>\\n</tr>\\n</tbody></table>\\n<h2 id=\\\"zliveform-formviewer-ref-\\\">ZliveForm.FormViewer 实例方法 (通过 Ref 取得)</h2>\\n<table>\\n<thead>\\n<tr>\\n<th>参数</th>\\n<th>说明</th>\\n<th>使用</th>\\n<th>返回值</th>\\n</tr>\\n</thead>\\n<tbody><tr>\\n<td>getEachFormMethod</td>\\n<td>获取所有 Zform 的 form 实例和 methods</td>\\n<td>getEachFormMethod()</td>\\n<td>[{form,methods}]</td>\\n</tr>\\n</tbody></table>\\n<h2 id=\\\"formdata-\\\">formData 基本结构</h2>\\n<div class=\\\"z-demo-box\\\" data-render=\\\"demo2\\\" data-title=\\\"formData\\\"></div>\\n\\n<pre><code class=\\\"language-json\\\">{\\n    &quot;id&quot;: 111, //formId\\n    &quot;name&quot;: &quot;养犬信息登记表&quot;,\\n    &quot;code&quot;: &quot;dog_check_in_form&quot;,\\n    &quot;description&quot;: &quot;养犬信息登记表&quot;,\\n    &quot;linkages&quot;: [\\n        //联动配置\\n        {\\n            &quot;linkageType&quot;: &quot;5.1&quot;,\\n            &quot;name&quot;: &quot;单选/多选控制组隐藏&quot;,\\n            &quot;src&quot;: { &quot;fieldKey&quot;: &quot;rfid&quot; },\\n            &quot;dist&quot;: [\\n                {\\n                    &quot;srcValue&quot;: &quot;2&quot;,\\n                    &quot;fields&quot;: [\\n                        {\\n                            &quot;groupId&quot;: 113,\\n                            &quot;groupName&quot;: &quot;名称&quot;\\n                        }\\n                    ]\\n                }\\n            ]\\n        },\\n        {\\n            &quot;linkageType&quot;: &quot;5.2&quot;,\\n            &quot;name&quot;: &quot;单选/多选控制控件隐藏&quot;,\\n            &quot;src&quot;: { &quot;fieldKey&quot;: &quot;isEntity&quot; },\\n            &quot;dist&quot;: [\\n                {\\n                    &quot;srcValue&quot;: &quot;2&quot;,\\n                    &quot;fields&quot;: [\\n                        {\\n                            &quot;fieldKey&quot;: &quot;recipientName&quot;,\\n                            &quot;label&quot;: &quot;收件人姓名&quot;,\\n                            &quot;fieldType&quot;: 1\\n                        },\\n                        {\\n                            &quot;fieldKey&quot;: &quot;contact&quot;,\\n                            &quot;label&quot;: &quot;联系方式&quot;,\\n                            &quot;fieldType&quot;: 4\\n                        }\\n                    ]\\n                }\\n            ]\\n        },\\n        {\\n            &quot;linkageType&quot;: &quot;1&quot;,\\n            &quot;name&quot;: &quot;单选/多选控制控件禁用&quot;,\\n            &quot;src&quot;: { &quot;fieldKey&quot;: &quot;dogSex&quot; },\\n            &quot;dist&quot;: [\\n                {\\n                    &quot;srcValue&quot;: &quot;2&quot;,\\n                    &quot;fields&quot;: [\\n                        {\\n                            &quot;fieldKey&quot;: &quot;dogProperty&quot;,\\n                            &quot;label&quot;: &quot;犬只性质&quot;,\\n                            &quot;fieldType&quot;: 3\\n                        },\\n                        {\\n                            &quot;fieldKey&quot;: &quot;dogColor&quot;,\\n                            &quot;label&quot;: &quot;犬只颜色&quot;,\\n                            &quot;fieldType&quot;: 1\\n                        }\\n                    ]\\n                }\\n            ]\\n        },\\n        {\\n            &quot;linkageType&quot;: &quot;2&quot;,\\n            &quot;name&quot;: &quot;单选/多选控制控件必填&quot;,\\n            &quot;src&quot;: { &quot;fieldKey&quot;: &quot;isIris&quot; },\\n            &quot;dist&quot;: [\\n                {\\n                    &quot;srcValue&quot;: &quot;2&quot;,\\n                    &quot;fields&quot;: [\\n                        {\\n                            &quot;fieldKey&quot;: &quot;birthday&quot;,\\n                            &quot;label&quot;: &quot;出生日期&quot;,\\n                            &quot;fieldType&quot;: 5\\n                        }\\n                    ]\\n                }\\n            ]\\n        },\\n        {\\n            &quot;linkageType&quot;: &quot;3&quot;,\\n            &quot;name&quot;: &quot;单选/多选控制控件非必填&quot;,\\n            &quot;src&quot;: { &quot;fieldKey&quot;: &quot;isIris&quot; },\\n            &quot;dist&quot;: [\\n                {\\n                    &quot;srcValue&quot;: &quot;1&quot;,\\n                    &quot;fields&quot;: [\\n                        {\\n                            &quot;fieldKey&quot;: &quot;birthday&quot;,\\n                            &quot;label&quot;: &quot;出生日期&quot;,\\n                            &quot;fieldType&quot;: 5\\n                        }\\n                    ]\\n                }\\n            ]\\n        },\\n        {\\n            &quot;linkageType&quot;: &quot;4&quot;,\\n            &quot;name&quot;: &quot;单选/多选 控制 选项&quot;,\\n            &quot;src&quot;: { &quot;fieldKey&quot;: &quot;rfid&quot; },\\n            &quot;dist&quot;: [\\n                {\\n                    &quot;srcValue&quot;: &quot;1&quot;,\\n                    &quot;fields&quot;: [\\n                        {\\n                            &quot;fieldKey&quot;: &quot;domicile&quot;,\\n                            &quot;label&quot;: &quot;住所性质&quot;,\\n                            &quot;options&quot;: [\\n                                { &quot;label&quot;: &quot;自有&quot;, &quot;value&quot;: &quot;1&quot; },\\n                                { &quot;label&quot;: &quot;租赁&quot;, &quot;value&quot;: &quot;2&quot; },\\n                                { &quot;label&quot;: &quot;其他&quot;, &quot;value&quot;: &quot;3&quot; }\\n                            ]\\n                        }\\n                    ]\\n                },\\n                {\\n                    &quot;srcValue&quot;: &quot;2&quot;,\\n                    &quot;fields&quot;: [\\n                        {\\n                            &quot;fieldKey&quot;: &quot;domicile&quot;,\\n                            &quot;label&quot;: &quot;住所性质&quot;,\\n                            &quot;options&quot;: [{ &quot;label&quot;: &quot;自有&quot;, &quot;value&quot;: &quot;1&quot; }]\\n                        }\\n                    ]\\n                }\\n            ]\\n        }\\n    ],\\n    &quot;sectionList&quot;: [\\n        //表单控件组\\n        {\\n            &quot;id&quot;: 111, //groupId\\n            &quot;formId&quot;: 111,\\n            &quot;name&quot;: &quot;犬只信息&quot;,\\n            &quot;seq&quot;: 1, //组排序\\n            &quot;description&quot;: &quot;犬只信息表&quot;,\\n            &quot;formFieldInfoList&quot;: [\\n                //表单控件\\n                {\\n                    &quot;id&quot;: 466,\\n                    &quot;sectionId&quot;: 111,\\n                    &quot;label&quot;: &quot;犬只名称&quot;,\\n                    &quot;fieldKey&quot;: &quot;dogName&quot;,\\n                    &quot;fieldType&quot;: 1, //控件类型\\n                    &quot;required&quot;: 1, //是否必填\\n                    &quot;regularExpression&quot;: null, //正则表达式\\n                    &quot;description&quot;: null,\\n                    &quot;errorMsg&quot;: null, //验证失败的提示信息\\n                    &quot;placeholder&quot;: null,\\n                    &quot;span&quot;: 8, //栅栏占格(1-24)\\n                    &quot;labelWidth&quot;: 4,\\n                    &quot;config&quot;: &quot;{\\\\&quot;maxLength\\\\&quot;:8,\\\\&quot;minLength\\\\&quot;:1}&quot;, //规则配置等\\n                    &quot;initialValue&quot;: null, //初始值\\n                    &quot;seq&quot;: 1 //排序\\n                }\\n            ]\\n        },\\n        {\\n            &quot;id&quot;: 112,\\n            &quot;formId&quot;: 111,\\n            &quot;name&quot;: &quot;养犬人信息&quot;,\\n            &quot;seq&quot;: 2,\\n            &quot;description&quot;: &quot;养犬人信息表&quot;,\\n            &quot;gmtCreate&quot;: &quot;2019-03-26 12:09:59&quot;,\\n            &quot;gmtModified&quot;: &quot;2019-03-26 12:09:59&quot;,\\n            &quot;formFieldInfoList&quot;: [\\n                {\\n                    &quot;id&quot;: 475,\\n                    &quot;sectionId&quot;: 112,\\n                    &quot;label&quot;: &quot;养犬人姓名&quot;,\\n                    &quot;fieldKey&quot;: &quot;name&quot;,\\n                    &quot;fieldType&quot;: 1,\\n                    &quot;required&quot;: 1,\\n                    &quot;regularExpression&quot;: null,\\n                    &quot;description&quot;: null,\\n                    &quot;errorMsg&quot;: null,\\n                    &quot;placeholder&quot;: null,\\n                    &quot;span&quot;: 8,\\n                    &quot;labelWidth&quot;: 4,\\n                    &quot;config&quot;: &quot;{\\\\&quot;maxLength\\\\&quot;:8,\\\\&quot;minLength\\\\&quot;:1}&quot;,\\n                    &quot;initialValue&quot;: null,\\n                    &quot;seq&quot;: 1\\n                }\\n            ]\\n        }\\n    ],\\n    //为某些控件添加onChange事件\\n    &quot;customOnChange&quot;: {\\n        &quot;dogType&quot;: function(field, imperativeRef, e) {\\n            console.log(&quot;dogType&quot;, field, imperativeRef.current(), e);\\n        }\\n    },\\n    //为某些控件添加自定义rules\\n    &quot;customFormRules&quot;: {\\n        &quot;dogName&quot;: function(field, imperativeRef) {\\n            console.log(&quot;dogName&quot;, field, imperativeRef.current());\\n            return [\\n                {\\n                    &quot;validator&quot;: (rule, value, callback) =&gt; {}\\n                }\\n            ];\\n        }\\n    }\\n}</code></pre>\\n\";","module.exports = (__webpack_require__(\"dBtz\"))(27);","module.exports = (__webpack_require__(\"dBtz\"))(319);","module.exports = (__webpack_require__(\"dBtz\"))(438);","module.exports = (__webpack_require__(\"dBtz\"))(28);","module.exports = (__webpack_require__(\"dBtz\"))(363);","module.exports = (__webpack_require__(\"dBtz\"))(497);","module.exports = (__webpack_require__(\"dBtz\"))(81);","module.exports = (__webpack_require__(\"dBtz\"))(365);","module.exports = (__webpack_require__(\"dBtz\"))(20);","module.exports = (__webpack_require__(\"dBtz\"))(366);","module.exports = (__webpack_require__(\"dBtz\"))(316);","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Icon, Modal, message } from \"antd\";\r\nimport { getControl } from \"../Zform/controls\";\r\nimport { httpAjax } from \"zerod/components/zTool\";\r\nimport ZerodMainContext from \"../ZerodMainContext\";\r\nimport ZerodLayerContext from \"../ZerodLayerContext\";\r\nfunction getFileUids(files, key = \"uid\") {\r\n\treturn files.map(file => {\r\n\t\treturn file[key];\r\n\t});\r\n}\r\nconst propTypes = {\r\n\tconfig: PropTypes.object,\r\n\tgetUserInfo: PropTypes.func,\r\n\tgetInsertLocation: PropTypes.func,\r\n\tgetLayerModalInsertLocation: PropTypes.func,\r\n\tshowModalLoading: PropTypes.func,\r\n\tshowLayerModalLoading: PropTypes.func,\r\n\tvalue: PropTypes.array,\r\n\tonChange: PropTypes.func,\r\n};\r\nconst defaultProps = {\r\n\tgetUserInfo: function() {\r\n\t\treturn {};\r\n\t},\r\n\tgetInsertLocation: function() {\r\n\t\treturn null;\r\n\t},\r\n\tshowModalLoading: function() {\r\n\t\treturn null;\r\n\t},\r\n};\r\n/**\r\n * config\r\n * \t{\r\n * \t\turl:多文件上传的接口,\r\n * \t\turlMethod:多文件上传请求方式,\r\n * \t\turlParamName:上传接口的参数名,\r\n * \t\tdetailUrl:获取多文件列表的接口,\r\n * \t\tdetailUrlMethod:获取多文件请求类型，\r\n * \t\tdetailUrlParamName:获取多文件列表的接口的参数名,\r\n * \t\tuserIdName:\"userId\",// 用户id参数名\r\n * \t}\r\n */\r\n//上传文件组件(多文件)\r\nconst MyUpload = React.forwardRef(function(props, ref) {\r\n\tconst {\r\n\t\tconfig,\r\n\t\tgetUserInfo,\r\n\t\tgetInsertLocation,\r\n\t\tgetLayerModalInsertLocation,\r\n\t\tshowModalLoading,\r\n\t\tshowLayerModalLoading,\r\n\t\tvalue,\r\n\t\tonChange,\r\n\t} = props;\r\n\tconst wrapperElRef = useRef(null);\r\n\t//fileList：上传文件的列表数据，setTruefileList：文件数据流\r\n\tconst [fileState, setFileState] = useState({ fileList: [], setTruefileList: [] });\r\n\t//保存已上传文件的uid和服务id\r\n\tconst hasUploadDoneServerIdsRef = useRef([]);\r\n\tconst noUploader = fileState.setTruefileList.filter(file => {\r\n\t\t// console.log(\"---ids\", hasUploadDoneServerIdsRef.current, getFileUids(hasUploadDoneServerIdsRef.current));\r\n\t\treturn !getFileUids(hasUploadDoneServerIdsRef.current).includes(file.uid);\r\n\t});\r\n\t// console.log(noUploader, hasUploadDoneServerIdsRef.current, fileState);\r\n\t//获取调用showModalLoading的第二个参数\r\n\tconst modalRef = useRef(\"\");\r\n\tuseEffect(() => {\r\n\t\tmodalRef.current =\r\n\t\t\tgetLayerModalInsertLocation && typeof getLayerModalInsertLocation === \"function\"\r\n\t\t\t\t? getLayerModalInsertLocation(wrapperElRef.current)\r\n\t\t\t\t: typeof getInsertLocation === \"function\"\r\n\t\t\t\t? getInsertLocation(wrapperElRef.current)\r\n\t\t\t\t: null;\r\n\t}, []);\r\n\tconst showLoading =\r\n\t\tshowLayerModalLoading && typeof showLayerModalLoading === \"function\"\r\n\t\t\t? showLayerModalLoading\r\n\t\t\t: typeof showModalLoading === \"function\"\r\n\t\t\t? showModalLoading\r\n\t\t\t: () => {\r\n\t\t\t\t\treturn null;\r\n\t\t\t  };\r\n\t//处理value\r\n\tuseEffect(() => {\r\n\t\tif (!Array.isArray(value)||!value.length) {\r\n\t\t\tsetFileState({\r\n\t\t\t\tfileList: [],\r\n\t\t\t\tsetTruefileList: [],\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// if (!config.detailUrl) {\r\n\t\t// \tmessage.error(\"未配置请求多文件的后台地址\");\r\n\t\t// \treturn;\r\n\t\t// }\r\n\t\t// const hasGetDetailIds = value.filter(id => {\r\n\t\t// \treturn !getFileUids(hasUploadDoneServerIdsRef.current, \"serverId\").includes(id);\r\n\t\t// });\r\n\t\tconst hasGetDetailIds = value.filter(server => {\r\n\t\t\tconst currentServers = getFileUids(hasUploadDoneServerIdsRef.current, \"serverId\");\r\n\t\t\tconst hasServer = currentServers.find(item => item.id === server.id);\r\n\t\t\treturn !hasServer;\r\n\t\t});\r\n\t\t// console.log(modalRef.current)\r\n\t\tif (hasGetDetailIds.length) {\r\n\t\t\tconst files = hasGetDetailIds\r\n\t\t\t\t.filter(item => {\r\n\t\t\t\t\tconst isPic = item.id && item.filePath;\r\n\t\t\t\t\tif (!isPic) {\r\n\t\t\t\t\t\tconsole.warn(\"上传控件的value缺少id、filePath等字段\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn isPic;\r\n\t\t\t\t})\r\n\t\t\t\t.map(item => {\r\n\t\t\t\t\thasUploadDoneServerIdsRef.current.push({ uid: item.id, serverId: item });\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tuid: item.id,\r\n\t\t\t\t\t\tname: `${item.originalFileName}.${item.fileSuffix}`,\r\n\t\t\t\t\t\tstatus: \"done\",\r\n\t\t\t\t\t\ttype: item.fileType,\r\n\t\t\t\t\t\turl: item.filePath,\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\tsetFileState({\r\n\t\t\t\tfileList: [...fileState.fileList, ...files],\r\n\t\t\t\tsetTruefileList: [...fileState.setTruefileList, ...files],\r\n\t\t\t});\r\n\t\t\t// showLoading(true, modalRef.current, \"获取文件中...\");\r\n\t\t\t// httpAjax(config.detailUrlMethod ? config.detailUrlMethod : \"post\", config.detailUrl, {\r\n\t\t\t// \t[config.detailUrlParamName ? config.detailUrlParamName : \"fileIds\"]: hasGetDetailIds,\r\n\t\t\t// })\r\n\t\t\t// \t.then(re => {\r\n\t\t\t// \t\tconst files = re.data.map(item => {\r\n\t\t\t// \t\t\treturn {\r\n\t\t\t// \t\t\t\tuid: item.id,\r\n\t\t\t// \t\t\t\tname: `${item.originalFileName}.${item.fileSuffix}`,\r\n\t\t\t// \t\t\t\tstatus: \"done\",\r\n\t\t\t// \t\t\t\ttype: item.fileType,\r\n\t\t\t// \t\t\t\turl: item.filePath,\r\n\t\t\t// \t\t\t};\r\n\t\t\t// \t\t});\r\n\t\t\t// \t\thasUploadDoneServerIdsRef.current = [\r\n\t\t\t// \t\t\t...hasUploadDoneServerIdsRef.current,\r\n\t\t\t// \t\t\t...re.data.map(item => {\r\n\t\t\t// \t\t\t\treturn { uid: item.id, serverId: item.id };\r\n\t\t\t// \t\t\t}),\r\n\t\t\t// \t\t];\r\n\t\t\t// \t\tsetFileState({\r\n\t\t\t// \t\t\tfileList: [...fileState.fileList, ...files],\r\n\t\t\t// \t\t\tsetTruefileList: [...fileState.setTruefileList, ...files],\r\n\t\t\t// \t\t});\r\n\t\t\t// \t})\r\n\t\t\t// \t.catch(re => {\r\n\t\t\t// \t\tmessage.error(re && re.msg ? re.msg : \"获取已上传列表失败。\");\r\n\t\t\t// \t})\r\n\t\t\t// \t.finally(() => {\r\n\t\t\t// \t\tshowLoading(false, modalRef.current);\r\n\t\t\t// \t});\r\n\t\t}\r\n\t}, [value]);\r\n\t//上传文件\r\n\tconst uploadAsync = () => {\r\n\t\tif (!config.url) {\r\n\t\t\tmessage.error(\"未配置上传多文件的后台地址\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst userinfo = getUserInfo();\r\n\t\tconst userId = userinfo && userinfo.userDO ? userinfo.userDO.id : \"\";\r\n\t\t// console.log(\"userinfo---\", userinfo);\r\n\t\tconst formData = new FormData();\r\n\t\tnoUploader.forEach(file => {\r\n\t\t\tformData.append(config.urlParamName ? config.urlParamName : \"files\", file);\r\n\t\t});\r\n\t\tshowLoading(true, modalRef.current, \"上传中...\");\r\n\t\thttpAjax(\r\n\t\t\tconfig.urlMethod ? config.urlMethod : \"post\",\r\n\t\t\t`${config.url}?${config.userIdName ? config.userIdName : \"userId\"}=${userId}`,\r\n\t\t\tformData,\r\n\t\t)\r\n\t\t\t.then(re => {\r\n\t\t\t\thasUploadDoneServerIdsRef.current = [\r\n\t\t\t\t\t...hasUploadDoneServerIdsRef.current,\r\n\t\t\t\t\t...re.data.map((server, i) => {\r\n\t\t\t\t\t\treturn { uid: noUploader[i].uid, serverId: server };\r\n\t\t\t\t\t}),\r\n\t\t\t\t];\r\n\t\t\t\tsetFileState({\r\n\t\t\t\t\t...fileState,\r\n\t\t\t\t\tfileList: fileState.fileList.map(file => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...file,\r\n\t\t\t\t\t\t\tstatus: getFileUids(hasUploadDoneServerIdsRef.current).includes(file.uid)\r\n\t\t\t\t\t\t\t\t? \"done\"\r\n\t\t\t\t\t\t\t\t: \"undetermined\",\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t\tmessage.success(\"上传成功。\");\r\n\t\t\t\ttypeof onChange === \"function\" && onChange(getFileUids(hasUploadDoneServerIdsRef.current, \"serverId\"));\r\n\t\t\t})\r\n\t\t\t.catch(re => {\r\n\t\t\t\tmessage.error(re && re.msg ? re.msg : \"上传失败。\");\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tshowLoading(false, modalRef.current);\r\n\t\t\t});\r\n\t};\r\n\t//确认上传事件\r\n\tconst handleUpload = () => {\r\n\t\tif (noUploader.length) {\r\n\t\t\tuploadAsync();\r\n\t\t}\r\n\t};\r\n\t//确认上传按钮\r\n\tconst commitButton = (\r\n\t\t<div className=\"z-liveform-upload-btn z-margin-top-10\" onClick={handleUpload}>\r\n\t\t\t<span>\r\n\t\t\t\t<Icon type=\"check\" /> 上传\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t);\r\n\t//选文件按钮\r\n\tconst uploadButton = (\r\n\t\t<div className=\"z-liveform-upload-btn\">\r\n\t\t\t<span>\r\n\t\t\t\t<Icon type=\"upload\" /> 选择文件\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t);\r\n\treturn (\r\n\t\t<div className=\"z-liveform-upload-wrapper\" ref={wrapperElRef}>\r\n\t\t\t{/* 使用antd的上传组件 */}\r\n\t\t\t{getControl(\"Upload\", {\r\n\t\t\t\tchildren: uploadButton,\r\n\t\t\t\tmultiple: config.multiple,\r\n\t\t\t\t// action: config.url,\r\n\t\t\t\tlistType: \"picture\",\r\n\t\t\t\tname: \"file\",\r\n\t\t\t\tclassName: \"z-liveform-upload\",\r\n\t\t\t\taccept: config.accept,\r\n\t\t\t\t//onChange={this.handleUploadChange}\r\n\t\t\t\tfileList: fileState.fileList,\r\n\t\t\t\tonPreview: file => {\r\n\t\t\t\t\tconsole.log(\"----\", file);\r\n\t\t\t\t},\r\n\t\t\t\t//移除\r\n\t\t\t\tonRemove: file => {\r\n\t\t\t\t\tfunction removeFlieFromList() {\r\n\t\t\t\t\t\tconst index = fileState.fileList.findIndex(item => {\r\n\t\t\t\t\t\t\treturn item.uid === file.uid;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconst serverIndex = hasUploadDoneServerIdsRef.current.findIndex(item => {\r\n\t\t\t\t\t\t\treturn item.uid === file.uid;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (serverIndex > -1) {\r\n\t\t\t\t\t\t\thasUploadDoneServerIdsRef.current.splice(serverIndex, 1);\r\n\t\t\t\t\t\t\ttypeof onChange === \"function\" &&\r\n\t\t\t\t\t\t\t\tonChange(getFileUids(hasUploadDoneServerIdsRef.current, \"serverId\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (index > -1) {\r\n\t\t\t\t\t\t\tfileState.fileList.splice(index, 1);\r\n\t\t\t\t\t\t\tfileState.setTruefileList.splice(index, 1);\r\n\t\t\t\t\t\t\tsetFileState({\r\n\t\t\t\t\t\t\t\tfileList: [...fileState.fileList],\r\n\t\t\t\t\t\t\t\tsetTruefileList: [...fileState.setTruefileList],\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (getFileUids(hasUploadDoneServerIdsRef.current).includes(file.uid)) {\r\n\t\t\t\t\t\tModal.confirm({\r\n\t\t\t\t\t\t\ttitle: \"此文件已上传到服务器，确定从列表中移除?\",\r\n\t\t\t\t\t\t\tcontent: \"\",\r\n\t\t\t\t\t\t\tokText: \"确定\",\r\n\t\t\t\t\t\t\tcancelText: \"取消\",\r\n\t\t\t\t\t\t\tonOk() {\r\n\t\t\t\t\t\t\t\tremoveFlieFromList();\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t// onCancel() {\r\n\t\t\t\t\t\t\t// \tconsole.log(\"Cancel\");\r\n\t\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tremoveFlieFromList();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t//取消自动上传，实现手动上传\r\n\t\t\t\tbeforeUpload: file => {\r\n\t\t\t\t\tlet reader = new FileReader();\r\n\t\t\t\t\treader.readAsDataURL(file);\r\n\t\t\t\t\treader.onloadend = () => {\r\n\t\t\t\t\t\tsetFileState({\r\n\t\t\t\t\t\t\tfileList: [\r\n\t\t\t\t\t\t\t\t...fileState.fileList,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tuid: file.uid,\r\n\t\t\t\t\t\t\t\t\tname: file.name,\r\n\t\t\t\t\t\t\t\t\tstatus: \"undetermined\",\r\n\t\t\t\t\t\t\t\t\ttype: file.type,\r\n\t\t\t\t\t\t\t\t\turl: reader.result,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tsetTruefileList: [...fileState.setTruefileList, file],\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t})}\r\n\t\t\t{noUploader.length ? commitButton : null}\r\n\t\t</div>\r\n\t);\r\n});\r\nMyUpload.propTypes = propTypes;\r\nMyUpload.defaultProps = defaultProps;\r\nexport default ZerodMainContext.setConsumer(ZerodLayerContext.setConsumer(React.memo(MyUpload)));\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport linkageAction from \"./linkageAction\";\r\nimport { getControl, getOptions, regExps } from \"../Zform/controls\";\r\nimport { dataType, httpAjax, itemsFromTree } from \"../zTool\";\r\nimport ZeroUpload from \"./ZeroUpload\";\r\nimport moment from \"moment\";\r\nimport ZerodMainContext from \"../ZerodMainContext\";\r\n\r\nexport const getOptionsRules = function(e, rules = []) {\r\n\tconst reg = typeof e.regularExpression === \"string\" ? e.regularExpression.replace(/((^\\/)|(\\/$))/g, \"\") : \"\";\r\n\treturn getOptions({\r\n\t\trequired: e.required,\r\n\t\tinitialValue: e.initialValue,\r\n\t\trules: reg\r\n\t\t\t? [\r\n\t\t\t\t\t...rules,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpattern: reg,\r\n\t\t\t\t\t\tmessage: e.errorMsg,\r\n\t\t\t\t\t},\r\n\t\t\t  ]\r\n\t\t\t: rules,\r\n\t});\r\n};\r\nexport const dateFormats = {\r\n\t\"YYYY-wo\": \"WeekPicker\",\r\n\tYYYY: \"YearPicker\",\r\n\t\"YYYY-MM\": \"MonthPicker\",\r\n\t\"YYYY-MM-DD\": \"DatePicker\",\r\n\t\"YYYY-MM-DD HH:mm\": \"DatePicker\",\r\n\t\"YYYY-MM-DD HH:mm:ss\": \"DatePicker\",\r\n\t\"YYYY-MM-DD h:mm a\": \"DatePicker\",\r\n\t\"YYYY-MM-DD h:mm:ss a\": \"DatePicker\",\r\n\t\"YYYY-MM-DD - YYYY-MM-DD\": \"RangePicker\",\r\n\t\"YYYY-MM-DD HH:mm - YYYY-MM-DD HH:mm\": \"RangePicker\",\r\n\t\"YYYY-MM-DD HH:mm:ss - YYYY-MM-DD HH:mm:ss\": \"RangePicker\",\r\n\t\"HH:mm\": \"TimePicker\",\r\n\t\"HH:mm:ss\": \"TimePicker\",\r\n\t\"h:mm a\": \"TimePicker\",\r\n\t\"h:mm:ss a\": \"TimePicker\",\r\n\t\"HH:mm - HH:mm\": \"TimeRange\",\r\n\t\"HH:mm:ss - HH:mm:ss\": \"TimeRange\",\r\n};\r\nfunction docustomOnChange(e, opt, ...rest) {\r\n\tif (dataType.isObject(e.customOnChange)) {\r\n\t\tconst confun = e.customOnChange[e.fieldKey];\r\n\t\tdataType.isFunction(confun) && confun(e, e.imperative, ...rest);\r\n\t}\r\n\ttypeof opt.onChange === \"function\" && opt.onChange(...rest);\r\n}\r\nfunction treeDataAddKey(\r\n\ttree = [],\r\n\tdistKey = { label: \"label\", value: \"value\", children: \"children\", key: \"key\" },\r\n\tsrcKey = { label: \"label\", value: \"value\", children: \"children\" },\r\n\tisLeaf,\r\n) {\r\n\treturn Array.isArray(tree)\r\n\t\t? tree.map(item => {\r\n\t\t\t\tconst ciilds = treeDataAddKey(item[srcKey.children], distKey, srcKey, isLeaf);\r\n\t\t\t\treturn {\r\n\t\t\t\t\t[distKey.label]: item[srcKey.label],\r\n\t\t\t\t\t[distKey.value]: item[srcKey.value],\r\n\t\t\t\t\t[distKey.children]: ciilds.length ? ciilds : null,\r\n\t\t\t\t\t[distKey.key]: item[srcKey.value],\r\n\t\t\t\t\tisLeaf,\r\n\t\t\t\t};\r\n\t\t  })\r\n\t\t: [];\r\n}\r\nfunction selectControl(controlName) {\r\n\treturn function(e = {}, linkages, getGroupsFn = () => [], opt = {}, requestQuery = {}, currentForm) {\r\n\t\tconst isAsync = opt.isAsync;\r\n\t\tdelete opt.isAsync;\r\n\t\tlet config = e.config || {};\r\n\t\tif (typeof e.config == \"string\") {\r\n\t\t\ttry {\r\n\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t} catch (e) {}\r\n\t\t}\r\n\t\tconst { selectionsType, selectionsUrl, selectList, selectionsQuery, selectListFieldNames, ...others } = config;\r\n\t\tfunction getCurrentControl(selectList) {\r\n\t\t\tif (currentForm) {\r\n\t\t\t\t//保存已有的selectList\r\n\t\t\t\tcurrentForm.saveFieldOptions[e.fieldKey] = selectList;\r\n\t\t\t\t// currentForm.saveOptionsMapKey[e.fieldKey] = selectListFieldNames;\r\n\t\t\t}\r\n\t\t\treturn getControl(controlName, {\r\n\t\t\t\tplaceholder: e.placeholder,\r\n\t\t\t\tselectList,\r\n\t\t\t\t...others,\r\n\t\t\t\t...opt,\r\n\t\t\t\tonChange: (...rest) => {\r\n\t\t\t\t\tconsole.log(rest);\r\n\t\t\t\t\tlinkageAction(linkages, getGroupsFn, e);\r\n\t\t\t\t\tdocustomOnChange(e, opt, ...rest);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\t\t//异步类型\r\n\t\tif (selectionsType == 2) {\r\n\t\t\tif (!isAsync && currentForm && currentForm.saveFieldOptions[e.fieldKey]) {\r\n\t\t\t\treturn getCurrentControl(currentForm.saveFieldOptions[e.fieldKey]);\r\n\t\t\t}\r\n\t\t\treturn httpAjax(selectionsUrl.selectionsUrlMethod, selectionsUrl.selectionsUrl, {\r\n\t\t\t\t...selectionsQuery,\r\n\t\t\t\t...requestQuery,\r\n\t\t\t}).then(re => {\r\n\t\t\t\treturn getCurrentControl(treeDataAddKey(re.data, undefined, selectListFieldNames, undefined));\r\n\t\t\t});\r\n\t\t}\r\n\t\t//自定义选项类型\r\n\t\treturn getCurrentControl(treeDataAddKey(selectList, undefined, selectListFieldNames, undefined));\r\n\t};\r\n}\r\n\r\nconst controls = {\r\n\t//Input\r\n\t1: {\r\n\t\tgetControl(e = {}, linkages, getGroupsFn = () => [], opt = {}) {\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\treturn getControl(\"Input\", {\r\n\t\t\t\tplaceholder: e.placeholder,\r\n\t\t\t\t...config,\r\n\t\t\t\t...opt,\r\n\t\t\t\tonBlur: (...rest) => {\r\n\t\t\t\t\tlinkageAction(linkages, getGroupsFn, e);\r\n\t\t\t\t},\r\n\t\t\t\tonChange: (...rest) => {\r\n\t\t\t\t\tdocustomOnChange(e, opt, ...rest);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetOptions(e, rules = []) {\r\n\t\t\tconst regType = e.regType; //regType 来自Zform/controls的regExps\r\n\t\t\treturn getOptionsRules(e, regType ? [regExps[regType], ...rules] : rules);\r\n\t\t},\r\n\t},\r\n\t//TextArea\r\n\t2: {\r\n\t\tgetControl(e = {}, linkages, getGroupsFn = () => [], opt = {}) {\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\treturn getControl(\"TextArea\", {\r\n\t\t\t\tplaceholder: e.placeholder,\r\n\t\t\t\t...config,\r\n\t\t\t\t...opt,\r\n\t\t\t\tonChange: (...rest) => {\r\n\t\t\t\t\tdocustomOnChange(e, opt, ...rest);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetOptions: getOptionsRules,\r\n\t},\r\n\t//Select\r\n\t3: {\r\n\t\tgetControl: selectControl(\"Select\"),\r\n\t\tgetOptions(e, rules = []) {\r\n\t\t\tconst field={...e};\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\tif ([\"multiple\", \"tags\"].includes(config.mode)) {\r\n\t\t\t\tfield.initialValue = typeof field.initialValue === \"string\" ? field.initialValue.replace(\"，\", \",\").split(\",\") : [];\r\n\t\t\t}\r\n\t\t\treturn getOptionsRules(field, rules);\r\n\t\t},\r\n\t},\r\n\r\n\t//InputNumber\r\n\t4: {\r\n\t\tgetControl(e = {}, linkages, getGroupsFn = () => [], opt = {}) {\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\treturn getControl(\"InputNumber\", {\r\n\t\t\t\tplaceholder: e.placeholder,\r\n\t\t\t\t...config,\r\n\t\t\t\t...opt,\r\n\t\t\t\tonChange: (...rest) => {\r\n\t\t\t\t\tdocustomOnChange(e, opt, ...rest);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetOptions: getOptionsRules,\r\n\t},\r\n\t//日期/时间控件\r\n\t5: {\r\n\t\tgetControl(e = {}, linkages, getGroupsFn = () => [], opt = {}) {\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\tlet showTime = false;\r\n\t\t\tconfig.format = config.format ? config.format : \"\";\r\n\r\n\t\t\tlet format = config.format;\r\n\t\t\tconst setShowTime = format => {\r\n\t\t\t\tif (format.startsWith(\"YYYY\") && (format.includes(\"HH\") || format.includes(\"h\"))) {\r\n\t\t\t\t\tshowTime = {\r\n\t\t\t\t\t\tformat: format.split(\" \")[1],\r\n\t\t\t\t\t\tuse12Hours: format.includes(\"h\"),\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (config.format.includes(\" - \")) {\r\n\t\t\t\tformat = config.format.split(\" - \")[0];\r\n\t\t\t\t// console.log(format)\r\n\t\t\t\tsetShowTime(format);\r\n\t\t\t} else {\r\n\t\t\t\tsetShowTime(config.format);\r\n\t\t\t}\r\n\t\t\t// let defaultOpt = {};\r\n\t\t\tlet timeOpt = {\r\n\t\t\t\tshowTime,\r\n\t\t\t};\r\n\t\t\tif (dateFormats[config.format] === \"TimePicker\") {\r\n\t\t\t\ttimeOpt = { use12Hours: config.format.includes(\"h\") };\r\n\t\t\t}\r\n\r\n\t\t\treturn getControl(dateFormats[config.format], {\r\n\t\t\t\tformat,\r\n\t\t\t\tplaceholder: e.placeholder,\r\n\t\t\t\t...opt,\r\n\t\t\t\t...timeOpt,\r\n\t\t\t\t// ...defaultOpt,\r\n\t\t\t\tonChange: (...rest) => {\r\n\t\t\t\t\t// console.log(rest);\r\n\t\t\t\t\tdocustomOnChange(e, opt, ...rest);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetOptions(es, rules = []) {\r\n\t\t\tconst e = { ...es };\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\tconfig.format = config.format ? config.format : \"\";\r\n\t\t\tconst isTimeRange = [\"RangePicker\", \"TimeRange\"].includes(dateFormats[config.format]);\r\n\t\t\tconst format = config.format.includes(\" - \") ? config.format.split(\" - \")[0] : config.format;\r\n\t\t\tif (isTimeRange) {\r\n\t\t\t\tif (e.required)\r\n\t\t\t\t\trules.push({\r\n\t\t\t\t\t\tvalidator(rule, value, callback) {\r\n\t\t\t\t\t\t\tif (Array.isArray(value) && value.length === 2) {\r\n\t\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcallback(\"未填完整\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\te.initialValue =\r\n\t\t\t\t\ttypeof e.initialValue === \"string\" && e.initialValue.includes(\"-\")\r\n\t\t\t\t\t\t? e.initialValue.split(\"-\")\r\n\t\t\t\t\t\t: e.initialValue;\r\n\t\t\t\te.initialValue =\r\n\t\t\t\t\tArray.isArray(e.initialValue) && e.initialValue.length\r\n\t\t\t\t\t\t? e.initialValue.map(time => moment(time, format))\r\n\t\t\t\t\t\t: null;\r\n\t\t\t} else {\r\n\t\t\t\tif (typeof e.initialValue === \"string\") {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\te.initialValue = moment(e.initialValue, format);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tthrow Error(\"initialValue格式有误\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn getOptionsRules(e, rules);\r\n\t\t},\r\n\t},\r\n\t//Cascader级联\r\n\t6: {\r\n\t\tgetControl(e = {}, linkages, getGroupsFn = () => [], opt = {}, requestQuery = {}, currentForm) {\r\n\t\t\t// const that = this;\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\tconst {\r\n\t\t\t\tselectionsType,\r\n\t\t\t\tselectionsUrl,\r\n\t\t\t\tselectList,\r\n\t\t\t\tselectionsQuery,\r\n\t\t\t\tselectListFieldNames,\r\n\t\t\t\tchangeOnSelect,\r\n\t\t\t\t...others\r\n\t\t\t} = config;\r\n\t\t\tfunction getCurrentControl(selectList) {\r\n\t\t\t\tconst newProps = {\r\n\t\t\t\t\t...others,\r\n\t\t\t\t\tchangeOnSelect,\r\n\t\t\t\t\t...opt,\r\n\t\t\t\t\tselectionsUrl,\r\n\t\t\t\t\tselectionsQuery,\r\n\t\t\t\t\tplaceholder: e.placeholder,\r\n\t\t\t\t\tselectList,\r\n\t\t\t\t\toptionsChange: options => {\r\n\t\t\t\t\t\tif (currentForm) {\r\n\t\t\t\t\t\t\t//保存已有的selectList\r\n\t\t\t\t\t\t\tcurrentForm.saveFieldOptions[e.fieldKey] = options;\r\n\t\t\t\t\t\t\t// currentForm.saveOptionsMapKey[e.fieldKey] = selectListFieldNames;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselectListFieldNames,\r\n\t\t\t\t\tonChange: (...rest) => {\r\n\t\t\t\t\t\tlinkageAction(linkages, getGroupsFn, e);\r\n\t\t\t\t\t\tdocustomOnChange(e, opt, ...rest);\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\treturn <CascaderLoader {...newProps} />;\r\n\t\t\t}\r\n\t\t\t//异步类型\r\n\t\t\tif (selectionsType == 2) {\r\n\t\t\t\tif (currentForm && currentForm.saveFieldOptions[e.fieldKey]) {\r\n\t\t\t\t\treturn getCurrentControl(currentForm.saveFieldOptions[e.fieldKey]);\r\n\t\t\t\t}\r\n\t\t\t\treturn httpAjax(selectionsUrl.selectionsUrlMethod, selectionsUrl.selectionsUrl, {\r\n\t\t\t\t\t...selectionsQuery,\r\n\t\t\t\t\t...requestQuery,\r\n\t\t\t\t}).then(re => {\r\n\t\t\t\t\treturn getCurrentControl(\r\n\t\t\t\t\t\ttreeDataAddKey(\r\n\t\t\t\t\t\t\tre.data,\r\n\t\t\t\t\t\t\tundefined,\r\n\t\t\t\t\t\t\tselectListFieldNames,\r\n\t\t\t\t\t\t\tselectionsUrl.requireType !== \"part\", // false  即为分部加载\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//自定义选项类型\r\n\t\t\treturn getCurrentControl(treeDataAddKey(selectList, undefined, selectListFieldNames, true));\r\n\t\t},\r\n\t\tgetOptions: getOptionsRules,\r\n\t},\r\n\t//TreeSelect树选择\r\n\t7: {\r\n\t\tgetControl(e = {}, linkages, getGroupsFn = () => [], opt = {}, requestQuery = {}, currentForm) {\r\n\t\t\t// const that = this;\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\tconst {\r\n\t\t\t\tselectionsType,\r\n\t\t\t\tselectionsUrl,\r\n\t\t\t\tselectList,\r\n\t\t\t\tselectionsQuery,\r\n\t\t\t\tselectListFieldNames,\r\n\t\t\t\t...others\r\n\t\t\t} = config;\r\n\t\t\tfunction getCurrentControl(selectList) {\r\n\t\t\t\tconst newProps = {\r\n\t\t\t\t\t...others,\r\n\t\t\t\t\t...opt,\r\n\t\t\t\t\tselectionsUrl,\r\n\t\t\t\t\tselectionsQuery,\r\n\t\t\t\t\tplaceholder: e.placeholder,\r\n\t\t\t\t\tselectList,\r\n\t\t\t\t\toptionsChange: options => {\r\n\t\t\t\t\t\tif (currentForm) {\r\n\t\t\t\t\t\t\t//保存已有的selectList\r\n\t\t\t\t\t\t\tcurrentForm.saveFieldOptions[e.fieldKey] = options;\r\n\t\t\t\t\t\t\tcurrentForm.saveOptionsMapKey[e.fieldKey] = {\r\n\t\t\t\t\t\t\t\tlabel: \"title\",\r\n\t\t\t\t\t\t\t\tvalue: \"value\",\r\n\t\t\t\t\t\t\t\tchildren: \"children\",\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselectListFieldNames,\r\n\t\t\t\t\tonChange: (...rest) => {\r\n\t\t\t\t\t\tlinkageAction(linkages, getGroupsFn, e);\r\n\t\t\t\t\t\tdocustomOnChange(e, opt, ...rest);\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\treturn <TreeSelectLoader {...newProps} />;\r\n\t\t\t}\r\n\t\t\t//异步类型\r\n\t\t\tif (selectionsType == 2) {\r\n\t\t\t\tif (currentForm && currentForm.saveFieldOptions[e.fieldKey]) {\r\n\t\t\t\t\treturn getCurrentControl(currentForm.saveFieldOptions[e.fieldKey]);\r\n\t\t\t\t}\r\n\t\t\t\treturn httpAjax(selectionsUrl.selectionsUrlMethod, selectionsUrl.selectionsUrl, {\r\n\t\t\t\t\t...selectionsQuery,\r\n\t\t\t\t\t...requestQuery,\r\n\t\t\t\t}).then(re => {\r\n\t\t\t\t\treturn getCurrentControl(\r\n\t\t\t\t\t\ttreeDataAddKey(\r\n\t\t\t\t\t\t\tre.data,\r\n\t\t\t\t\t\t\t{ label: \"title\", value: \"value\", children: \"children\", key: \"key\" },\r\n\t\t\t\t\t\t\tselectListFieldNames,\r\n\t\t\t\t\t\t\tselectionsUrl.requireType !== \"part\", // false  即为分部加载\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//自定义选项类型\r\n\t\t\treturn getCurrentControl(\r\n\t\t\t\ttreeDataAddKey(\r\n\t\t\t\t\tselectList,\r\n\t\t\t\t\t{ label: \"title\", value: \"value\", children: \"children\", key: \"key\" },\r\n\t\t\t\t\tselectListFieldNames,\r\n\t\t\t\t\ttrue,\r\n\t\t\t\t),\r\n\t\t\t);\r\n\t\t},\r\n\t\tgetOptions: getOptionsRules,\r\n\t},\r\n\t//Checkbox.Group\r\n\t8: {\r\n\t\tgetControl: selectControl(\"Checkbox.Group\"),\r\n\t\tgetOptions(e, rules = []) {\r\n\t\t\tconst field={...e};\r\n\t\t\tfield.initialValue = typeof field.initialValue === \"string\" ? field.initialValue.replace(\"，\", \",\").split(\",\") : [];\r\n\t\t\treturn getOptionsRules(field, rules);\r\n\t\t},\r\n\t},\r\n\t//Radio.Group\r\n\t9: {\r\n\t\tgetControl: selectControl(\"Radio.Group\"),\r\n\t\tgetOptions: getOptionsRules,\r\n\t},\r\n\t// //TimePicker\r\n\t// 10: {\r\n\t// \tgetControl(e = {}, linkages, getGroupsFn = () => [], opt = {}) {\r\n\t// \t\treturn getControl(\"TimePicker\", {\r\n\t// \t\t\tformat: e.format,\r\n\t// \t\t\tplaceholder: e.placeholder,\r\n\t// \t\t\t...opt,\r\n\t// \t\t\tonChange: (...rest) => {\r\n\t// \t\t\t\tdocustomOnChange(e,opt, ...rest);\r\n\t// \t\t\t},\r\n\t// \t\t});\r\n\t// \t},\r\n\t// \tgetOptions: getOptionsRules,\r\n\t// },\r\n\t//Upload\r\n\t11: {\r\n\t\tgetControl(e = {}, linkages, getGroupsFn = () => [], opt = {}, requestQuery = {}) {\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\treturn <ZeroUpload config={{ ...config, multiple: e.multiple }} />;\r\n\t\t},\r\n\t\tgetOptions: getOptionsRules,\r\n\t},\r\n\t//ColorPicker\r\n\t12: {\r\n\t\tgetControl(e = {}, linkages, getGroupsFn = () => [], opt = {}, requestQuery = {}) {\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\treturn getControl(\"ColorPicker\", {\r\n\t\t\t\t...config,\r\n\t\t\t\t...opt,\r\n\t\t\t\tonChange: (...rest) => {\r\n\t\t\t\t\te.currentSaturability = rest[1] ? rest[1].hsv.s : 0;\r\n\t\t\t\t\t// console.log(\"color-change\", rest[1]);\r\n\t\t\t\t\tdocustomOnChange(e, opt, ...rest);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetOptions(e, rules = []) {\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\tif (config.minSaturability > 0) {\r\n\t\t\t\trules.push({\r\n\t\t\t\t\tvalidator(rule, value, callback) {\r\n\t\t\t\t\t\tconst currentSaturability = e.currentSaturability;\r\n\t\t\t\t\t\tif (currentSaturability && config.minSaturability > currentSaturability) {\r\n\t\t\t\t\t\t\treturn callback(e.errorMsg ? e.errorMsg : `饱和度不能小于${config.minSaturability * 100}%`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn callback();\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn getOptionsRules(e, rules);\r\n\t\t},\r\n\t},\r\n\t//地图选点\r\n\t13: {\r\n\t\tgetControl(e = {}, linkages, getGroupsFn = () => [], opt = {}) {\r\n\t\t\tlet config = e.config || {};\r\n\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconfig = JSON.parse(e.config);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<MapChooseAddress\r\n\t\t\t\t\t{...{\r\n\t\t\t\t\t\tplaceholder: e.placeholder,\r\n\t\t\t\t\t\t...config,\r\n\t\t\t\t\t\t...opt,\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t},\r\n\t\tgetOptions: getOptionsRules,\r\n\t},\r\n};\r\nexport default controls;\r\n\r\nconst LoadMapIframe = React.forwardRef(function(props, ref) {\r\n\tconst { mapType, value, onChange } = props;\r\n\tuseEffect(() => {\r\n\t\tlet messageCallback = null;\r\n\t\tif (mapType === \"amap\") {\r\n\t\t\t//高德地图\r\n\t\t\tconst iframe = document.getElementById(\"addressIframe\").contentWindow;\r\n\t\t\tdocument.getElementById(\"addressIframe\").onload = function() {\r\n\t\t\t\tiframe.postMessage(\"hello\", \"https://m.amap.com/picker/\");\r\n\t\t\t};\r\n\t\t\tmessageCallback = function(event) {\r\n\t\t\t\tconst loc = event.data;\r\n\t\t\t\tconst latlng = loc.location.split(\",\");\r\n\t\t\t\tonChange &&\r\n\t\t\t\t\tonChange({\r\n\t\t\t\t\t\tname: loc.name,\r\n\t\t\t\t\t\taddress: loc.address,\r\n\t\t\t\t\t\tlongitude: latlng[0],\r\n\t\t\t\t\t\tlatitude: latlng[1],\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t} else if (mapType === \"qqmap\") {\r\n\t\t\t//腾讯地图\r\n\t\t\tmessageCallback = function(event) {\r\n\t\t\t\t// 接收位置信息，用户选择确认位置点后选点组件会触发该事件，回传用户的位置信息\r\n\t\t\t\tconst loc = event.data;\r\n\t\t\t\tif (loc && loc.module == \"locationPicker\") {\r\n\t\t\t\t\t//防止其他应用也会向该页面post信息，需判断module是否为'locationPicker'\r\n\t\t\t\t\tonChange &&\r\n\t\t\t\t\t\tonChange({\r\n\t\t\t\t\t\t\tname: loc.poiname,\r\n\t\t\t\t\t\t\taddress: loc.poiaddress,\r\n\t\t\t\t\t\t\tlongitude: loc.latlng.lng,\r\n\t\t\t\t\t\t\tlatitude: loc.latlng.lat,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (messageCallback) {\r\n\t\t\twindow.addEventListener(\"message\", messageCallback, false);\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\twindow.removeEventListener(\"message\", messageCallback, false);\r\n\t\t\t};\r\n\t\t}\r\n\t}, []);\r\n\tlet url = \"\";\r\n\tlet center = \"\";\r\n\tif (dataType.isObject(value)) {\r\n\t\tcenter = `${value.longitude},${value.latitude}`;\r\n\t}\r\n\tif (mapType === \"amap\") {\r\n\t\turl = `https://m.amap.com/picker/?center=${center}&key=3d5c1c6169c64554d6f9fcca35d4abff&total=20`;\r\n\t} else if (mapType === \"qqmap\") {\r\n\t\turl = `https://apis.map.qq.com/tools/locpicker?coord=${center}&search=1&type=1&key=63QBZ-B5GKV-46RPH-UCUF2-K5TUJ-OKBAK&referer=wx_map&total=20`;\r\n\t}\r\n\treturn <iframe frameBorder=\"0\" width=\"100%\" height=\"100%\" id=\"addressIframe\" src={url} />;\r\n});\r\n\r\nconst MapChooseAddress = ZerodMainContext.setConsumer(\r\n\tReact.forwardRef(function(props, ref) {\r\n\t\tconst { value, onChange, placeholder, showRightModal, mapType, disabled } = props;\r\n\t\tconst inputValue = dataType.isObject(value) ? `${value.name}[${value.address}]` : \"\";\r\n\t\tuseEffect(() => {}, []);\r\n\t\tconst openMap = () => {\r\n\t\t\tshowRightModal({\r\n\t\t\t\tshow: true,\r\n\t\t\t\tmodal: \"addressModal\",\r\n\t\t\t\tscroll: false,\r\n\t\t\t\twidth: \"500px\",\r\n\t\t\t\tcontent: (\r\n\t\t\t\t\t<LoadMapIframe\r\n\t\t\t\t\t\tmapType={mapType || \"qqmap\"}\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={val => {\r\n\t\t\t\t\t\t\tshowRightModal({\r\n\t\t\t\t\t\t\t\tshow: false,\r\n\t\t\t\t\t\t\t\tmodal: \"addressModal\",\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tonChange && onChange(val);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\t});\r\n\t\t};\r\n\t\treturn getControl(\"Input\", {\r\n\t\t\tvalue: inputValue,\r\n\t\t\taddonAfter: (\r\n\t\t\t\t<i className=\"zero-icon zerod-address z-address-btn\" onClick={!disabled ? openMap : undefined} />\r\n\t\t\t),\r\n\t\t\tplaceholder,\r\n\t\t\tdisabled,\r\n\t\t});\r\n\t}),\r\n);\r\n\r\n//Cascader 异步加载子节点组件\r\nconst CascaderLoader = React.forwardRef(function(props, ref) {\r\n\tconst {\r\n\t\tchangeOnSelect,\r\n\t\tselectList,\r\n\t\tselectionsUrl,\r\n\t\tselectionsQuery,\r\n\t\tselectListFieldNames,\r\n\t\toptionsChange,\r\n\t\t...others\r\n\t} = props;\r\n\tconst [options, setOptions] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetOptions(selectList);\r\n\t}, [selectList]);\r\n\tuseEffect(() => {\r\n\t\toptionsChange && optionsChange(options);\r\n\t}, [options]);\r\n\treturn getControl(\"Cascader\", {\r\n\t\t...others,\r\n\t\toptions,\r\n\t\tchangeOnSelect: Boolean(changeOnSelect),\r\n\t\tshowSearch: false,\r\n\t\tloadData:\r\n\t\t\tselectionsUrl && selectionsUrl.requireType === \"part\"\r\n\t\t\t\t? selectedOptions => {\r\n\t\t\t\t\t\tconst targetOption = selectedOptions[selectedOptions.length - 1];\r\n\t\t\t\t\t\ttargetOption.loading = true;\r\n\t\t\t\t\t\thttpAjax(selectionsUrl.selectionsUrlMethod, selectionsUrl.selectionsUrl, {\r\n\t\t\t\t\t\t\t...selectionsQuery,\r\n\t\t\t\t\t\t\tid: targetOption.value,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(re => {\r\n\t\t\t\t\t\t\t\tif (Array.isArray(re.data) && re.data.length) {\r\n\t\t\t\t\t\t\t\t\ttargetOption.children = treeDataAddKey(\r\n\t\t\t\t\t\t\t\t\t\tre.data,\r\n\t\t\t\t\t\t\t\t\t\tundefined,\r\n\t\t\t\t\t\t\t\t\t\tselectListFieldNames,\r\n\t\t\t\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\ttargetOption.children = null;\r\n\t\t\t\t\t\t\t\t\ttargetOption.isLeaf = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(re => {\r\n\t\t\t\t\t\t\t\ttargetOption.children = null;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.finally(() => {\r\n\t\t\t\t\t\t\t\ttargetOption.loading = false;\r\n\t\t\t\t\t\t\t\tsetOptions([...options]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t  }\r\n\t\t\t\t: undefined,\r\n\t});\r\n});\r\n//treeSelect 异步加载子节点组件\r\nconst TreeSelectLoader = React.forwardRef(function(props, ref) {\r\n\tconst { selectList, selectionsUrl, selectionsQuery, selectListFieldNames, optionsChange, ...others } = props;\r\n\tconst [options, setOptions] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetOptions(selectList);\r\n\t}, [selectList]);\r\n\tuseEffect(() => {\r\n\t\toptionsChange && optionsChange(options);\r\n\t}, [options]);\r\n\treturn getControl(\"TreeSelect\", {\r\n\t\t...others,\r\n\t\ttreeData: options,\r\n\t\tshowSearch: false,\r\n\t\ttreeDefaultExpandAll: false,\r\n\t\tallowClear: true,\r\n\t\tloadData:\r\n\t\t\tselectionsUrl && selectionsUrl.requireType === \"part\"\r\n\t\t\t\t? treeNode => {\r\n\t\t\t\t\t\t// console.log(treeNode);\r\n\t\t\t\t\t\tif (treeNode.props.isLeaf) {\r\n\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn httpAjax(selectionsUrl.selectionsUrlMethod, selectionsUrl.selectionsUrl, {\r\n\t\t\t\t\t\t\t...selectionsQuery,\r\n\t\t\t\t\t\t\tid: treeNode.props.value,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(re => {\r\n\t\t\t\t\t\t\t\titemsFromTree({\r\n\t\t\t\t\t\t\t\t\ttree: options,\r\n\t\t\t\t\t\t\t\t\tsourceItem: { value: treeNode.props.value },\r\n\t\t\t\t\t\t\t\t\tkeyObj: { id: \"value\", children: \"children\" },\r\n\t\t\t\t\t\t\t\t\taction({ tree, currentItem, item, index, keyObj }) {\r\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(re.data) && re.data.length) {\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentItem.children = treeDataAddKey(\r\n\t\t\t\t\t\t\t\t\t\t\t\tre.data,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: \"title\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: \"value\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchildren: \"children\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey: \"key\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectListFieldNames,\r\n\t\t\t\t\t\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentItem.children = null;\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentItem.isLeaf = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.finally(() => {\r\n\t\t\t\t\t\t\t\tsetOptions([...options]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t  }\r\n\t\t\t\t: undefined,\r\n\t});\r\n});\r\n","import { arrayFilterBy, dataType } from \"../zTool\";\r\nimport moment from \"moment\";\r\nimport controls from \"./controls\";\r\nfunction concatKeys(values, arr, a, d) {\r\n\tconst getNewFields = () => {\r\n\t\treturn d.fields.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t...item,\r\n\t\t\t\tsrcFieldKey: a.src.fieldKey,\r\n\t\t\t};\r\n\t\t});\r\n\t};\r\n\tif (Array.isArray(values[a.src.fieldKey])) {\r\n\t\tif (Array.isArray(d.srcValue)) {\r\n\t\t\tif (JSON.stringify(values[a.src.fieldKey]) == JSON.stringify(d.srcValue)) {\r\n\t\t\t\tarr = arr.concat(getNewFields());\r\n\t\t\t}\r\n\t\t} else if (values[a.src.fieldKey].includes(d.srcValue)) {\r\n\t\t\tarr = arr.concat(getNewFields());\r\n\t\t}\r\n\t} else if (d.srcValue == values[a.src.fieldKey] || [\"6\", \"7\"].includes(a.linkageType)) {\r\n\t\tarr = arr.concat(getNewFields());\r\n\t}\r\n\treturn arr;\r\n}\r\nconst initialValueLinkageAction = function(ages = [], getGroupsFn, seftItem) {\r\n\tages = dataType.isArray(ages) ? ages : [];\r\n\tif (!ages.length) return;\r\n\tsetTimeout(() => {\r\n\t\tlet formObjs = [];\r\n\t\tconst groups = getGroupsFn();\r\n\t\tgroups.forEach(g => {\r\n\t\t\tformObjs.push(g.groupRef.current.getForm());\r\n\t\t});\r\n\t\tlet values = {};\r\n\t\tformObjs.forEach(o => {\r\n\t\t\tvalues = { ...values, ...o.form.getFieldsValue() };\r\n\t\t});\r\n\t\tlet cardGetBirthdayKeys = [];\r\n\t\tlet asyncParamNameKeys = [];\r\n\t\tlet groupHiddenIds = [];\r\n\t\tlet hiddenKeys = [];\r\n\t\tlet disabledKeys = [];\r\n\t\tlet requiredKeys = [];\r\n\t\tlet noRequiredKeys = [];\r\n\t\tlet selectOptions = [];\r\n\t\tlet hasClearSelect = false;\r\n\t\tages.forEach(a => {\r\n\t\t\tif (values.hasOwnProperty(a.src.fieldKey)) {\r\n\t\t\t\tswitch (a.linkageType) {\r\n\t\t\t\t\t//单选联动异步请求选项\r\n\t\t\t\t\tcase \"7\":\r\n\t\t\t\t\t\ta.dist.forEach(d => {\r\n\t\t\t\t\t\t\tasyncParamNameKeys = concatKeys(values, asyncParamNameKeys, a, d);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t//输入身份证自动联动生日\r\n\t\t\t\t\tcase \"6\":\r\n\t\t\t\t\t\ta.dist.forEach(d => {\r\n\t\t\t\t\t\t\tcardGetBirthdayKeys = concatKeys(values, cardGetBirthdayKeys, a, d);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t//隐藏\r\n\t\t\t\t\tcase \"5.1\":\r\n\t\t\t\t\t\ta.dist.forEach(d => {\r\n\t\t\t\t\t\t\tgroupHiddenIds = concatKeys(values, groupHiddenIds, a, d);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"5.2\":\r\n\t\t\t\t\t\ta.dist.forEach(d => {\r\n\t\t\t\t\t\t\thiddenKeys = concatKeys(values, hiddenKeys, a, d);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t//禁用\r\n\t\t\t\t\tcase \"1\":\r\n\t\t\t\t\t\ta.dist.forEach(d => {\r\n\t\t\t\t\t\t\tdisabledKeys = concatKeys(values, disabledKeys, a, d);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t// 必填\r\n\t\t\t\t\tcase \"2\":\r\n\t\t\t\t\t\ta.dist.forEach(d => {\r\n\t\t\t\t\t\t\trequiredKeys = concatKeys(values, requiredKeys, a, d);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t// 非必填\r\n\t\t\t\t\tcase \"3\":\r\n\t\t\t\t\t\ta.dist.forEach(d => {\r\n\t\t\t\t\t\t\tnoRequiredKeys = concatKeys(values, noRequiredKeys, a, d);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t// 控制选项\r\n\t\t\t\t\tcase \"4\":\r\n\t\t\t\t\t\thasClearSelect = seftItem && a.src.fieldKey == seftItem.fieldKey;\r\n\t\t\t\t\t\ta.dist.forEach(d => {\r\n\t\t\t\t\t\t\tselectOptions = concatKeys(values, selectOptions, a, d);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// console.log(\"selectOptions\",selectOptions)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet newFormObjs = [];\r\n\t\tconst newItems = [];\r\n\t\tconst asyncFields = [];\r\n\t\tgroups.forEach((g, gindex) => {\r\n\t\t\tconst findHideGroup = groupHiddenIds.findIndex(gh => {\r\n\t\t\t\treturn gh.groupName && gh.groupName === g.name;\r\n\t\t\t});\r\n\t\t\tg.groupRef.current.show(findHideGroup === -1);\r\n\t\t\tif (findHideGroup === -1) {\r\n\t\t\t\tnewFormObjs.push(g.groupRef.current.getForm());\r\n\t\t\t\tg.formItems.forEach(field => {\r\n\t\t\t\t\tconst hiddenFields = arrayFilterBy(hiddenKeys, { fieldKey: field.fieldKey });\r\n\t\t\t\t\tif (values.hasOwnProperty(field.fieldKey)) {\r\n\t\t\t\t\t\tconst disabledFields = arrayFilterBy(disabledKeys, { fieldKey: field.fieldKey });\r\n\t\t\t\t\t\tconst requiredFields = arrayFilterBy(requiredKeys, { fieldKey: field.fieldKey });\r\n\t\t\t\t\t\tconst noRequiredFields = arrayFilterBy(noRequiredKeys, { fieldKey: field.fieldKey });\r\n\t\t\t\t\t\tconst selectOptionsFields = arrayFilterBy(selectOptions, { fieldKey: field.fieldKey });\r\n\r\n\t\t\t\t\t\tlet e = { ...field };\r\n\t\t\t\t\t\tif (disabledFields.length) {\r\n\t\t\t\t\t\t\te.required = 0;\r\n\t\t\t\t\t\t} else if (requiredFields.length && noRequiredFields.length) {\r\n\t\t\t\t\t\t\tconsole.error(`同个控件不应该同时存在\"必填\"和\"非必填\"联动配置，请纠正`);\r\n\t\t\t\t\t\t} else if (requiredFields.length) {\r\n\t\t\t\t\t\t\te.required = 1;\r\n\t\t\t\t\t\t} else if (noRequiredFields.length) {\r\n\t\t\t\t\t\t\te.required = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof e.config == \"string\") {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\te.config = JSON.parse(e.config);\r\n\t\t\t\t\t\t\t} catch (e) {}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (selectOptionsFields.length) {\r\n\t\t\t\t\t\t\te.config = { ...e.config, selectList: selectOptionsFields[0].options };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// console.log(selectOptionsFields,e)\r\n\t\t\t\t\t\t// console.log(selectOptionsFields, field.fieldKey, values);\r\n\t\t\t\t\t\tconst control =\r\n\t\t\t\t\t\t\tdisabledFields.length || selectOptionsFields.length\r\n\t\t\t\t\t\t\t\t? controls[e.fieldType].getControl(e, ages, getGroupsFn, {\r\n\t\t\t\t\t\t\t\t\t\tdisabled: disabledFields.length > 0 || e.disabled,\r\n\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t: null;\r\n\t\t\t\t\t\tconst options =\r\n\t\t\t\t\t\t\tJSON.stringify(e) !== JSON.stringify(field) ? controls[e.fieldType].getOptions(e) : null;\r\n\t\t\t\t\t\tconst newItem = {};\r\n\t\t\t\t\t\tif (control) {\r\n\t\t\t\t\t\t\tnewItem.control = control;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (options) {\r\n\t\t\t\t\t\t\tnewItem.options = options;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnewItems.push({\r\n\t\t\t\t\t\t\tkey: e.fieldKey,\r\n\t\t\t\t\t\t\tshow: !hiddenFields.length,\r\n\t\t\t\t\t\t\tnewItem: control || options ? newItem : e.config.selectionsType == 2 ? undefined : \"reset\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//单选联动异步请求选项\r\n\t\t\t\t\t\tlet paramField = asyncParamNameKeys.find(item => item.fieldKey === e.fieldKey);\r\n\t\t\t\t\t\tif (paramField && e.config.selectionsType == 2) {\r\n\t\t\t\t\t\t\te.config = {\r\n\t\t\t\t\t\t\t\t...e.config,\r\n\t\t\t\t\t\t\t\tselectionsQuery: {\r\n\t\t\t\t\t\t\t\t\t...e.config.selectionsQuery,\r\n\t\t\t\t\t\t\t\t\t[paramField.asyncParamName]: values[paramField.srcFieldKey],\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\te.groupIndex = gindex;\r\n\t\t\t\t\t\t\te.srcFieldKey = paramField.srcFieldKey;\r\n\t\t\t\t\t\t\tasyncFields.push(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewItems.push({\r\n\t\t\t\t\t\t\tkey: field.fieldKey,\r\n\t\t\t\t\t\t\tshow: !hiddenFields.length,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t// console.log(selectOptions)\r\n\r\n\t\tnewFormObjs.forEach((o, i) => {\r\n\t\t\to.methods.changeFormItems(newItems, true);\r\n\t\t\tasyncFields.forEach(e => {\r\n\t\t\t\tif (i === e.groupIndex && ((seftItem && e.srcFieldKey == seftItem.fieldKey) || !seftItem)) {\r\n\t\t\t\t\to.methods.changeFormItems({ key: e.fieldKey, loading: true }, true);\r\n\t\t\t\t\tcontrols[e.fieldType]\r\n\t\t\t\t\t\t.getControl(e, ages, getGroupsFn, { isAsync: true }, undefined, o.form)\r\n\t\t\t\t\t\t.then(control => {\r\n\t\t\t\t\t\t\to.methods.changeFormItems({ key: e.fieldKey, loading: false, newItem: { control } }, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst resetDisable = disabledKeys.map(item => item.fieldKey);\r\n\t\t\tconst resetNoRequired = noRequiredKeys.map(item => item.fieldKey);\r\n\t\t\tconst resetSelect = selectOptions.map(item => item.fieldKey);\r\n\t\t\to.form.validateFields([...resetDisable, ...resetNoRequired]);\r\n\t\t\to.form.resetFields([...resetDisable, ...(hasClearSelect ? resetSelect : [])]);\r\n\t\t\t//处理身份证号码获取生日联动到其他控件：\r\n\t\t\tif (cardGetBirthdayKeys.length) {\r\n\t\t\t\tconst formValues = o.form.getFieldsValue();\r\n\t\t\t\tcardGetBirthdayKeys.forEach(field => {\r\n\t\t\t\t\tif (formValues.hasOwnProperty(field.fieldKey)) {\r\n\t\t\t\t\t\tlet birthday = values[field.srcFieldKey];\r\n\t\t\t\t\t\tconst val = birthday && birthday.length > 14 ? birthday.substring(6, 14) : \"\";\r\n\t\t\t\t\t\to.form.setFieldsValue({\r\n\t\t\t\t\t\t\t[field.fieldKey]: field.fieldType == 5 ? moment(stringJoinSyml(val)) : stringJoinSyml(val),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}, 60);\r\n};\r\nfunction stringJoinSyml(str) {\r\n\treturn str.length === 8 ? str.substring(0, 4) + \"-\" + str.substring(4, 6) + \"-\" + str.substring(6, 8) : \"\";\r\n}\r\nexport default initialValueLinkageAction;\r\n","import React from \"react\";\r\nimport { dataType } from \"../zTool\";\r\nimport controls from \"./controls\";\r\n//以 \"seq\" 字段排序\r\nfunction sortList(o1, o2) {\r\n\tconst v1 = o1.hasOwnProperty(\"seq\") ? o1[\"seq\"] : 0;\r\n\tconst v2 = o2.hasOwnProperty(\"seq\") ? o2[\"seq\"] : 0;\r\n\treturn v1 - v2;\r\n}\r\nexport function pareLinkages(linkages) {\r\n\tif (Array.isArray(linkages)) {\r\n\t\treturn linkages;\r\n\t} else if (typeof linkages === \"string\" && /^\\[.+/.test(linkages)) {\r\n\t\treturn JSON.parse(linkages);\r\n\t}\r\n\treturn [];\r\n}\r\nexport function getFormItem(field, group, linkage, getGroupsFn, imperative, customOnChange, customFormRules) {\r\n\tconst getRules = customFormRules ? customFormRules[field.fieldKey] : null;\r\n\tconst newField = {\r\n\t\t...field,\r\n\t\tgroupId: group.id,\r\n\t\tseq: field.seq,\r\n\t\tkey: field.fieldKey,\r\n\t\tlabel: field.label,\r\n\t\tspan: field.span ? field.span : 8,\r\n\t\tlabelFocused: [8, 9, 11, 5].includes(field.fieldType),\r\n\t\timperative,\r\n\t\tcustomOnChange,\r\n\t};\r\n\tnewField.options = controls[field.fieldType].getOptions(\r\n\t\tnewField,\r\n\t\ttypeof getRules === \"function\" ? getRules(newField, imperative) : [],\r\n\t);\r\n\r\n\tnewField.render = currentForm => {\r\n\t\treturn controls[newField.fieldType].getControl(\r\n\t\t\tnewField,\r\n\t\t\tlinkage,\r\n\t\t\tgetGroupsFn,\r\n\t\t\t{ disabled: field.disabled },\r\n\t\t\tundefined,\r\n\t\t\tcurrentForm,\r\n\t\t);\r\n\t};\r\n\treturn newField;\r\n}\r\nexport function getGroupItem(item, linkage, getGroupsFn, imperative, customOnChange, customFormRules, labelLayout) {\r\n\tconst formItems = item.formFieldInfoList.map(field => {\r\n\t\treturn getFormItem(field, item, linkage, getGroupsFn, imperative, customOnChange, customFormRules);\r\n\t});\r\n\tformItems.sort(sortList);\r\n\treturn {\r\n\t\tadditive: item.additive, //添加状态\r\n\t\tgroupRef: React.createRef(),\r\n\t\tseq: item.seq,\r\n\t\tid: item.id,\r\n\t\tname: item.name,\r\n\t\tformItems,\r\n\t\tlabelLayout,\r\n\t};\r\n}\r\n\r\nexport function translateGroups(formData, getGroupsFn, linkage, imperative) {\r\n\tif (dataType.isObject(formData) && Array.isArray(formData.sectionList)) {\r\n\t\tconst groups = formData.sectionList.map(item => {\r\n\t\t\treturn getGroupItem(\r\n\t\t\t\titem,\r\n\t\t\t\tlinkage ? pareLinkages(formData.linkages) : null,\r\n\t\t\t\tgetGroupsFn,\r\n\t\t\t\timperative,\r\n\t\t\t\tformData.customOnChange,\r\n\t\t\t\tformData.customFormRules,\r\n\t\t\t\tformData.labelLayout,\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\tgroups.sort(sortList);\r\n\t\treturn groups;\r\n\t} else {\r\n\t\treturn [];\r\n\t}\r\n}\r\n//移除linkageRef对应fieldKey的联动配置\r\nexport function removeSomeLinkage(linkageRef, fieldKey) {\r\n\tlet hasRemoveAge = false;\r\n\tlinkageRef.current = linkageRef.current.filter(age => {\r\n\t\tconst unlikeness = age.src[\"fieldKey\"] !== fieldKey;\r\n\t\tif (unlikeness) {\r\n\t\t\tage.dist.forEach(d => {\r\n\t\t\t\td.fields = d.fields.filter(f => {\r\n\t\t\t\t\tconst unlikeness = f[\"fieldKey\"] !== fieldKey;\r\n\t\t\t\t\tif (!hasRemoveAge && !unlikeness) {\r\n\t\t\t\t\t\thasRemoveAge = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn unlikeness;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (!hasRemoveAge && !unlikeness) {\r\n\t\t\thasRemoveAge = true;\r\n\t\t}\r\n\t\treturn unlikeness;\r\n\t});\r\n\treturn hasRemoveAge;\r\n}\r\n","import React, { useEffect, useRef, useCallback } from \"react\";\r\nimport { dataType } from \"../zTool\";\r\nimport { Button } from \"antd\";\r\nimport linkageAction from \"./linkageAction\";\r\nimport { pareLinkages } from \"./common\";\r\n//返回获取最新formGroups的callback\r\nexport function useGetGroupsCallback(formGroups) {\r\n\tconst groupsRef = useRef();\r\n\tuseEffect(() => {\r\n\t\tgroupsRef.current = formGroups;\r\n\t}, [formGroups]);\r\n\r\n\treturn useCallback(() => {\r\n\t\treturn groupsRef.current;\r\n\t}, [groupsRef.current]);\r\n}\r\n//返回执行linkageAction的callback\r\nexport function useLinkageCallback(formGroups, formData, getGroupsFn) {\r\n\tconst doLinkage = useCallback(() => {\r\n\t\tif (formData) {\r\n\t\t\tlinkageAction(pareLinkages(formData.linkages), getGroupsFn);\r\n\t\t}\r\n\t}, [getGroupsFn, formData]);\r\n\tuseEffect(() => {\r\n\t\tdoLinkage();\r\n\t}, [formGroups]);\r\n\treturn doLinkage;\r\n}\r\n//返回获取formGroups中非隐藏的forms的callback\r\nexport function useGetOtherFormsCallback(formGroups) {\r\n\treturn useCallback(\r\n\t\tcurrentForm => {\r\n\t\t\tconst forms = Array.isArray(formGroups)\r\n\t\t\t\t? formGroups.filter(g => {\r\n\t\t\t\t\t\tif (!g.groupRef.current) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst o = g.groupRef.current.getForm();\r\n\t\t\t\t\t\treturn currentForm !== o.form && g.groupRef.current.getShowState();\r\n\t\t\t\t  })\r\n\t\t\t\t: [];\r\n\r\n\t\t\treturn forms.map(g => g.groupRef.current.getForm().form)\r\n\t\t},\r\n\t\t[formGroups],\r\n\t);\r\n}\r\n\r\nexport function getEachFormMethod(formGroups, isAll) {\r\n\tlet subForm = isAll ? [] : null;\r\n\tfor (let index = 0; index < formGroups.length; index++) {\r\n\t\tconst g = formGroups[index];\r\n\t\tif (g.groupRef.current.getShowState()) {\r\n\t\t\tif (isAll) {\r\n\t\t\t\tsubForm.push(g.groupRef.current.getForm());\r\n\t\t\t} else {\r\n\t\t\t\tsubForm = g.groupRef.current.getForm();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn subForm;\r\n}\r\n\r\n//返回执行formGroups中任意一个非隐藏的onSubmit的callback\r\nexport function useDoSubmitCallback(formGroups) {\r\n\treturn useCallback(\r\n\t\te => {\r\n\t\t\tconst subForm = getEachFormMethod(formGroups);\r\n\t\t\tif (subForm) {\r\n\t\t\t\tsubForm.methods.onSubmit(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[formGroups],\r\n\t);\r\n}\r\nconst buttonType = {\r\n\t1: \"primary\",\r\n\t2: \"default\",\r\n\t3: \"dashed\",\r\n\t4: \"danger\",\r\n};\r\n//返回渲染提交按钮的函数\r\nexport function useSubmitBtn(formData, formGroups) {\r\n\tconst doSubmit = useDoSubmitCallback(formGroups);\r\n\treturn useCallback(() => {\r\n\t\treturn formData && dataType.isArray(formData.buttonList) ? (\r\n\t\t\t<div className=\"z-padding-bottom-20 z-text-center\">\r\n\t\t\t\t{formData.buttonList.map(e => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Button key={e.value} type={buttonType[e.buttonType]} onClick={doSubmit}>\r\n\t\t\t\t\t\t\t{e.value}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t) : null;\r\n\t}, [formData, doSubmit]);\r\n}\r\n","import React from \"react\";\r\nconst defaultValue = {};\r\nconst context = React.createContext(defaultValue);\r\nconst { Provider, Consumer } = context;\r\nconst setConsumer = (ChildComponent) => {\r\n\treturn class ContextConsumer extends React.PureComponent {\r\n\t\trender() {\r\n\t\t\treturn <Consumer>{(value) => <ChildComponent {...this.props} {...value} />}</Consumer>;\r\n\t\t}\r\n\t};\r\n};\r\nexport default {\r\n\tname: \"FormContext\",\r\n\tdefaultValue,\r\n\tProvider,\r\n\tConsumer,\r\n\tsetConsumer,\r\n};\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport Zform from \"../Zform\";\r\nimport FormContext from \"./FormContext\";\r\n\r\n\r\nconst MyForm = FormContext.setConsumer(Zform);\r\nconst FormGroup = React.memo(\r\n\tReact.forwardRef(function(\r\n\t\t{ formItems, getOtherForms, labelLayout, onSubmit, group,titleLeftRender, titleRightRender, children, formValues,momentFormat,afterItemsRendered },\r\n\t\tref,\r\n\t) {\r\n\t\tconst domRef = useRef();\r\n\t\tconst formRef = useRef({});\r\n\t\tconst [show, setShow] = useState(true);\r\n\t\tconst getFormInstance = useCallback(\r\n\t\t\t(form, methods) => {\r\n\t\t\t\tformRef.current = { form, methods };\r\n\t\t\t},\r\n\t\t\t[formRef.current],\r\n\t\t);\r\n\t\tconst [stateFormItems, setFormItems] = useState([]);\r\n\t\tuseEffect(() => {\r\n\t\t\tsetFormItems(Array.isArray(formItems) ? formItems : []);\r\n\t\t}, [formItems]);\r\n\t\tuseImperativeHandle(ref, () => ({\r\n\t\t\tgetForm() {\r\n\t\t\t\treturn { ...formRef.current, group };\r\n\t\t\t},\r\n\t\t\tshow(show) {\r\n\t\t\t\tsetShow(show);\r\n\t\t\t},\r\n\t\t\tgetShowState() {\r\n\t\t\t\treturn show;\r\n\t\t\t},\r\n\t\t\tgetWrapperDom() {\r\n\t\t\t\treturn domRef.current;\r\n\t\t\t},\r\n\t\t\tgetFormItems() {\r\n\t\t\t\treturn stateFormItems;\r\n\t\t\t},\r\n\t\t\tsetFormItems,\r\n\t\t}));\r\n\r\n\t\tconst [groupName, setGroupName] = useState();\r\n\t\tuseEffect(() => {\r\n\t\t\tsetGroupName(group.name);\r\n\t\t}, [group.name]);\r\n\t\tconst nameChange = useCallback(\r\n\t\t\t(val) => {\r\n\t\t\t\tgroup.name = val;\r\n\t\t\t\tsetGroupName(val);\r\n\t\t\t},\r\n\t\t\t[group, setGroupName],\r\n\t\t);\r\n\t\t// console.log(\"--groups--\" + group.id, stateFormItems);\r\n\t\treturn show ? (\r\n\t\t\t<div className=\"z-view-form-panel\" ref={domRef}>\r\n\t\t\t\t<div className=\"z-panel-heading z-flex-space-between\">\r\n\t\t\t\t\t<div className=\"z-flex-items-v-center\">\r\n\t\t\t\t\t\t{typeof titleLeftRender === \"function\" ? titleLeftRender(group,groupName,nameChange):<span>{groupName}</span>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"z-flex-items-v-center\">\r\n\t\t\t\t\t\t{typeof titleRightRender === \"function\" && titleRightRender(group)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"z-panel-body z-padding-bottom-0-important\">\r\n\t\t\t\t\t<MyForm\r\n\t\t\t\t\t\tgroup={group}\r\n\t\t\t\t\t\tonSubmit={onSubmit}\r\n\t\t\t\t\t\tlabelLayout={labelLayout ? labelLayout : \"inline\"}\r\n\t\t\t\t\t\titems={stateFormItems}\r\n\t\t\t\t\t\tsubmitBtnName=\"\"\r\n\t\t\t\t\t\tgetFormInstance={getFormInstance}\r\n\t\t\t\t\t\totherForms={getOtherForms}\r\n\t\t\t\t\t\tformDefaultValues={formValues}\r\n\t\t\t\t\t\tmomentFormat={momentFormat}\r\n\t\t\t\t\t\tafterItemsRendered={afterItemsRendered}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t) : null;\r\n\t}),\r\n);\r\nexport default FormGroup;\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport { dataType } from \"../zTool\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./style.scss\";\r\nimport {\r\n\tuseGetGroupsCallback,\r\n\tuseLinkageCallback,\r\n\tuseGetOtherFormsCallback,\r\n\t// useSubmitBtn,\r\n\tgetEachFormMethod,\r\n\tuseDoSubmitCallback,\r\n} from \"./customHook\";\r\nimport FormGroup from \"./FormGroup\";\r\nimport { translateGroups } from \"./common\";\r\n//formData: {id:1,name:\"表\",labelLayout:\"\",code:\"dog_check_in_form\",sectionList: [{id:\"12\",name:\"名称\",seq:1,formFieldInfoList:[{config:\"{}\",fieldKey:\"name\",fieldType:1,id:333,initialValue:\"\",label:\"名称\",required:1,span:8,regularExpression:null,seq:1,placeholder:\"\",errorMsg:\"\"}]}]}\r\nconst FormViewer = React.forwardRef(function(\r\n\t{\r\n\t\tformData,\r\n\t\tformValues,\r\n\t\tonSubmit,\r\n\t\tgroupTitleLeftRender,\r\n\t\tgroupTitleRightRender,\r\n\t\tclassName,\r\n\t\tonFormGroupsChange,\r\n\t\tlinkage,\r\n\t\tgroupChildrenRender,\r\n\t\tsubmitBtnRender,\r\n\t\ttitle,\r\n\t\tstyle,\r\n\t\tmomentFormat,\r\n\t\tafterItemsRendered,\r\n\t},\r\n\tref,\r\n) {\r\n\tconst _linkage = dataType.isBoolean(linkage) ? linkage : true;\r\n\tconst [formGroups, setFormGroups] = useState([]);\r\n\tconst getOtherForms = useGetOtherFormsCallback(formGroups);\r\n\t// const submitBtnRender = useSubmitBtn(formData, formGroups);\r\n\tconst getGroupsFn = useGetGroupsCallback(formGroups);\r\n\tconst doSubmit = useDoSubmitCallback(formGroups);\r\n\tconst imperativeRef = useRef();\r\n\timperativeRef.current = () => {\r\n\t\treturn {\r\n\t\t\tgetFormGroups: () => {\r\n\t\t\t\treturn formGroups;\r\n\t\t\t},\r\n\t\t\tsetFormGroups,\r\n\t\t\tgetEachFormMethod: () => {\r\n\t\t\t\treturn getEachFormMethod(formGroups, true);\r\n\t\t\t},\r\n\t\t};\r\n\t};\r\n\t//formData改变时==>处理数据\r\n\tuseEffect(() => {\r\n\t\tsetFormGroups(translateGroups(formData, getGroupsFn, _linkage, imperativeRef));\r\n\t\tsetAllFormRendered([]);\r\n\t}, [formData]);\r\n\t//formGroups改变时==>调用onFormGroupsChange\r\n\tuseEffect(() => {\r\n\t\tdataType.isFunction(onFormGroupsChange) && onFormGroupsChange(formGroups);\r\n\t}, [formGroups]);\r\n\tconst doLinkage = _linkage ? useLinkageCallback(formGroups, formData, getGroupsFn) : null;\r\n\tuseImperativeHandle(ref, imperativeRef.current);\r\n\tconst titleText =\r\n\t\tdataType.isBoolean(title) && !title ? \"\" : title ? title : formData && formData.name ? formData.name : \"\";\r\n\tconst [allFormRendered, setAllFormRendered] = useState([]);\r\n\tuseEffect(() => {\r\n\t\tif (allFormRendered.length && allFormRendered.length === formGroups.length) {\r\n\t\t\tdoLinkage && doLinkage();\r\n\t\t\tafterItemsRendered && afterItemsRendered();\r\n\t\t}\r\n\t}, [allFormRendered]);\r\n\r\n\treturn (\r\n\t\t<div className={`z-panel z-padding-bottom-20 ${className ? className : \"\"}`} style={style}>\r\n\t\t\t{titleText ? (\r\n\t\t\t\t<div className=\"z-panel-body z-padding-bottom-0-important z-text-center\">\r\n\t\t\t\t\t<h2>{titleText}</h2>\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t\t{formGroups.map((group, i) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<FormGroup\r\n\t\t\t\t\t\ttitleLeftRender={\r\n\t\t\t\t\t\t\tgroupTitleLeftRender\r\n\t\t\t\t\t\t\t\t? (group, groupName, nameChange) => {\r\n\t\t\t\t\t\t\t\t\t\treturn groupTitleLeftRender(group, groupName, nameChange, formGroups);\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttitleRightRender={groupTitleRightRender}\r\n\t\t\t\t\t\tgroup={group}\r\n\t\t\t\t\t\tonSubmit={onSubmit}\r\n\t\t\t\t\t\tdoLinkage={doLinkage}\r\n\t\t\t\t\t\tkey={group.id}\r\n\t\t\t\t\t\tlabelLayout={group.labelLayout}\r\n\t\t\t\t\t\tref={group.groupRef}\r\n\t\t\t\t\t\tformItems={group.formItems}\r\n\t\t\t\t\t\tgetOtherForms={getOtherForms}\r\n\t\t\t\t\t\tformValues={formValues}\r\n\t\t\t\t\t\tmomentFormat={momentFormat}\r\n\t\t\t\t\t\tafterItemsRendered={() => {\r\n\t\t\t\t\t\t\tsetAllFormRendered(allFormRendered.concat([\"success\"]));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{typeof groupChildrenRender == \"function\" && groupChildrenRender(group)}\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t\t{typeof submitBtnRender == \"function\" ? submitBtnRender(doSubmit) : null}\r\n\t\t</div>\r\n\t);\r\n});\r\nFormViewer.propTypes = {\r\n\tformData: PropTypes.object,\r\n\tformValues: PropTypes.object,\r\n\tonSubmit: PropTypes.func,\r\n\tgroupTitleRightRender: PropTypes.func,\r\n\tclassName: PropTypes.string,\r\n\tonFormGroupsChange: PropTypes.func,\r\n\tlinkage: PropTypes.bool,\r\n\tgroupChildrenRender: PropTypes.func,\r\n\tsubmitBtnRender: PropTypes.func,\r\n\tafterItemsRendered: PropTypes.func,\r\n\tmomentFormat: PropTypes.bool,\r\n};\r\nexport default React.memo(FormViewer);\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { getControl } from \"../Zform/controls\";\r\nimport { Input, Col } from \"antd\";\r\nimport cssClass from \"./style.scss\";\r\nconst propTypes = {\r\n\tsize: PropTypes.string,\r\n\tselectList: PropTypes.arrayOf(PropTypes.object),\r\n\tvalue: PropTypes.object,\r\n\tvalueKey: PropTypes.object,\r\n\tdisabled: PropTypes.bool,\r\n\tleftPlaceholder: PropTypes.string,\r\n\tcenterPlaceholder: PropTypes.string,\r\n\trightPlaceholder: PropTypes.string,\r\n\tcontrolCostrom: PropTypes.object,\r\n};\r\nconst defaultProps = {\r\n\tvalueKey: { left: \"label\", center: \"value\", right: \"paramName\" },\r\n\tsize: \"default\",\r\n\tselectList: [],\r\n\tleftSpan: 6,\r\n\tcenterSpan: 12,\r\n\trightSpan: 6,\r\n\tdisabled: false,\r\n\tcontrolCostrom: { left: null, center: null, right: null },\r\n};\r\n\r\nconst MyComponent = React.forwardRef(function ZselectInput(props, ref) {\r\n\tconst {\r\n\t\tsize,\r\n\t\tselectList,\r\n\t\tleftSpan,\r\n\t\tcenterSpan,\r\n\t\trightSpan,\r\n\t\tonChange,\r\n\t\tvalue,\r\n\t\tvalueKey,\r\n\t\tdisabled,\r\n\t\tclassName,\r\n\t\tleftPlaceholder,\r\n\t\tcenterPlaceholder,\r\n\t\trightPlaceholder,\r\n\t\tcontrolCostrom,\r\n\t} = props;\r\n\t// console.log(\"----value\",value)\r\n\tconst leftChange = val => {\r\n\t\ttypeof onChange === \"function\" &&\r\n\t\t\tonChange(\r\n\t\t\t\tvalue\r\n\t\t\t\t\t? { ...value, [valueKey.left]: val }\r\n\t\t\t\t\t: { [valueKey.left]: val, [valueKey.center]: \"\", [valueKey.right]: \"\" },\r\n\t\t\t);\r\n\t};\r\n\tconst centerChange = val => {\r\n\t\ttypeof onChange === \"function\" &&\r\n\t\t\tonChange(\r\n\t\t\t\tvalue\r\n\t\t\t\t\t? { ...value, [valueKey.center]: val }\r\n\t\t\t\t\t: { [valueKey.left]: \"\", [valueKey.center]: val, [valueKey.right]: \"\" },\r\n\t\t\t);\r\n\t};\r\n\tconst rightChange = val => {\r\n\t\ttypeof onChange === \"function\" &&\r\n\t\t\tonChange(\r\n\t\t\t\tvalue\r\n\t\t\t\t\t? { ...value, [valueKey.right]: val }\r\n\t\t\t\t\t: { [valueKey.left]: \"\", [valueKey.center]: \"\", [valueKey.right]: val },\r\n\t\t\t);\r\n\t};\r\n\tconst _left = value && value[valueKey.left] !== undefined ? value[valueKey.left] : \"\";\r\n\tconst _center = value && value[valueKey.center] !== undefined ? value[valueKey.center] : \"\";\r\n\tconst _right = value && value[valueKey.right] !== undefined ? value[valueKey.right] : \"\";\r\n\treturn (\r\n\t\t<Input.Group compact size={size} className={`${cssClass[\"z-select-input\"]} ${className ? className : \"\"}`}>\r\n\t\t\t{leftSpan ? (\r\n\t\t\t\t<Col span={leftSpan}>\r\n\t\t\t\t\t{typeof controlCostrom.left === \"function\"\r\n\t\t\t\t\t\t? controlCostrom.left(_left, leftChange)\r\n\t\t\t\t\t\t: getControl(\"Select\", {\r\n\t\t\t\t\t\t\t\tvalue: _left,\r\n\t\t\t\t\t\t\t\tselectList,\r\n\t\t\t\t\t\t\t\tonChange: leftChange,\r\n\t\t\t\t\t\t\t\tdisabled,\r\n\t\t\t\t\t\t\t\tclassName: \"z-label\",\r\n\t\t\t\t\t\t\t\tplaceholder: leftPlaceholder,\r\n\t\t\t\t\t\t  })}\r\n\t\t\t\t</Col>\r\n\t\t\t) : null}\r\n\t\t\t{centerSpan ? (\r\n\t\t\t\t<Col span={centerSpan}>\r\n\t\t\t\t\t{typeof controlCostrom.center === \"function\"\r\n\t\t\t\t\t\t? controlCostrom.center(_center, centerChange)\r\n\t\t\t\t\t\t: getControl(\"Input\", {\r\n\t\t\t\t\t\t\t\tvalue: _center,\r\n\t\t\t\t\t\t\t\tonChange: e => {\r\n\t\t\t\t\t\t\t\t\tcenterChange(e.target.value);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tdisabled,\r\n\t\t\t\t\t\t\t\tclassName: \"z-value\",\r\n\t\t\t\t\t\t\t\tplaceholder: centerPlaceholder,\r\n\t\t\t\t\t\t  })}\r\n\t\t\t\t</Col>\r\n\t\t\t) : null}\r\n\t\t\t{rightSpan ? (\r\n\t\t\t\t<Col span={rightSpan}>\r\n\t\t\t\t\t{typeof controlCostrom.right === \"function\"\r\n\t\t\t\t\t\t? controlCostrom.right(_right, rightChange)\r\n\t\t\t\t\t\t: getControl(\"Input\", {\r\n\t\t\t\t\t\t\t\tvalue: _right,\r\n\t\t\t\t\t\t\t\tonChange: e => {\r\n\t\t\t\t\t\t\t\t\trightChange(e.target.value);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tdisabled,\r\n\t\t\t\t\t\t\t\tclassName: \"z-name\",\r\n\t\t\t\t\t\t\t\tplaceholder: rightPlaceholder,\r\n\t\t\t\t\t\t  })}\r\n\t\t\t\t</Col>\r\n\t\t\t) : null}\r\n\t\t</Input.Group>\r\n\t);\r\n});\r\nMyComponent.propTypes = propTypes;\r\nMyComponent.defaultProps = defaultProps;\r\nexport default React.memo(MyComponent);\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { getControl, regExps } from \"../Zform/controls\";\r\nimport { Input } from \"antd\";\r\nconst InputGroup = Input.Group;\r\nconst regExpsList = [{ label: \"自定义\", value: \"custom\", pattern: \"\" }].concat(\r\n\tObject.keys(regExps).map(key => {\r\n\t\treturn {\r\n\t\t\t...regExps[key],\r\n\t\t\tpattern: regExps[key].pattern.toString().replace(/(^\\/|\\/$)/g, \"\"),\r\n\t\t\tvalue: key,\r\n\t\t\tlabel: regExps[key].name,\r\n\t\t};\r\n\t}),\r\n);\r\n\r\nexport default React.memo(\r\n\tReact.forwardRef(function ZauxiliaryInput(props, ref) {\r\n\t\tconst { value, onChange } = props;\r\n\t\tconst [inputValue, setInputValue] = useState(\"\");\r\n\t\tconst [selectValue, setSelectValue] = useState(\"custom\");\r\n\t\tfunction setVals(pattern) {\r\n\t\t\tconst selected = regExpsList.find(item => {\r\n\t\t\t\treturn item.pattern === pattern;\r\n\t\t\t});\r\n\t\t\tsetSelectValue(selected ? selected.value : \"custom\");\r\n\t\t\tsetInputValue(pattern);\r\n\t\t}\r\n\t\tuseEffect(() => {\r\n\t\t\tsetVals(value);\r\n\t\t}, [value]);\r\n\t\treturn (\r\n\t\t\t<InputGroup compact>\r\n\t\t\t\t{getControl(\"Input\", {\r\n\t\t\t\t\tvalue: inputValue,\r\n\t\t\t\t\tonChange(e) {\r\n\t\t\t\t\t\tsetVals(e.target.value);\r\n\t\t\t\t\t\tonChange(e.target.value);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\twidth: \"75%\",\r\n\t\t\t\t\t},\r\n\t\t\t\t})}\r\n\t\t\t\t{getControl(\"Select\", {\r\n\t\t\t\t\tvalue: selectValue,\r\n\t\t\t\t\tonChange(val) {\r\n\t\t\t\t\t\tconst selected = regExpsList.find(item => {\r\n\t\t\t\t\t\t\treturn item.value === val;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (selected) {\r\n\t\t\t\t\t\t\tsetInputValue(selected.pattern);\r\n\t\t\t\t\t\t\tonChange(selected.pattern);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsetSelectValue(val);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tselectList: regExpsList,\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\twidth: \"25%\",\r\n\t\t\t\t\t},\r\n\t\t\t\t})}\r\n\t\t\t</InputGroup>\r\n\t\t);\r\n\t}),\r\n);\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport ZeditSimpleFormHOC from \"../ZeditSimpleFormHOC\";\r\nimport { getControl, getOptions } from \"../Zform/controls\";\r\nimport { itemsFromTree } from \"../zTool\";\r\nimport { dateFormats } from \"./controls\";\r\nimport ZselectInput from \"./ZselectInput\";\r\nimport ZauxiliaryInput from \"./ZauxiliaryInput\";\r\nimport { getFormItem, removeSomeLinkage } from \"./common\";\r\nimport { dataType } from \"zerod/components/zTool\";\r\nimport { Input } from \"antd\";\r\n\r\nconst PercentInput = React.memo(\r\n\tReact.forwardRef(function(props, ref) {\r\n\t\tconst { value, onChange } = props;\r\n\t\tconst [num, setNum] = useState(typeof value === \"number\" ? value : 0);\r\n\t\tuseEffect(() => {\r\n\t\t\tsetNum(value * 100);\r\n\t\t}, [value]);\r\n\t\treturn getControl(\"Input.Group\", {\r\n\t\t\tcompact: true,\r\n\t\t\tchildren: (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{getControl(\"InputNumber\", {\r\n\t\t\t\t\t\tmin: 0,\r\n\t\t\t\t\t\tmax: 100,\r\n\t\t\t\t\t\tprecision: 4,\r\n\t\t\t\t\t\tstyle: { width: \"80%\" },\r\n\t\t\t\t\t\tvalue: num,\r\n\t\t\t\t\t\tonChange: num => {\r\n\t\t\t\t\t\t\tonChange && onChange(num / 100);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{getControl(\"Input\", {\r\n\t\t\t\t\t\tdefaultValue: \"%\",\r\n\t\t\t\t\t\tdisabled: true,\r\n\t\t\t\t\t\tstyle: { width: \"20%\" },\r\n\t\t\t\t\t})}\r\n\t\t\t\t</>\r\n\t\t\t),\r\n\t\t});\r\n\t}),\r\n);\r\n\r\nconst commonKeys = [\r\n\t\"groupName\",\r\n\t\"fieldType\",\r\n\t\"label\",\r\n\t\"fieldKey\",\r\n\t\"required\",\r\n\t\"initialValue\",\r\n\t\"regularExpression\",\r\n\t\"errorMsg\",\r\n\t\"remark\",\r\n\t\"disabled\",\r\n];\r\nconst textKeys = [\"maxLength\", \"minLength\"];\r\nconst inputKeys = [...textKeys, \"type\"];\r\nconst textarayKeys = textKeys;\r\nconst selectionsType1keys = [\"selectList\"];\r\nconst selectionsType2keys = [\"selectionsUrl\", \"selectionsQuery\"];\r\nconst selectKeys = [\"selectionsType\", \"selectListFieldNames\", ...selectionsType1keys, ...selectionsType2keys];\r\nconst cascaderKeys = [...selectKeys, \"changeOnSelect\"];\r\nconst dateKeys = [\"format\"];\r\nconst uploadKeys = [\"url\"];\r\nconst colorKeys = [\"colorValueType\", \"minSaturability\"];\r\n//控件类型列表\r\nexport const controlList = [\r\n\t{\r\n\t\tlabel: \"单行输入\", //控件类型名称\r\n\t\tvalue: 1, //类型值\r\n\t\tshowKeys: [...commonKeys, ...inputKeys], //要显示的属性\r\n\t\tconfigKeys: inputKeys, //哪些要转成config的属性\r\n\t},\r\n\t{\r\n\t\tlabel: \"多行输入\",\r\n\t\tvalue: 2,\r\n\t\tshowKeys: [...commonKeys, ...textarayKeys],\r\n\t\tconfigKeys: textarayKeys,\r\n\t},\r\n\t{\r\n\t\tlabel: \"下拉选择\",\r\n\t\tvalue: 3,\r\n\t\tshowKeys: [...commonKeys, ...selectKeys, \"mode\"],\r\n\t\tconfigKeys: [...selectKeys, \"mode\"],\r\n\t},\r\n\t{\r\n\t\tlabel: \"数字输入\",\r\n\t\tvalue: 4,\r\n\t\tshowKeys: [...commonKeys],\r\n\t},\r\n\t{\r\n\t\tlabel: \"日期/时间选择\",\r\n\t\tvalue: 5,\r\n\t\tshowKeys: [...commonKeys, ...dateKeys],\r\n\t\tconfigKeys: dateKeys,\r\n\t},\r\n\t{\r\n\t\tlabel: \"级联\",\r\n\t\tvalue: 6,\r\n\t\tshowKeys: [...commonKeys, ...cascaderKeys],\r\n\t\tconfigKeys: cascaderKeys,\r\n\t},\r\n\t{\r\n\t\tlabel: \"树选择\",\r\n\t\tvalue: 7,\r\n\t\tshowKeys: [...commonKeys, ...selectKeys],\r\n\t\tconfigKeys: selectKeys,\r\n\t},\r\n\t{\r\n\t\tlabel: \"多选框\",\r\n\t\tvalue: 8,\r\n\t\tshowKeys: [...commonKeys, ...selectKeys],\r\n\t\tconfigKeys: selectKeys,\r\n\t},\r\n\t{\r\n\t\tlabel: \"单选框\",\r\n\t\tvalue: 9,\r\n\t\tshowKeys: [...commonKeys, ...selectKeys],\r\n\t\tconfigKeys: selectKeys,\r\n\t},\r\n\t// {\r\n\t// \tlabel: \"时间选择\",\r\n\t// \tvalue: 10,\r\n\t// \tshowKeys: [...commonKeys],\r\n\t// },\r\n\t{\r\n\t\tlabel: \"文件上传\",\r\n\t\tvalue: 11,\r\n\t\tshowKeys: [...commonKeys, ...uploadKeys],\r\n\t\tconfigKeys: uploadKeys,\r\n\t},\r\n\t{\r\n\t\tlabel: \"颜色值\",\r\n\t\tvalue: 12,\r\n\t\tshowKeys: [...commonKeys, ...colorKeys],\r\n\t\tconfigKeys: colorKeys,\r\n\t},\r\n\t{\r\n\t\tlabel: \"地图选点\",\r\n\t\tvalue: 13,\r\n\t\tshowKeys: [...commonKeys, \"mapType\", \"secretKey\"],\r\n\t\tconfigKeys: [\"mapType\", \"secretKey\"],\r\n\t},\r\n];\r\n//地图的默认密钥(默认是邹国涛个人注册)\r\nconst initSereKey = {\r\n\tamap: \"3d5c1c6169c64554d6f9fcca35d4abff\",\r\n\tqqmap: \"63QBZ-B5GKV-46RPH-UCUF2-K5TUJ-OKBAK\",\r\n};\r\n//控制显示哪个类型的控件的属性\r\nfunction showFieldTypeLinkOther(changeFormItems, formItems, val, excludeKeys = []) {\r\n\tconst control = controlList.find(cont => {\r\n\t\treturn cont.value === val;\r\n\t});\r\n\tconst showKeys = control.showKeys.filter(key => {\r\n\t\treturn !excludeKeys.includes(key);\r\n\t});\r\n\tchangeFormItems(\r\n\t\tformItems.map(item => {\r\n\t\t\treturn { key: item.key, show: showKeys.includes(item.key) };\r\n\t\t}),\r\n\t\ttrue,\r\n\t);\r\n}\r\nfunction showSelectionsTypeLinkOther(changeFormItems, selectionsType) {\r\n\tchangeFormItems(\r\n\t\t[\r\n\t\t\t{\r\n\t\t\t\tkey: \"selectList\",\r\n\t\t\t\tshow: selectionsType === 1,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: \"selectionsUrl\",\r\n\t\t\t\tshow: selectionsType === 2,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: \"selectionsQuery\",\r\n\t\t\t\tshow: selectionsType === 2,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttrue,\r\n\t);\r\n}\r\nconst urlRules = function(keys = {}) {\r\n\treturn [\r\n\t\t{\r\n\t\t\tvalidator: (rule, value, callback) => {\r\n\t\t\t\tif (!value) {\r\n\t\t\t\t\treturn callback(new Error(\"不能为空\"));\r\n\t\t\t\t}\r\n\t\t\t\tconst valkeys = Object.keys(keys);\r\n\t\t\t\tlet hasError = valkeys.some(\r\n\t\t\t\t\tkey => value[keys[key]] === undefined || !value[keys[key]].toString().trim(),\r\n\t\t\t\t);\r\n\t\t\t\tif (hasError) {\r\n\t\t\t\t\treturn callback(new Error(\"有未填写的值\"));\r\n\t\t\t\t}\r\n\t\t\t\tcallback();\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n};\r\n//控件属性\r\nfunction useFormItems(groupId, formViewerRef, type) {\r\n\tconst itemsRef = useRef([]);\r\n\titemsRef.current = [\r\n\t\t{\r\n\t\t\tkey: \"groupName\",\r\n\t\t\tlabel: \"组名\",\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Input\", { disabled: true });\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"fieldType\",\r\n\t\t\tlabel: \"控件类型\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Select\", {\r\n\t\t\t\t\tselectList: controlList.map(item => ({ label: item.label, value: item.value })),\r\n\t\t\t\t\tonChange(val) {\r\n\t\t\t\t\t\t//控件类型改变控制显示对应的属性输入框\r\n\t\t\t\t\t\tshowFieldTypeLinkOther(changeFormItems, itemsRef.current, val);\r\n\t\t\t\t\t\tif ([3, 6, 7, 8, 9].includes(val)) {\r\n\t\t\t\t\t\t\tshowSelectionsTypeLinkOther(changeFormItems, form.getFieldValue(\"selectionsType\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// changeFormItems([{ key: \"initialValue\", show: ![5].includes(val) }], true);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({ required: true }),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"label\",\r\n\t\t\tlabel: \"控件Label\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Input\");\r\n\t\t\t},\r\n\t\t\toptions: getOptions({ required: true }),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"fieldKey\",\r\n\t\t\tlabel: \"字段Key\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Input\");\r\n\t\t\t},\r\n\t\t\toptions: getOptions({\r\n\t\t\t\trequired: true,\r\n\t\t\t\trules: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalidator: (rule, value, callback) => {\r\n\t\t\t\t\t\t\tif (/Label$/.test(value)) {\r\n\t\t\t\t\t\t\t\treturn callback(new Error(\"禁止以Label结尾的key\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst groups = formViewerRef.current.getFormGroups();\r\n\t\t\t\t\t\t\tlet hasKey = groups.some(g => {\r\n\t\t\t\t\t\t\t\treturn g.formItems.some(item => {\r\n\t\t\t\t\t\t\t\t\treturn item.key === value;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (hasKey && type === \"add\") {\r\n\t\t\t\t\t\t\t\treturn callback(new Error(\"key已存在，请填写其他的key\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t}),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"required\",\r\n\t\t\tlabel: \"是否必填\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Radio.Group\", {\r\n\t\t\t\t\tselectList: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"是\",\r\n\t\t\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ label: \"否\", value: 0 },\r\n\t\t\t\t\t],\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({ required: true, initialValue: 1 }),\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tkey: \"disabled\",\r\n\t\t\tlabel: \"是否默认禁用\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Radio.Group\", {\r\n\t\t\t\t\tselectList: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"是\",\r\n\t\t\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ label: \"否\", value: 0 },\r\n\t\t\t\t\t],\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({ required: true, initialValue: 0 }),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"mode\",\r\n\t\t\tlabel: \"模式\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Radio.Group\", {\r\n\t\t\t\t\tselectList: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"单选\",\r\n\t\t\t\t\t\t\tvalue: \"single\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ label: \"多选\", value: \"multiple\" },\r\n\t\t\t\t\t\t{ label: \"标签\", value: \"tags\" },\r\n\t\t\t\t\t],\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({ required: true, initialValue: \"single\" }),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"mapType\",\r\n\t\t\tlabel: \"地图类型\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Radio.Group\", {\r\n\t\t\t\t\tselectList: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"腾讯\",\r\n\t\t\t\t\t\t\tvalue: \"qqmap\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ label: \"高德\", value: \"amap\" },\r\n\t\t\t\t\t],\r\n\t\t\t\t\tonChange(e) {\r\n\t\t\t\t\t\tconst val = e.target.value;\r\n\t\t\t\t\t\tform.setFieldsValue({\r\n\t\t\t\t\t\t\tsecretKey: initSereKey[val],\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({ required: true, initialValue: \"qqmap\" }),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"secretKey\",\r\n\t\t\tlabel: \"密钥\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Input\");\r\n\t\t\t},\r\n\t\t\toptions: getOptions({ required: true, initialValue: initSereKey[\"qqmap\"] }),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"type\",\r\n\t\t\tlabel: \"文本类型\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Radio.Group\", {\r\n\t\t\t\t\tselectList: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"文本框\",\r\n\t\t\t\t\t\t\tvalue: \"text\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"密码框\",\r\n\t\t\t\t\t\t\tvalue: \"password\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({ required: true, initialValue: \"text\" }),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"maxLength\",\r\n\t\t\tlabel: \"最大输入长度\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"InputNumber\");\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"minLength\",\r\n\t\t\tlabel: \"最小输入长度\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"InputNumber\");\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"selectionsType\",\r\n\t\t\tlabel: \"选项类型\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\tshow: false,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Radio.Group\", {\r\n\t\t\t\t\tselectList: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"自定义\",\r\n\t\t\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ label: \"异步\", value: 2 },\r\n\t\t\t\t\t],\r\n\t\t\t\t\tonChange(e) {\r\n\t\t\t\t\t\tshowSelectionsTypeLinkOther(changeFormItems, e.target.value);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({ required: true, initialValue: 1 }),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"selectionsUrl\",\r\n\t\t\tlabel: \"请求选项数据地址\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<ZselectInput\r\n\t\t\t\t\t\tcontrolCostrom={\r\n\t\t\t\t\t\t\t[6, 7].includes(form.getFieldValue(\"fieldType\"))\r\n\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\tright(value, valueChange) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn getControl(\"Select\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: value,\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectList: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: \"全部加载\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: \"all\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: \"分部加载\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: \"part\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange: valueChange,\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: { width: \"100%\" },\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tleftSpan={6}\r\n\t\t\t\t\t\tcenterSpan={[3, 8, 9].includes(form.getFieldValue(\"fieldType\")) ? 18 : 12}\r\n\t\t\t\t\t\trightSpan={[3, 8, 9].includes(form.getFieldValue(\"fieldType\")) ? 0 : 6}\r\n\t\t\t\t\t\tselectList={[\"post\", \"get\"].map(m => ({ label: m, value: m }))}\r\n\t\t\t\t\t\tvalueKey={{ left: \"selectionsUrlMethod\", center: \"selectionsUrl\", right: \"requireType\" }}\r\n\t\t\t\t\t\tleftPlaceholde=\"请求方式\"\r\n\t\t\t\t\t\tcenterPlaceholder=\"请求地址\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\toptions: getOptions({\r\n\t\t\t\trequired: true,\r\n\t\t\t\tinitialValue: { selectionsUrlMethod: \"post\", selectionsUrl: \"\", requireType: \"all\" },\r\n\t\t\t\trules: urlRules({ left: \"selectionsUrlMethod\", center: \"selectionsUrl\", right: \"requireType\" }),\r\n\t\t\t}),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"selectionsQuery\",\r\n\t\t\tlabel: \"请求参数配置\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"TreeInput\", { multiple: false, labelPlaceholder: \"Key\" });\r\n\t\t\t},\r\n\t\t\toptions: getOptions({\r\n\t\t\t\trequired: false,\r\n\t\t\t\tinitialValue: [],\r\n\t\t\t}),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"selectList\",\r\n\t\t\tlabel: \"选项数据\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"TreeInput\", {\r\n\t\t\t\t\tmultiple: [6, 7].includes(form.getFieldValue(\"fieldType\")),\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({\r\n\t\t\t\trequired: true,\r\n\t\t\t\tinitialValue: [],\r\n\t\t\t\trules: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalidator: (rule, value, callback) => {\r\n\t\t\t\t\t\t\tconst finished = itemsFromTree({\r\n\t\t\t\t\t\t\t\ttree: value,\r\n\t\t\t\t\t\t\t\tcondition(val1, val2) {\r\n\t\t\t\t\t\t\t\t\treturn val1.toString().trim() === val2.toString().trim();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsourceItem: { value: \"\" },\r\n\t\t\t\t\t\t\t\tkeyObj: { id: \"value\", children: \"children\" },\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (finished) {\r\n\t\t\t\t\t\t\t\treturn callback(new Error(\"选项中有未填写的值\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t}),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"selectListFieldNames\",\r\n\t\t\tlabel: \"lable、value、children对应选项数据中的字段\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"TreeInput\", {\r\n\t\t\t\t\tmultiple: false,\r\n\t\t\t\t\tshowBtns: false,\r\n\t\t\t\t\tinputType: \"coustom\",\r\n\t\t\t\t\tcustomInputKeys: [{ key: \"label\", initValue: \"\" }, { key: \"value\", initValue: \"\" }],\r\n\t\t\t\t\tchildren: (states, setStates, customInputKeys) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Input.Group compact style={{ width: \"100%\" }}>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: \"50%\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={states[customInputKeys[0].key]}\r\n\t\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\t\tsetStates({\r\n\t\t\t\t\t\t\t\t\t\t\t[customInputKeys[0].key]: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: \"50%\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={states[customInputKeys[1].key]}\r\n\t\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\t\tsetStates({\r\n\t\t\t\t\t\t\t\t\t\t\t[customInputKeys[1].key]: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Input.Group>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({\r\n\t\t\t\trequired: true,\r\n\t\t\t\tinitialValue: [\r\n\t\t\t\t\t{ label: \"label\", value: \"label\" },\r\n\t\t\t\t\t{ label: \"value\", value: \"value\" },\r\n\t\t\t\t\t{ label: \"children\", value: \"children\" },\r\n\t\t\t\t],\r\n\t\t\t}),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"changeOnSelect\",\r\n\t\t\tlabel: \"是否必须选到最后一级\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Radio.Group\", {\r\n\t\t\t\t\tselectList: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"是\",\r\n\t\t\t\t\t\t\tvalue: 0,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ label: \"否\", value: 1 },\r\n\t\t\t\t\t],\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({ required: true, initialValue: 0 }),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"format\",\r\n\t\t\tlabel: \"格式\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Select\", {\r\n\t\t\t\t\tselectList: Object.keys(dateFormats).map(key => ({ label: key, value: key })),\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({ required: true, initialValue: \"YYYY-MM-DD\" }),\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tkey: \"url\",\r\n\t\t\tlabel: \"上传地址\",\r\n\t\t\tshow: false,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<ZselectInput\r\n\t\t\t\t\t\tselectList={[\"post\", \"get\"].map(m => ({ label: m, value: m }))}\r\n\t\t\t\t\t\tvalueKey={{ left: \"urlMethod\", center: \"url\", right: \"urlParamName\" }}\r\n\t\t\t\t\t\tleftPlaceholde=\"请求方式\"\r\n\t\t\t\t\t\tcenterPlaceholder=\"请求地址\"\r\n\t\t\t\t\t\trightPlaceholder=\"参数名\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\toptions: getOptions({\r\n\t\t\t\trequired: true,\r\n\t\t\t\tinitialValue: {\r\n\t\t\t\t\turlMethod: \"post\",\r\n\t\t\t\t\turl: \"/file-upload-service/webapi/v1.0/fileUpload/uploads\",\r\n\t\t\t\t\turlParamName: \"files\",\r\n\t\t\t\t},\r\n\t\t\t\trules: urlRules({ left: \"urlMethod\", center: \"url\", right: \"urlParamName\" }),\r\n\t\t\t}),\r\n\t\t},\r\n\t\t// {\r\n\t\t// \tkey: \"detailUrl\",\r\n\t\t// \tlabel: \"获取已上传列表的地址\",\r\n\t\t// \tshow: false,\r\n\t\t// \tlabelFocused: true,\r\n\t\t// \trender(form, changeFormItems) {\r\n\t\t// \t\treturn (\r\n\t\t// \t\t\t<ZselectInput\r\n\t\t// \t\t\t\tselectList={[\"post\", \"get\"].map(m => ({ label: m, value: m }))}\r\n\t\t// \t\t\t\tvalueKey={{ left: \"detailUrlMethod\", center: \"detailUrl\", right: \"detailUrlParamName\" }}\r\n\t\t// \t\t\t\tleftPlaceholde=\"请求方式\"\r\n\t\t// \t\t\t\tcenterPlaceholder=\"请求地址\"\r\n\t\t// \t\t\t\trightPlaceholder=\"参数名\"\r\n\t\t// \t\t\t/>\r\n\t\t// \t\t);\r\n\t\t// \t},\r\n\t\t// \toptions: getOptions({\r\n\t\t// \t\trequired: true,\r\n\t\t// \t\tinitialValue: { detailUrlMethod: \"post\", detailUrl: \"\", detailUrlParamName: \"fileIds\" },\r\n\t\t// \t\trules: urlRules({ left: \"detailUrlMethod\", center: \"detailUrl\", right: \"detailUrlParamName\" }),\r\n\t\t// \t}),\r\n\t\t// },\r\n\t\t{\r\n\t\t\tkey: \"colorValueType\",\r\n\t\t\tlabel: \"颜色值类型\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\tshow: false,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Select\", {\r\n\t\t\t\t\tselectList: [{ label: \"hex\", value: \"hex\" }, { label: \"rgb\", value: \"rgb\" }],\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\toptions: getOptions({\r\n\t\t\t\trequired: true,\r\n\t\t\t\tinitialValue: \"rgb\",\r\n\t\t\t}),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"minSaturability\",\r\n\t\t\tlabel: \"最小饱和度(0%~100%,越小越趋近白色)\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\tshow: false,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn <PercentInput />;\r\n\t\t\t},\r\n\t\t\toptions: getOptions({\r\n\t\t\t\trequired: false,\r\n\t\t\t\tinitialValue: 0,\r\n\t\t\t}),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"initialValue\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\tlabel: \"控件初始值\",\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn [12].includes(form.getFieldValue(\"fieldType\"))\r\n\t\t\t\t\t? getControl(\"ColorPicker\", { valueType: form.getFieldValue(\"colorValueType\") })\r\n\t\t\t\t\t: getControl(\"Input\");\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"regularExpression\",\r\n\t\t\tlabel: \"正则表达式\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn <ZauxiliaryInput />;\r\n\t\t\t},\r\n\t\t\toptions: {\r\n\t\t\t\trules: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalidator(rule, value, callback) {\r\n\t\t\t\t\t\t\tlet hasError = false;\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tnew RegExp(value);\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\thasError = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (hasError) {\r\n\t\t\t\t\t\t\t\treturn callback(\"无效正则表达式\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"errorMsg\",\r\n\t\t\tlabel: \"错误提示\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"Input\");\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"remark\",\r\n\t\t\tlabel: \"备注\",\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender(form, changeFormItems) {\r\n\t\t\t\treturn getControl(\"TextArea\", {\r\n\t\t\t\t\tautosize: { minRows: 3 },\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\treturn itemsRef.current;\r\n}\r\nfunction useEditPage(groupId, formItem, formViewerRef, linkageRef, type) {\r\n\tconst groupRef = useRef();\r\n\tconst items = useFormItems(groupId, formViewerRef, type);\r\n\treturn useRef(\r\n\t\tZeditSimpleFormHOC({\r\n\t\t\tpageHeader: {\r\n\t\t\t\tshow: false,\r\n\t\t\t},\r\n\t\t\tpageFooter: {\r\n\t\t\t\tshow: false,\r\n\t\t\t},\r\n\t\t\tform: {\r\n\t\t\t\tpanelHeader: \"控件属性\",\r\n\t\t\t\tlabelLayout: \"inline\",\r\n\t\t\t\ttype: \"update\",\r\n\t\t\t\tdefaultSpan: 24,\r\n\t\t\t\tsubmitBtnName: \"确定\",\r\n\t\t\t\tsubmitMsg: null,\r\n\t\t\t\titems,\r\n\t\t\t\tdetailApiInterface(detailId, props, tool) {\r\n\t\t\t\t\tconst group = { id: groupId };\r\n\t\t\t\t\tconst groups = formViewerRef.current.getFormGroups();\r\n\t\t\t\t\tconst i = groups.findIndex(g => g.id == groupId);\r\n\t\t\t\t\tgroup.name = groups[i].name;\r\n\t\t\t\t\tgroupRef.current = groups[i];\r\n\t\t\t\t\t//新增/修改都需groupName\r\n\t\t\t\t\tlet data = { groupName: group.name };\r\n\t\t\t\t\t//修改控件情况\r\n\t\t\t\t\tif (formItem) {\r\n\t\t\t\t\t\tlet excludeKeys = [];\r\n\t\t\t\t\t\tconst currentItem = controlList.find(item => {\r\n\t\t\t\t\t\t\treturn item.value === formItem[\"fieldType\"];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (currentItem) {\r\n\t\t\t\t\t\t\tObject.keys(formItem).forEach(key => {\r\n\t\t\t\t\t\t\t\tif (currentItem.showKeys.includes(key)) {\r\n\t\t\t\t\t\t\t\t\tdata[key] = formItem[key];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconst config = JSON.parse(formItem[\"config\"]);\r\n\t\t\t\t\t\t\tif (config) {\r\n\t\t\t\t\t\t\t\t//当是上传控件\r\n\t\t\t\t\t\t\t\tif (formItem[\"fieldType\"] === 11) {\r\n\t\t\t\t\t\t\t\t\tconst url = { urlMethod: \"\", url: \"\", urlParamName: \"\" };\r\n\t\t\t\t\t\t\t\t\t// const detailUrl = { detailUrlMethod: \"\", detailUrl: \"\", detailUrlParamName: \"\" };\r\n\t\t\t\t\t\t\t\t\tObject.keys(config).forEach(key => {\r\n\t\t\t\t\t\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"urlMethod\":\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"url\":\r\n\t\t\t\t\t\t\t\t\t\t\tcase \"urlParamName\":\r\n\t\t\t\t\t\t\t\t\t\t\t\turl[key] = config[key];\r\n\t\t\t\t\t\t\t\t\t\t\t\tdelete config[key];\r\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t// case \"detailUrlMethod\":\r\n\t\t\t\t\t\t\t\t\t\t\t// case \"detailUrl\":\r\n\t\t\t\t\t\t\t\t\t\t\t// case \"detailUrlParamName\":\r\n\t\t\t\t\t\t\t\t\t\t\t// detailUrl[key] = config[key];\r\n\t\t\t\t\t\t\t\t\t\t\t// delete config[key];\r\n\t\t\t\t\t\t\t\t\t\t\t// break;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tconfig[\"url\"] = url;\r\n\t\t\t\t\t\t\t\t\t// config[\"detailUrl\"] = detailUrl;\r\n\t\t\t\t\t\t\t\t} else if ([3, 6, 7, 8, 9].includes(formItem[\"fieldType\"])) {\r\n\t\t\t\t\t\t\t\t\tconfig.selectionsType =\r\n\t\t\t\t\t\t\t\t\t\tconfig.selectionsType === undefined ? 1 : Number(config.selectionsType);\r\n\t\t\t\t\t\t\t\t\texcludeKeys =\r\n\t\t\t\t\t\t\t\t\t\tconfig.selectionsType === 1 ? selectionsType2keys : selectionsType1keys;\r\n\t\t\t\t\t\t\t\t\tconst objToArr = keyName => {\r\n\t\t\t\t\t\t\t\t\t\tif (dataType.isObject(config[keyName])) {\r\n\t\t\t\t\t\t\t\t\t\t\tconfig[keyName] = Object.keys(config[keyName]).map(key => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: key,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: config[keyName][key],\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tconfig[keyName] = [];\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tobjToArr(\"selectionsQuery\");\r\n\t\t\t\t\t\t\t\t\tobjToArr(\"selectListFieldNames\");\r\n\t\t\t\t\t\t\t\t\tshowSelectionsTypeLinkOther(\r\n\t\t\t\t\t\t\t\t\t\ttool.getFormMethods().changeFormItems,\r\n\t\t\t\t\t\t\t\t\t\tconfig[\"selectionsType\"],\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tdata.disabled = data.disabled === undefined ? 0 : Number(data.disabled);\r\n\t\t\t\t\t\t\t\tdata = { ...data, ...config };\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (e) {}\r\n\t\t\t\t\t\tshowFieldTypeLinkOther(\r\n\t\t\t\t\t\t\ttool.getFormMethods().changeFormItems,\r\n\t\t\t\t\t\t\titems,\r\n\t\t\t\t\t\t\tformItem[\"fieldType\"],\r\n\t\t\t\t\t\t\texcludeKeys,\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t// if ([5].includes(formItem[\"fieldType\"])) {\r\n\t\t\t\t\t\t// \ttool.getFormMethods().changeFormItems({ key: \"initialValue\", show: false }, true);\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn Promise.resolve({\r\n\t\t\t\t\t\tdata,\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tsubmitApiInterface(values, props, tool) {\r\n\t\t\t\t\tconst control = controlList.find(item => {\r\n\t\t\t\t\t\treturn item.value === values[\"fieldType\"];\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconst config = {};\r\n\t\t\t\t\tif (Array.isArray(control.configKeys)) {\r\n\t\t\t\t\t\tcontrol.configKeys.forEach(key => {\r\n\t\t\t\t\t\t\tconfig[key] = values[key];\r\n\t\t\t\t\t\t\tdelete values[key];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvalues.config = config;\r\n\t\t\t\t\t//上传控件的config要特殊处理\r\n\t\t\t\t\tif (values[\"fieldType\"] === 11) {\r\n\t\t\t\t\t\tlet newConf = values.config;\r\n\t\t\t\t\t\tObject.keys(values.config).forEach(key => {\r\n\t\t\t\t\t\t\tconst val = values.config[key];\r\n\t\t\t\t\t\t\t// if (key === \"url\" || key === \"detailUrl\") {\r\n\t\t\t\t\t\t\t// \tnewConf = { ...newConf, ...val };\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\tif (key === \"url\") {\r\n\t\t\t\t\t\t\t\tnewConf = { ...newConf, ...val };\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvalues.config = newConf;\r\n\t\t\t\t\t} else if ([3, 6, 7, 8, 9].includes(values[\"fieldType\"])) {\r\n\t\t\t\t\t\tconst arrToObj = keyName => {\r\n\t\t\t\t\t\t\tconst newSelectionsQuery = {};\r\n\t\t\t\t\t\t\tArray.isArray(values.config[keyName]) &&\r\n\t\t\t\t\t\t\t\tvalues.config[keyName].forEach(item => {\r\n\t\t\t\t\t\t\t\t\tif (item.label && item.value) {\r\n\t\t\t\t\t\t\t\t\t\tnewSelectionsQuery[item.label] = item.value;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tvalues.config[keyName] = newSelectionsQuery;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tarrToObj(\"selectionsQuery\");\r\n\t\t\t\t\t\tarrToObj(\"selectListFieldNames\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (values.config) {\r\n\t\t\t\t\t\tvalues.config = JSON.stringify(values.config);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst newItem = getFormItem(formItem ? { ...formItem, ...values } : values, groupRef.current);\r\n\t\t\t\t\tconst currentItems = groupRef.current.groupRef.current.getFormItems();\r\n\t\t\t\t\tlet newItems = [...currentItems];\r\n\t\t\t\t\tconst i = currentItems.findIndex(\r\n\t\t\t\t\t\titem => item[\"fieldKey\"] === (formItem ? formItem[\"fieldKey\"] : values[\"fieldKey\"]),\r\n\t\t\t\t\t);\r\n\t\t\t\t\tlet successMsg = \"添加控件成功\";\r\n\t\t\t\t\tif (i > -1) {\r\n\t\t\t\t\t\tif (formItem && formItem[\"fieldKey\"] !== values[\"fieldKey\"] && linkageRef.current) {\r\n\t\t\t\t\t\t\t//修改了fieldKey时移除li\r\n\t\t\t\t\t\t\tconst hasRemoveAge = removeSomeLinkage(linkageRef, formItem[\"fieldKey\"]);\r\n\t\t\t\t\t\t\tif (hasRemoveAge) {\r\n\t\t\t\t\t\t\t\tsuccessMsg += `。由于修改了fieldKey，同时移除了对应的联动配置。`;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnewItems.splice(i, 1, newItem);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewItems = [...newItems, newItem];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log(newItem);\r\n\t\t\t\t\tgroupRef.current.groupRef.current.setFormItems(newItems);\r\n\t\t\t\t\ttool.showRightModal(false, \"controlProtoModal\");\r\n\t\t\t\t\treturn Promise.resolve({\r\n\t\t\t\t\t\tmsg: successMsg,\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t}),\r\n\t).current;\r\n}\r\nexport default React.memo(\r\n\tReact.forwardRef(function AddColForm({ groupId, formItem, formViewerRef, linkageRef, type }, ref) {\r\n\t\tconst EditForm = useEditPage(groupId, formItem, formViewerRef, linkageRef, type);\r\n\t\treturn <EditForm detailId=\"1\" />;\r\n\t}),\r\n);\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport { Icon, Tooltip } from \"antd\";\r\n\r\nexport default React.memo(function GroupMoveBtns(props) {\r\n\tconst { onMoveUp, onMoveDown,onRemove } = props;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Tooltip placement=\"top\" title=\"上移\">\r\n\t\t\t\t<div className=\"z-live-tool-item all-border move small z-margin-right-10\" onClick={onMoveUp}>\r\n\t\t\t\t\t<Icon type=\"arrow-up\" />\r\n\t\t\t\t</div>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip placement=\"top\" title=\"下移\">\r\n\t\t\t\t<div className=\"z-live-tool-item all-border move small z-margin-right-10\" onClick={onMoveDown}>\r\n\t\t\t\t\t<Icon type=\"arrow-down\" />\r\n\t\t\t\t</div>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip placement=\"top\" title=\"移除组\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"z-live-tool-item all-border small delete z-margin-right-10\"\r\n\t\t\t\t\t\tonClick={onRemove}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon type=\"delete\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Tooltip>\r\n\t\t</>\r\n\t);\r\n});\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport { Icon, Tooltip } from \"antd\";\r\n\r\nexport default React.memo(function InsertGroupBtns(props) {\r\n\tconst { onInsertUp, onInsertDown } = props;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Tooltip placement=\"top\" title=\"向上插入一组\">\r\n\t\t\t\t<div className=\"z-live-tool-item all-border move small z-margin-right-10\" onClick={onInsertUp}>\r\n\t\t\t\t\t<Icon type=\"arrow-up\" className=\"z-group-insert\"/>\r\n\t\t\t\t</div>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip placement=\"top\" title=\"向下插入一组\">\r\n\t\t\t\t<div className=\"z-live-tool-item all-border move small z-margin-right-10\" onClick={onInsertDown}>\r\n\t\t\t\t\t<Icon type=\"arrow-down\"  className=\"z-group-insert\"/>\r\n\t\t\t\t</div>\r\n\t\t\t</Tooltip>\r\n\t\t</>\r\n\t);\r\n});\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport { Icon, Input, Tooltip } from \"antd\";\r\n\r\nexport default React.memo(function GroupNameEdit(props) {\r\n\tconst { value, onChange } = props;\r\n\tconst [inputValue, setInputValue] = useState();\r\n\tconst [edited, setEdited] = useState(false);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{!edited ? <span>{value}</span> : null}\r\n\t\t\t{edited ? (\r\n\t\t\t\t<div className=\"z-display-inline-block\" style={{ width: \"180px\" }}>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvalue={inputValue}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tsetInputValue(e.target.value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t\t{edited ? (\r\n\t\t\t\t<Tooltip placement=\"top\" title=\"取消\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"z-live-tool-item all-border small delete z-margin-left-10\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetEdited(false);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon type=\"close\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t) : null}\r\n\t\t\t{edited ? (\r\n\t\t\t\t<Tooltip placement=\"top\" title=\"确定\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"z-live-tool-item all-border small z-margin-left-10\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tconst returner= typeof onChange === \"function\" && onChange(inputValue);\r\n\t\t\t\t\t\t\tif(returner){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetEdited(false);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon type=\"check\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t) : null}\r\n\t\t\t{!edited ? (\r\n\t\t\t\t<Tooltip placement=\"top\" title=\"修改组名\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"z-live-tool-item all-border small z-margin-left-10\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetEdited(true);\r\n\t\t\t\t\t\t\tsetInputValue(value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon type=\"form\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t) : null}\r\n\t\t</>\r\n\t);\r\n});\r\n","export const linkageTypeActionName = {\r\n\t\"1\": \"禁用\",\r\n\t\"2\": \"必填\",\r\n\t\"3\": \"非必填\",\r\n\t\"4\": \"联动\",\r\n\t\"5.1\": \"组隐藏\",\r\n\t\"5.2\": \"隐藏\",\r\n\t\"6\": \"年月日\",\r\n};\r\n","import React from \"react\";\r\nimport { Tag } from \"antd\";\r\nimport { linkageTypeActionName } from \"../liveCanstant\";\r\n\r\nfunction srcControlRemark(srcControl, srcValues) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Tag color=\"volcano\">{srcControl ? srcControl.label : \"未选控件\"}</Tag>\r\n\t\t\t<span>的值：</span>\r\n\t\t\t{srcValues.map(item => (\r\n\t\t\t\t<Tag color=\"#2db7f5\" key={item.label}>\r\n\t\t\t\t\t{item.label}\r\n\t\t\t\t</Tag>\r\n\t\t\t))}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport function linkRemark1({ srcControl, srcValues, distControls, linkageType }) {\r\n\treturn (\r\n\t\t<span>\r\n\t\t\t{srcControlRemark(srcControl, srcValues)}\r\n\t\t\t<span className=\"z-margin-right-5\">联动</span>\r\n\t\t\t{distControls.map(item => (\r\n\t\t\t\t<Tag color=\"magenta\" key={item.label}>\r\n\t\t\t\t\t{item.label}\r\n\t\t\t\t</Tag>\r\n\t\t\t))}\r\n\t\t\t<span>{linkageTypeActionName[linkageType]}</span>\r\n\t\t</span>\r\n\t);\r\n}\r\n\r\nexport function linkRemark2({ srcControl, srcValues, distControl, distValues }) {\r\n\treturn (\r\n\t\t<span>\r\n\t\t\t{srcControlRemark(srcControl, srcValues)}\r\n\t\t\t<span className=\"z-margin-right-5\">联动</span>\r\n\t\t\t<Tag color=\"volcano\">{distControl ? distControl.label : \"未选控件\"}</Tag>\r\n\t\t\t<span>可选项：</span>\r\n\t\t\t{distValues.map(item => (\r\n\t\t\t\t<Tag color=\"#2db7f5\" key={item.label}>\r\n\t\t\t\t\t{item.label}\r\n\t\t\t\t</Tag>\r\n\t\t\t))}\r\n\t\t</span>\r\n\t);\r\n}\r\n\r\nexport function linkRemark3({ srcControls, distControls }) {\r\n\treturn (\r\n\t\t<span>\r\n\t\t\t<span>身份证输入控件：</span>\r\n\t\t\t{srcControls.map(item => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tag color=\"volcano\" key={item.label}>\r\n\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t\t<span className=\"z-margin-right-5\">联动出生年月日接收控件：</span>\r\n\t\t\t{distControls.map(item => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tag color=\"volcano\" key={item.label}>\r\n\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</span>\r\n\t);\r\n}\r\nexport function linkRemark4({ srcControls, distControls }) {\r\n\treturn (\r\n\t\t<span>\r\n\t\t\t\r\n\t\t\t{srcControls.map(item => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tag color=\"volcano\" key={item.label}>\r\n\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t\t<span className=\"z-margin-right-5\">选项的value传入异步控件：</span>\r\n\t\t\t{distControls.map(item => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tag color=\"volcano\" key={item.label}>\r\n\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t\t<span>的请求参数名：</span>\r\n\t\t</span>\r\n\t);\r\n}\r\nexport function linkRemark5({ srcControls, distControls }) {\r\n\treturn (\r\n\t\t<span>\r\n\t\t\t\r\n\t\t\t{srcControls.map(item => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tag color=\"volcano\" key={item.label}>\r\n\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t\t<span className=\"z-margin-right-5\">选项的联动异步控件：</span>\r\n\t\t\t{distControls.map(item => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tag color=\"volcano\" key={item.label}>\r\n\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</span>\r\n\t);\r\n}\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { getControl, getOptions } from \"../../Zform/controls\";\r\nimport { Row, Col, Tag, Button, message, Input } from \"antd\";\r\nimport ZoneWayTransfer from \"../../ZoneWayTransfer\";\r\nimport { itemsFromTree } from \"../../zTool\";\r\nimport { controlList } from \"../AddColForm\";\r\nimport { linkRemark1, linkRemark2, linkRemark3, linkRemark4, linkRemark5 } from \"./linkRemark\";\r\nfunction turnSelectOptions(\r\n\tsection,\r\n\tneedChild,\r\n\tfilter = list => {\r\n\t\treturn list;\r\n\t},\r\n) {\r\n\treturn section.map(g => {\r\n\t\tlet group = false;\r\n\t\tlet children = null;\r\n\t\tif (Array.isArray(g.formFieldInfoList)) {\r\n\t\t\tgroup = true;\r\n\t\t\tchildren = filter(g.formFieldInfoList).map(item => {\r\n\t\t\t\treturn { ...item, value: item.fieldKey, disabled: false };\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst newItem = {\r\n\t\t\t...g,\r\n\t\t\tvalue: g.name,\r\n\t\t\tgroup: needChild ? group : false,\r\n\t\t\tlabel: g.name,\r\n\t\t\tformFieldInfoList: null,\r\n\t\t};\r\n\t\tif (children && needChild) {\r\n\t\t\tnewItem.children = children;\r\n\t\t}\r\n\t\treturn newItem;\r\n\t});\r\n}\r\nfunction getControlitem(type) {\r\n\tconst findItem = controlList.find(item => {\r\n\t\treturn item.value == type;\r\n\t});\r\n\treturn findItem;\r\n}\r\n\r\nfunction getLinkValue(query = {}) {\r\n\treturn {\r\n\t\tsrcControl: null,\r\n\t\tsrcValues: [],\r\n\t\tsrcControls: [],\r\n\t\tdistControls: [],\r\n\t\tleftSelectedVal: \"\",\r\n\t\trightSelectedVal: \"\",\r\n\t\tdistControl: null,\r\n\t\tdistValues: [],\r\n\t\t...query,\r\n\t};\r\n}\r\n\r\nconst propTypes = {\r\n\tnewFormData: PropTypes.object,\r\n\tonSrcSelected: PropTypes.func,\r\n\tonOk: PropTypes.func,\r\n};\r\nfunction ValueLinkControl(props) {\r\n\tconst { newFormData, onSrcSelected, onOk, linkageType } = props;\r\n\tconst [leftTransferSelections, setLeftTransferSelections] = useState([]);\r\n\tconst [leftTransferSelected, setLeftTransferSelected] = useState([]);\r\n\tconst [rightTransferSelections, setRightTransferSelections] = useState();\r\n\tconst [rightTransferSelected, setRightTransferSelected] = useState([]);\r\n\tconst asyncParamNameRef = useRef(\"id\");\r\n\tuseEffect(() => {\r\n\t\tswitch (linkageType) {\r\n\t\t\tcase \"1\":\r\n\t\t\tcase \"2\":\r\n\t\t\tcase \"3\":\r\n\t\t\tcase \"5.2\":\r\n\t\t\t\tsetLeftTransferSelections([]);\r\n\t\t\t\tsetRightTransferSelections(turnSelectOptions(newFormData.sectionList, true));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"5.1\":\r\n\t\t\t\tsetLeftTransferSelections([]);\r\n\t\t\t\tsetRightTransferSelections(turnSelectOptions(newFormData.sectionList, false));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"4\":\r\n\t\t\t\tsetLeftTransferSelections([]);\r\n\t\t\t\tsetRightTransferSelections([]);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"6\":\r\n\t\t\t\tsetLeftTransferSelections(\r\n\t\t\t\t\tturnSelectOptions(newFormData.sectionList, true, list => {\r\n\t\t\t\t\t\treturn list.filter(item => [1].includes(item.fieldType));\r\n\t\t\t\t\t}),\r\n\t\t\t\t);\r\n\t\t\t\tsetRightTransferSelections(\r\n\t\t\t\t\tturnSelectOptions(newFormData.sectionList, true, list => {\r\n\t\t\t\t\t\treturn list.filter(item => [1, 5].includes(item.fieldType));\r\n\t\t\t\t\t}),\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"7\":\r\n\t\t\t\tsetLeftTransferSelections(\r\n\t\t\t\t\tturnSelectOptions(newFormData.sectionList, true, list => {\r\n\t\t\t\t\t\treturn list.filter(item => [3, 9].includes(item.fieldType));\r\n\t\t\t\t\t}),\r\n\t\t\t\t);\r\n\t\t\t\tsetRightTransferSelections(\r\n\t\t\t\t\tturnSelectOptions(newFormData.sectionList, true, list => {\r\n\t\t\t\t\t\treturn list.filter(item => {\r\n\t\t\t\t\t\t\tlet config = item.config || {};\r\n\t\t\t\t\t\t\tif (typeof item.config == \"string\") {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tconfig = JSON.parse(item.config);\r\n\t\t\t\t\t\t\t\t} catch (e) {}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn [3, 6, 7, 8, 9].includes(item.fieldType) && config.selectionsType == 2;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}),\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tsetLinkValue(getLinkValue());\r\n\t\tsetLeftTransferSelected([]);\r\n\t\tsetRightTransferSelected([]);\r\n\t}, [linkageType]);\r\n\tconst [linkValue, setLinkValue] = useState(getLinkValue());\r\n\tconst selectOptionsRef = useRef(\r\n\t\tturnSelectOptions(newFormData.sectionList, true, list => {\r\n\t\t\treturn list.filter(item => {\r\n\t\t\t\tlet config = item.config || {};\r\n\t\t\t\tif (typeof config === \"string\") {\r\n\t\t\t\t\tconfig = JSON.parse(config);\r\n\t\t\t\t}\r\n\t\t\t\treturn [3, 8, 9].includes(item.fieldType) && config.selectionsType != 2;\r\n\t\t\t});\r\n\t\t}),\r\n\t);\r\n\t//第一个穿梭框的特殊属性\r\n\tconst leftTransferPropsRef = useRef({});\r\n\tconst getSelectControl = (opt = {}) => {\r\n\t\treturn (\r\n\t\t\t<div className=\"z-flex-1 z-margin-right-10\">\r\n\t\t\t\t{getControl(\"Select\", {\r\n\t\t\t\t\tshowSearch: false,\r\n\t\t\t\t\tsize: \"small\",\r\n\t\t\t\t\tplaceholder: \"请选择单选/多选控件\",\r\n\t\t\t\t\tselectList: selectOptionsRef.current,\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdropdownMatchSelectWidth: false,\r\n\t\t\t\t\tdropdownStyle: { width: \"400px\" },\r\n\t\t\t\t\toptLabelRender(item) {\r\n\t\t\t\t\t\tconst findItem = getControlitem(item.fieldType);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"z-flex-space-between\">\r\n\t\t\t\t\t\t\t\t<span className=\"z-margin-right-8\">{item.label}</span>\r\n\t\t\t\t\t\t\t\t<Tag color=\"#2db7f5\">{findItem.label}</Tag>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...opt,\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\tif ([\"1\", \"2\", \"3\", \"4\", \"5.1\", \"5.2\"].includes(linkageType)) {\r\n\t\tleftTransferPropsRef.current = {\r\n\t\t\tleftTitle() {\r\n\t\t\t\treturn getSelectControl({\r\n\t\t\t\t\tvalue: linkValue.leftSelectedVal,\r\n\t\t\t\t\tonChange(val) {\r\n\t\t\t\t\t\titemsFromTree({\r\n\t\t\t\t\t\t\ttree: selectOptionsRef.current,\r\n\t\t\t\t\t\t\tsourceItem: { value: val },\r\n\t\t\t\t\t\t\tkeyObj: { id: \"value\", children: \"children\" },\r\n\t\t\t\t\t\t\taction({ tree, currentItem, item, index }) {\r\n\t\t\t\t\t\t\t\tconst config = JSON.parse(currentItem.config);\r\n\t\t\t\t\t\t\t\tsetLeftTransferSelections(config.selectList);\r\n\t\t\t\t\t\t\t\tsetLinkValue({\r\n\t\t\t\t\t\t\t\t\t...linkValue,\r\n\t\t\t\t\t\t\t\t\tleftSelectedVal: currentItem.value,\r\n\t\t\t\t\t\t\t\t\tsrcValues: [],\r\n\t\t\t\t\t\t\t\t\tdistControls: [],\r\n\t\t\t\t\t\t\t\t\tsrcControls: [],\r\n\t\t\t\t\t\t\t\t\tsrcControl: currentItem,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tsetLeftTransferSelected([]);\r\n\t\t\t\t\t\t\t\tsetRightTransferSelected([]);\r\n\t\t\t\t\t\t\t\tif (linkageType !== \"4\") {\r\n\t\t\t\t\t\t\t\t\tsetRightTransferSelections(\r\n\t\t\t\t\t\t\t\t\t\tturnSelectOptions(newFormData.sectionList, true, list => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn list.filter(item => item.fieldKey !== val);\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonSrcSelected && onSrcSelected(currentItem);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// console.log(turnSelectOptions(newFormData.sectionList));\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\trightTitle: \"已选择的选项\",\r\n\t\t};\r\n\t} else if ([\"6\", \"7\"].includes(linkageType)) {\r\n\t\tleftTransferPropsRef.current = {\r\n\t\t\tleftTitle: \"可选控件列表\",\r\n\t\t\trightTitle: \"已选择的控件\",\r\n\t\t\tleftItemRender(item, index) {\r\n\t\t\t\tconst findControl = getControlitem(item.fieldType);\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"z-flex-space-between\">\r\n\t\t\t\t\t\t<span>{item.label}</span>\r\n\t\t\t\t\t\t{findControl ? <Tag color=\"purple\">{findControl.label}</Tag> : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\t//第二个穿梭框的特殊属性\r\n\tconst rightTransferPropsRef = useRef({});\r\n\tif ([\"1\", \"2\", \"3\", \"5.2\", \"6\"].includes(linkageType)) {\r\n\t\trightTransferPropsRef.current = {\r\n\t\t\tleftTitle: \"可选控件列表\",\r\n\t\t\trightTitle: \"已选择的控件\",\r\n\t\t\tleftItemRender(item, index) {\r\n\t\t\t\tconst findControl = getControlitem(item.fieldType);\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"z-flex-space-between\">\r\n\t\t\t\t\t\t<span>{item.label}</span>\r\n\t\t\t\t\t\t{findControl ? <Tag color=\"purple\">{findControl.label}</Tag> : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t};\r\n\t} else if ([\"4\"].includes(linkageType)) {\r\n\t\trightTransferPropsRef.current = {\r\n\t\t\tleftTitle() {\r\n\t\t\t\treturn getSelectControl({\r\n\t\t\t\t\tvalue: linkValue.rightSelectedVal,\r\n\t\t\t\t\tonChange(val) {\r\n\t\t\t\t\t\titemsFromTree({\r\n\t\t\t\t\t\t\ttree: selectOptionsRef.current,\r\n\t\t\t\t\t\t\tsourceItem: { value: val },\r\n\t\t\t\t\t\t\tkeyObj: { id: \"value\", children: \"children\" },\r\n\t\t\t\t\t\t\taction({ tree, currentItem, item, index }) {\r\n\t\t\t\t\t\t\t\tconst config = JSON.parse(currentItem.config);\r\n\t\t\t\t\t\t\t\tsetRightTransferSelections(config.selectList);\r\n\t\t\t\t\t\t\t\tsetLinkValue({\r\n\t\t\t\t\t\t\t\t\t...linkValue,\r\n\t\t\t\t\t\t\t\t\trightSelectedVal: currentItem.value,\r\n\t\t\t\t\t\t\t\t\tdistValues: [],\r\n\t\t\t\t\t\t\t\t\tdistControls: [],\r\n\t\t\t\t\t\t\t\t\tsrcControls: [],\r\n\t\t\t\t\t\t\t\t\tdistControl: currentItem,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tsetRightTransferSelected([]);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\trightTitle: \"已选择的选项\",\r\n\t\t};\r\n\t} else if ([\"5.1\"].includes(linkageType)) {\r\n\t\trightTransferPropsRef.current = {\r\n\t\t\tleftTitle: \"可选组列表\",\r\n\t\t\trightTitle: \"已选择的组\",\r\n\t\t};\r\n\t}\r\n\r\n\tlet linkRemark = null;\r\n\tswitch (linkageType) {\r\n\t\tcase \"1\":\r\n\t\tcase \"2\":\r\n\t\tcase \"3\":\r\n\t\tcase \"5.1\":\r\n\t\tcase \"5.2\":\r\n\t\t\tlinkRemark = linkRemark1({ ...linkValue, linkageType });\r\n\t\t\tbreak;\r\n\t\tcase \"4\":\r\n\t\t\tlinkRemark = linkRemark2(linkValue);\r\n\t\t\tbreak;\r\n\t\tcase \"6\":\r\n\t\t\tlinkRemark = linkRemark3(linkValue);\r\n\t\t\tbreak;\r\n\t\tcase \"7\":\r\n\t\t\tlinkRemark = linkRemark5(linkValue);\r\n\t\t\tbreak;\r\n\t}\r\n\treturn (\r\n\t\t<Row gutter={20} className=\"z-margin-top-15\" type=\"flex\">\r\n\t\t\t<Col span={12}>\r\n\t\t\t\t<ZoneWayTransfer\r\n\t\t\t\t\t{...leftTransferPropsRef.current}\r\n\t\t\t\t\tsourceKeys={{\r\n\t\t\t\t\t\tname: \"label\",\r\n\t\t\t\t\t\tid: \"value\",\r\n\t\t\t\t\t\tchildren: \"children\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\trepeated={false}\r\n\t\t\t\t\tleftSourceData={leftTransferSelections}\r\n\t\t\t\t\trightTargetData={leftTransferSelected}\r\n\t\t\t\t\tonChange={(actionType, rightData, actionItem, sibligItem) => {\r\n\t\t\t\t\t\tsetLinkValue(\r\n\t\t\t\t\t\t\t[\"6\", \"7\"].includes(linkageType)\r\n\t\t\t\t\t\t\t\t? { ...linkValue, srcControls: rightData }\r\n\t\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\t\t...linkValue,\r\n\t\t\t\t\t\t\t\t\t\tsrcValues: rightData.map(item => ({ label: item.label, value: item.value })),\r\n\t\t\t\t\t\t\t\t  },\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</Col>\r\n\t\t\t<Col span={12}>\r\n\t\t\t\t<ZoneWayTransfer\r\n\t\t\t\t\t{...rightTransferPropsRef.current}\r\n\t\t\t\t\trepeated={false}\r\n\t\t\t\t\tsourceKeys={{\r\n\t\t\t\t\t\tname: \"label\",\r\n\t\t\t\t\t\tid: \"value\",\r\n\t\t\t\t\t\tchildren: \"children\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tleftSourceData={rightTransferSelections}\r\n\t\t\t\t\trightTargetData={rightTransferSelected}\r\n\t\t\t\t\tonChange={(actionType, rightData, actionItem, sibligItem) => {\r\n\t\t\t\t\t\tsetLinkValue(\r\n\t\t\t\t\t\t\tlinkageType === \"4\"\r\n\t\t\t\t\t\t\t\t? { ...linkValue, distValues: rightData }\r\n\t\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\t\t...linkValue,\r\n\t\t\t\t\t\t\t\t\t\tdistControls: rightData,\r\n\t\t\t\t\t\t\t\t  },\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</Col>\r\n\t\t\t<Col span={9} className=\"z-flex-items-center\">\r\n\t\t\t\t{linkageType === \"7\" ? (\r\n\t\t\t\t\t<div className=\"z-linkage-remark\">\r\n\t\t\t\t\t\t<p>{linkRemark4(linkValue)}</p>\r\n\t\t\t\t\t\t<Input.Group compact>\r\n\t\t\t\t\t\t\t<Input style={{ width: \"80px\" }} defaultValue=\"value\" disabled />\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tstyle={{ width: \"160px\" }}\r\n\t\t\t\t\t\t\t\tdefaultValue=\"id\"\r\n\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\tasyncParamNameRef.current = e.target.value;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Input.Group>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null}\r\n\t\t\t</Col>\r\n\t\t\t<Col span={12}>\r\n\t\t\t\t<div className=\"z-linkage-line z-linkage-remark z-flex-items-center\">{linkRemark}</div>\r\n\t\t\t</Col>\r\n\t\t\t<Col span={3} className=\"z-flex-items-center\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\tlet error = false;\r\n\t\t\t\t\t\tif ([\"6\", \"7\"].includes(linkageType)) {\r\n\t\t\t\t\t\t\tif (!linkValue.srcControls.length || !linkValue.distControls.length) {\r\n\t\t\t\t\t\t\t\terror = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if ([\"4\"].includes(linkageType)) {\r\n\t\t\t\t\t\t\tif (!linkValue.srcValues.length || !linkValue.distValues.length) {\r\n\t\t\t\t\t\t\t\terror = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (!linkValue.srcValues.length || !linkValue.distControls.length) {\r\n\t\t\t\t\t\t\terror = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (error) {\r\n\t\t\t\t\t\t\tmessage.error(\"配置不完整\");\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsetLinkValue({\r\n\t\t\t\t\t\t\t...linkValue,\r\n\t\t\t\t\t\t\tsrcValues: [],\r\n\t\t\t\t\t\t\tsrcControls: [],\r\n\t\t\t\t\t\t\tdistValues: [],\r\n\t\t\t\t\t\t\tdistControls: [],\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetLeftTransferSelected([]);\r\n\t\t\t\t\t\tsetRightTransferSelected([]);\r\n\t\t\t\t\t\tonOk && onOk(linkValue, { asyncParamName: asyncParamNameRef.current });\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t保存到表单\r\n\t\t\t\t</Button>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t);\r\n}\r\nValueLinkControl.propTypes = propTypes;\r\nexport default React.memo(ValueLinkControl);\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\n// import { getControl, getOptions } from \"../../Zform/controls\";\r\nimport { Row, Col, Tag, Icon, Tooltip } from \"antd\";\r\nimport { linkageTypeActionName } from \"../liveCanstant\";\r\nfunction ValueLinkConfigured(props, ref) {\r\n\tconst { linkageType, onRemove } = props;\r\n\tconst [configured, setConfigured] = useState([]);\r\n\tuseImperativeHandle(ref, () => {\r\n\t\treturn {\r\n\t\t\tgetCurrentConfigured() {\r\n\t\t\t\treturn configured;\r\n\t\t\t},\r\n\t\t\tsetConfigured,\r\n\t\t};\r\n\t});\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{configured.map((c,index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Row gutter={16} key={c.srcValue} type=\"flex\" className=\"z-link-configured\">\r\n\t\t\t\t\t\t<Col span={6}>\r\n\t\t\t\t\t\t\t<div className=\"z-flex-space-between\">\r\n\t\t\t\t\t\t\t\t<Tag color=\"#2db7f5\">{c.valueLabel}</Tag>\r\n\t\t\t\t\t\t\t\t<span>{linkageTypeActionName[linkageType]}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={14}>\r\n\t\t\t\t\t\t\t{c.fields.map(item => {\r\n\t\t\t\t\t\t\t\tif (Array.isArray(item.options)) {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div key={item.fieldKey}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tag color=\"magenta\">{item.label}</Tag>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>可选的选项：</span>\r\n\t\t\t\t\t\t\t\t\t\t\t{item.options.map(opt => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tag key={opt.value} color=\"#2db7f5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{opt.label}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Tag color=\"magenta\" key={item.fieldKey ? item.fieldKey : item.groupName}>\r\n\t\t\t\t\t\t\t\t\t\t{item.fieldKey ? item.label : item.groupName}\r\n\t\t\t\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={4}>\r\n\t\t\t\t\t\t\t<Tooltip placement=\"top\" title=\"移除\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"z-live-tool-item delete all-border small\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\ttypeof onRemove === \"function\" && onRemove(c,index);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Icon type=\"delete\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t\t{!configured.length ? <p className=\"z-text-center\">无配置</p> : null}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default React.memo(React.forwardRef(ValueLinkConfigured));\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\n// import { getControl, getOptions } from \"../../Zform/controls\";\r\nimport { Row, Col, Tag, Tooltip, Icon } from \"antd\";\r\nfunction IDLinkagesConfigured(props, ref) {\r\n\tconst { onRemove } = props;\r\n\tconst [configured, setConfigured] = useState([]);\r\n\tuseImperativeHandle(ref, () => {\r\n\t\treturn {\r\n\t\t\tgetCurrentConfigured() {\r\n\t\t\t\treturn configured;\r\n\t\t\t},\r\n\t\t\tsetConfigured,\r\n\t\t};\r\n\t});\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{configured.map((c, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Row gutter={16} key={c.linkageType + c.src.fieldKey} type=\"flex\" className=\"z-link-configured\">\r\n\t\t\t\t\t\t<Col span={6}>\r\n\t\t\t\t\t\t\t{c.linkageType === \"6\" ? <span>身份证输入控件：</span> : null}\r\n\t\t\t\t\t\t\t<Tag color=\"#2db7f5\">{c.src.label}</Tag>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={14}>\r\n\t\t\t\t\t\t\t<span>{c.linkageType === \"6\" ? \"出生年月日接收控件：\" : \"联动异步控件：\"}</span>\r\n\t\t\t\t\t\t\t{c.dist.map(d => {\r\n\t\t\t\t\t\t\t\treturn d.fields.map(item => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Tag color=\"magenta\" key={item.fieldKey}>\r\n\t\t\t\t\t\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t{c.asyncParamName ? <span>请求选项，其参数名：<Tag color=\"red\">{c.asyncParamName}</Tag></span> : null}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={4}>\r\n\t\t\t\t\t\t\t<Tooltip placement=\"top\" title=\"移除\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"z-live-tool-item delete all-border small\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\ttypeof onRemove === \"function\" && onRemove(c, index);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Icon type=\"delete\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t\t{!configured.length ? <p className=\"z-text-center\">无配置</p> : null}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default React.memo(React.forwardRef(IDLinkagesConfigured));\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport ReactDom from \"react-dom\";\r\n// import Zform from \"../Zform\";\r\n// import { getControl, getOptions } from \"../../Zform/controls\";\r\nimport { Tag, Modal } from \"antd\";\r\nimport ZerodMainContext from \"../../ZerodMainContext\";\r\nimport Ztabs from \"../../Ztabs\";\r\nimport { ZcascaderItemGroup } from \"../../Zcascader\";\r\nimport ValueLinkControl from \"./ValueLinkControl\";\r\nimport ValueLinkConfigured from \"./ValueLinkConfigured\";\r\nimport IDLinkagesConfigured from \"./IDLinkagesConfigured\";\r\nconst linkageTypes = [\r\n\t{\r\n\t\ttab: \"单选/多选控制控件禁用\",\r\n\t\tkey: \"1\",\r\n\t\tactive: true,\r\n\t},\r\n\t{\r\n\t\ttab: \"单选/多选控制控件必填\",\r\n\t\tkey: \"2\",\r\n\t},\r\n\t{\r\n\t\ttab: \"单选/多选控制控件非必填\",\r\n\t\tkey: \"3\",\r\n\t},\r\n\t{\r\n\t\ttab: \"单选/多选控制选项\",\r\n\t\tkey: \"4\",\r\n\t},\r\n\t{\r\n\t\ttab: \"单选/多选控制组隐藏\",\r\n\t\tkey: \"5.1\",\r\n\t},\r\n\t{\r\n\t\ttab: \"单选/多选控制控件隐藏\",\r\n\t\tkey: \"5.2\",\r\n\t},\r\n\t{\r\n\t\ttab: \"身份证取出生年月日\",\r\n\t\tkey: \"6\",\r\n\t},\r\n\t{\r\n\t\ttab: \"单选联动其他控件异步选项\",\r\n\t\tkey: \"7\",\r\n\t},\r\n];\r\nconst itemKeys = {\r\n\tname: \"tab\",\r\n\tid: \"key\",\r\n};\r\n// const propTypes = {};\r\nconst defaultProps = {\r\n\t//默认的linkages\r\n\tdefaultValue: [],\r\n};\r\n\r\nfunction LinkageConfig(props) {\r\n\tconst { getInsertLocation, getScrollAreaWrapperEl, newFormData, defaultValue, onChange } = props;\r\n\tconst wrapperRef = useRef(null);\r\n\tconst [tabPanes, setTabPanes] = useState([]);\r\n\tconst [tabKey, setTabKey] = useState(\"1\");\r\n\tconst [linkageTypesState, setLinkageTypes] = useState(linkageTypes);\r\n\tconst curentLinkTypeRef = useRef(linkageTypesState.find(item => item.active));\r\n\tconst objRef = useRef(null);\r\n\tconst defaultLinkagesRef = useRef(defaultValue);\r\n\tuseEffect(() => {\r\n\t\t// 首先得获取wrapperRef.current元素所在得位置\r\n\t\tconst insetLocaltion = getInsertLocation(wrapperRef.current);\r\n\t\t// 获取insetLocaltion所在滚动区域得包裹元素\r\n\t\tobjRef.current = getScrollAreaWrapperEl(insetLocaltion);\r\n\t\tsetTabPanes([\r\n\t\t\t{\r\n\t\t\t\ttab: \"联动列表\",\r\n\t\t\t\tkey: \"1\",\r\n\t\t\t\tcontent: null,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttab: \"联动配置\",\r\n\t\t\t\tkey: \"2\",\r\n\t\t\t\tcontent: null,\r\n\t\t\t},\r\n\t\t]);\r\n\t\treturn () => {\r\n\t\t\tobjRef.current.methods.resetScrollArea();\r\n\t\t};\r\n\t}, []);\r\n\tconst onItemClick = useCallback((e, item, i, props) => {\r\n\t\tsetLinkageTypes(\r\n\t\t\tlinkageTypesState.map(l => {\r\n\t\t\t\tconst active = l.key === item.data.key;\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tcurentLinkTypeRef.current = item.data;\r\n\t\t\t\t}\r\n\t\t\t\treturn { ...l, active };\r\n\t\t\t}),\r\n\t\t);\r\n\t}, []);\r\n\t//当前选择的控件\r\n\tconst [currentControl, setCurrentControl] = useState({});\r\n\t//取ValueLinkConfigured提供的属性\r\n\tconst configuredRef = useRef(null);\r\n\tuseEffect(() => {\r\n\t\tif (Array.isArray(defaultLinkagesRef.current) && [\"6\",\"7\"].includes(curentLinkTypeRef.current.key)) {\r\n\t\t\tconst IDconfigured = defaultLinkagesRef.current.filter(age => {\r\n\t\t\t\treturn age.linkageType === curentLinkTypeRef.current.key;\r\n\t\t\t});\r\n\t\t\tconfiguredRef.current && configuredRef.current.setConfigured(IDconfigured);\r\n\t\t} else {\r\n\t\t\tconfiguredRef.current && configuredRef.current.setConfigured([]);\r\n\t\t}\r\n\t}, [curentLinkTypeRef.current.key]);\r\n\r\n\tconst onRemove = (currentConf, index) => {\r\n\t\tModal.confirm({\r\n\t\t\ttitle: \"是否确认移除这条配置?\",\r\n\t\t\tokText: \"确定\",\r\n\t\t\tcancelText: \"取消\",\r\n\t\t\tonOk() {\r\n\t\t\t\tconst currentConfigured = configuredRef.current.getCurrentConfigured();\r\n\t\t\t\tconst currentLinkageType = curentLinkTypeRef.current.key;\r\n\t\t\t\tlet findIndex = -1;\r\n\t\t\t\tif ([\"6\",\"7\"].includes(currentLinkageType)) {\r\n\t\t\t\t\tfindIndex = defaultLinkagesRef.current.findIndex(item => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\titem.linkageType === currentLinkageType && item.src.fieldKey === currentConf.src.fieldKey\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfindIndex = defaultLinkagesRef.current.findIndex(item => {\r\n\t\t\t\t\t\treturn item.linkageType === currentLinkageType && item.src.fieldKey === currentConf.srcKey;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (findIndex > -1) {\r\n\t\t\t\t\tcurrentConfigured.splice(index, 1);\r\n\t\t\t\t\tconst newConfigs = [...currentConfigured];\r\n\t\t\t\t\tdefaultLinkagesRef.current[findIndex].dist = newConfigs;\r\n\t\t\t\t\tconfiguredRef.current.setConfigured(newConfigs);\r\n\t\t\t\t\tdefaultLinkagesRef.current = [...defaultLinkagesRef.current];\r\n\t\t\t\t\tonChange && onChange(defaultLinkagesRef.current);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<section ref={wrapperRef} className=\"z-linkage-config\">\r\n\t\t\t{objRef.current\r\n\t\t\t\t? ReactDom.createPortal(\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"z-linkage-tab\"\r\n\t\t\t\t\t\t\tref={el => {\r\n\t\t\t\t\t\t\t\tif (el) {\r\n\t\t\t\t\t\t\t\t\tobjRef.current.methods.setScrollAreaStyle({\r\n\t\t\t\t\t\t\t\t\t\theight: `calc(100% - ${el.clientHeight}px)`,\r\n\t\t\t\t\t\t\t\t\t\tmarginTop: `${el.clientHeight}px`,\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Ztabs\r\n\t\t\t\t\t\t\t\ttabPanes={tabPanes}\r\n\t\t\t\t\t\t\t\tactiveKey={tabKey}\r\n\t\t\t\t\t\t\t\tonChange={key => {\r\n\t\t\t\t\t\t\t\t\tsetTabKey(key);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>,\r\n\t\t\t\t\t\tobjRef.current.wrapperEl,\r\n\t\t\t\t  )\r\n\t\t\t\t: null}\r\n\t\t\t{tabKey === \"1\" ? (\r\n\t\t\t\t<section className=\"z-panel\">\r\n\t\t\t\t\t<div className=\"z-panel-body z-text-center\">未完待续</div>\r\n\t\t\t\t</section>\r\n\t\t\t) : null}\r\n\t\t\t{tabKey === \"2\" ? (\r\n\t\t\t\t<section>\r\n\t\t\t\t\t<div className=\"z-padding-20\">\r\n\t\t\t\t\t\t<div className=\"z-panel\">\r\n\t\t\t\t\t\t\t<div className=\"z-panel-body z-padding-bottom-0-important\">\r\n\t\t\t\t\t\t\t\t<ZcascaderItemGroup\r\n\t\t\t\t\t\t\t\t\tlabel=\"联动类型\"\r\n\t\t\t\t\t\t\t\t\titemData={linkageTypesState}\r\n\t\t\t\t\t\t\t\t\titemKeys={itemKeys}\r\n\t\t\t\t\t\t\t\t\tonItemClick={onItemClick}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<ValueLinkControl\r\n\t\t\t\t\t\t\t\t\tnewFormData={newFormData}\r\n\t\t\t\t\t\t\t\t\tlinkageType={curentLinkTypeRef.current.key}\r\n\t\t\t\t\t\t\t\t\tonSrcSelected={control => {\r\n\t\t\t\t\t\t\t\t\t\tlet existLinkage = null;\r\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(defaultLinkagesRef.current)) {\r\n\t\t\t\t\t\t\t\t\t\t\texistLinkage = defaultLinkagesRef.current.find(age => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tage.linkageType === curentLinkTypeRef.current.key &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tage.src.fieldKey === control.fieldKey\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tconfiguredRef.current.setConfigured(existLinkage ? [...existLinkage.dist] : []);\r\n\t\t\t\t\t\t\t\t\t\tsetCurrentControl(control);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonOk={(links, other) => {\r\n\t\t\t\t\t\t\t\t\t\t// if(curentLinkTypeRef.current.key === \"6\"){\r\n\r\n\t\t\t\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t\t\t\t//转成linkage\r\n\t\t\t\t\t\t\t\t\t\tlet linkage = {\r\n\t\t\t\t\t\t\t\t\t\t\tlinkageType: curentLinkTypeRef.current.key,\r\n\t\t\t\t\t\t\t\t\t\t\tname: curentLinkTypeRef.current.tab,\r\n\t\t\t\t\t\t\t\t\t\t\tsrc: null,\r\n\t\t\t\t\t\t\t\t\t\t\tdist: null,\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\tif (links.srcControl) {\r\n\t\t\t\t\t\t\t\t\t\t\tlinkage.src = {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfieldKey: links.srcControl.fieldKey,\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: links.srcControl.label,\r\n\t\t\t\t\t\t\t\t\t\t\t\tfieldType: links.srcControl.fieldType,\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tlet linkages = [];\r\n\t\t\t\t\t\t\t\t\t\tif ([\"1\", \"2\", \"3\", \"5.2\"].includes(curentLinkTypeRef.current.key)) {\r\n\t\t\t\t\t\t\t\t\t\t\tlinkage.dist = links.srcValues.map(val => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst fields = links.distControls.map(d => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldKey: d.fieldKey,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: d.label,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldType: d.fieldType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrcKey: linkage.src.fieldKey,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrcValue: val.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabel: val.label,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfields,\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t} else if ([\"4\"].includes(curentLinkTypeRef.current.key)) {\r\n\t\t\t\t\t\t\t\t\t\t\tlinkage.dist = links.srcValues.map(val => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst fields = [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldKey: links.distControl.fieldKey,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: links.distControl.label,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldType: links.distControl.fieldType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions: links.distValues.map(dv => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn { label: dv.label, value: dv.value };\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrcKey: linkage.src.fieldKey,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrcValue: val.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabel: val.label,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfields,\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t} else if ([\"5.1\"].includes(curentLinkTypeRef.current.key)) {\r\n\t\t\t\t\t\t\t\t\t\t\tlinkage.dist = links.srcValues.map(val => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst fields = links.distControls.map(d => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupId: d.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupName: d.label,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrcKey: linkage.src.fieldKey,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrcValue: val.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabel: val.label,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfields,\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t} else if ([\"6\", \"7\"].includes(curentLinkTypeRef.current.key)) {\r\n\t\t\t\t\t\t\t\t\t\t\tconst asyncParamName=curentLinkTypeRef.current.key === \"7\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t? other.asyncParamName\r\n\t\t\t\t\t\t\t\t\t\t\t\t: undefined;\r\n\t\t\t\t\t\t\t\t\t\t\tlinkages = links.srcControls.map(l => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t...linkage,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldKey: l.fieldKey,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: l.label,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldType: l.fieldType,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tasyncParamName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdist: [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfields: links.distControls.map(d => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldKey: d.fieldKey,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: d.label,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tasyncParamName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t//查找配置的选项中是否存在，存在就替换，不存在就追加\r\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(linkage.dist) && linkage.dist.length) {\r\n\t\t\t\t\t\t\t\t\t\t\tconst currentConfigured = configuredRef.current.getCurrentConfigured();\r\n\t\t\t\t\t\t\t\t\t\t\tlinkage.dist.forEach(di => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst existIndex = currentConfigured.findIndex(con => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn con.srcValue === di.srcValue;\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (existIndex > -1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst newFields = [];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentConfigured[existIndex].fields.forEach(f => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst hasFieldindex = di.fields.findIndex(df => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(df.fieldKey && df.fieldKey === f.fieldKey) ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(df.groupName && df.groupName === f.groupName)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (hasFieldindex > -1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewFields.push(di.fields[hasFieldindex]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdi.fields.splice(hasFieldindex, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewFields.push(f);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdi.fields = [...newFields, ...di.fields];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentConfigured.splice(existIndex, 1, di);\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentConfigured.push(di);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tlinkage.dist = [...currentConfigured];\r\n\t\t\t\t\t\t\t\t\t\t\tconfiguredRef.current.setConfigured([...currentConfigured]);\r\n\t\t\t\t\t\t\t\t\t\t\t//新的linkages\r\n\t\t\t\t\t\t\t\t\t\t\tlet existLinkageIndex = -1;\r\n\t\t\t\t\t\t\t\t\t\t\tif (Array.isArray(defaultLinkagesRef.current)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\texistLinkageIndex = defaultLinkagesRef.current.findIndex(age => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tage.linkageType === linkage.linkageType &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tage.src.fieldKey === linkage.src.fieldKey\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tif (existLinkageIndex > -1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultLinkagesRef.current.splice(existLinkageIndex, 1, linkage);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultLinkagesRef.current.push(linkage);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\tArray.isArray(linkages) &&\r\n\t\t\t\t\t\t\t\t\t\t\tlinkages.length &&\r\n\t\t\t\t\t\t\t\t\t\t\tArray.isArray(defaultLinkagesRef.current)\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tlinkages.forEach(linkage => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst hasAgeIndex = defaultLinkagesRef.current.findIndex(age => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tage.linkageType === linkage.linkageType &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tage.src.fieldKey === linkage.src.fieldKey\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (hasAgeIndex > -1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultLinkagesRef.current.splice(hasAgeIndex, 1, linkage);\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultLinkagesRef.current.push(linkage);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tconst IDconfigured = defaultLinkagesRef.current.filter(age => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn age.linkageType === curentLinkTypeRef.current.key;\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tconfiguredRef.current.setConfigured(IDconfigured);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tdefaultLinkagesRef.current = [...defaultLinkagesRef.current];\r\n\t\t\t\t\t\t\t\t\t\tonChange && onChange(defaultLinkagesRef.current);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"z-panel-heading\">\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t{currentControl.label ? <Tag color=\"volcano\">{currentControl.label}</Tag> : null}\r\n\t\t\t\t\t\t\t\t\t已配置的选项\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"z-panel-body\">\r\n\t\t\t\t\t\t\t\t{[\"6\",\"7\"].includes(curentLinkTypeRef.current.key) ? (\r\n\t\t\t\t\t\t\t\t\t<IDLinkagesConfigured ref={configuredRef} onRemove={onRemove} />\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<ValueLinkConfigured\r\n\t\t\t\t\t\t\t\t\t\tlinkageType={curentLinkTypeRef.current.key}\r\n\t\t\t\t\t\t\t\t\t\tref={configuredRef}\r\n\t\t\t\t\t\t\t\t\t\tonRemove={onRemove}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t) : null}\r\n\t\t</section>\r\n\t);\r\n}\r\nLinkageConfig.defaultProps = defaultProps;\r\nexport default React.memo(ZerodMainContext.setConsumer(LinkageConfig));\r\n","import React, { useState, useEffect, useRef, useImperativeHandle, useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport FormViewer from \"./FormViewer\";\r\nimport FormContext from \"./FormContext\";\r\nimport { Button, Icon, Tag, Col, Slider, message, Modal, Tooltip } from \"antd\";\r\nimport controls from \"./controls\";\r\nimport Zform from \"../Zform\";\r\nimport { dataType, GenNonDuplicateID } from \"../zTool\";\r\nimport ZerodMainContext from \"../ZerodMainContext\";\r\nimport ZerodLayerContext from \"../ZerodLayerContext\";\r\nimport \"../../dragula/dragula.css\";\r\nimport dragula from \"../../dragula/dragula\";\r\nimport AddColForm from \"./AddColForm\";\r\nimport GroupMoveBtns from \"./GroupMoveBtns\";\r\nimport InsertGroupBtns from \"./InsertGroupBtns\";\r\nimport GroupNameEdit from \"./GroupNameEdit\";\r\nimport LinkageConfig from \"./LinkageConfig\";\r\nimport { getGroupItem, pareLinkages, removeSomeLinkage } from \"./common\";\r\nimport ZfullLayer from \"../ZfullLayer\";\r\n//校验、提取最新的formData数据\r\nfunction commitFormData(formViewerRef, layoutFormRef, linkageRef, onSave) {\r\n\tlayoutFormRef.current.validateFields((errors, values) => {\r\n\t\tif (errors) return;\r\n\t\tconst groups = formViewerRef.current.getFormGroups();\r\n\t\tconst newFormData = {\r\n\t\t\tcode: values.code,\r\n\t\t\tdescription: values.description,\r\n\t\t\tname: values.name,\r\n\t\t\tlabelLayout: values.labelLayout,\r\n\t\t};\r\n\t\tlet hasEmptyGroup = false;\r\n\t\tnewFormData.sectionList = groups.map((g, gindex) => {\r\n\t\t\tconst formList = g.groupRef.current.getFormItems().map((item, itemindex) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tfieldKey: item.fieldKey,\r\n\t\t\t\t\tfieldType: item.fieldType,\r\n\t\t\t\t\tid: item.id,\r\n\t\t\t\t\tconfig: item.config,\r\n\t\t\t\t\tdisabled: item.disabled,\r\n\t\t\t\t\tinitialValue: item.initialValue,\r\n\t\t\t\t\tlabel: item.label,\r\n\t\t\t\t\tregularExpression: item.regularExpression,\r\n\t\t\t\t\trequired: item.required,\r\n\t\t\t\t\tsectionId: item.sectionId,\r\n\t\t\t\t\tspan: item.span,\r\n\t\t\t\t\tseq: itemindex + 1,\r\n\t\t\t\t\terrorMsg: item.errorMsg,\r\n\t\t\t\t\tremark: item.remark,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tif (!hasEmptyGroup && !formList.length) {\r\n\t\t\t\thasEmptyGroup = true;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tid: g.additive ? undefined : g.id,\r\n\t\t\t\tname: g.name,\r\n\t\t\t\tformFieldInfoList: formList,\r\n\t\t\t\tseq: gindex + 1,\r\n\t\t\t};\r\n\t\t});\r\n\t\tif (hasEmptyGroup) {\r\n\t\t\tmessage.error(\"存在空的组，请为其添加控件或者移除该组\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tnewFormData.linkages = Array.isArray(linkageRef.current) ? JSON.stringify(linkageRef.current) : null;\r\n\t\ttypeof onSave === \"function\" && onSave(newFormData);\r\n\t});\r\n}\r\n\r\nfunction useGetItems(\r\n\tformData,\r\n\tformViewerRef,\r\n\tlayoutFormRef,\r\n\tshowModal,\r\n\tonSave,\r\n\tlayerRef,\r\n\tshowViewerRef,\r\n\tformRenderedRef,\r\n\tlinkageRef,\r\n) {\r\n\tconst hasCodeRef = useRef(false);\r\n\t// const linkageRef = useRef(pareLinkages(formData.linkages));\r\n\tuseEffect(() => {\r\n\t\tif (layoutFormRef.current && formRenderedRef.current) {\r\n\t\t\tlayoutFormRef.current.setFieldsValue({\r\n\t\t\t\tname: formData.name,\r\n\t\t\t\tcode: formData.code,\r\n\t\t\t\tlabelLayout: formData.labelLayout,\r\n\t\t\t\tdescription: formData.description,\r\n\t\t\t});\r\n\t\t}\r\n\t\thasCodeRef.current = !!formData.code;\r\n\t\tlinkageRef.current = pareLinkages(formData.linkages);\r\n\t}, [formData, layoutFormRef.current, formRenderedRef.current]);\r\n\r\n\tconst itemsRef = useRef([\r\n\t\t{\r\n\t\t\tkey: \"name\",\r\n\t\t\tlabel: \"表单名称\",\r\n\t\t\tspan: 4,\r\n\t\t\trender: (form, changeFormItems) => {\r\n\t\t\t\treturn controls[\"1\"].getControl();\r\n\t\t\t},\r\n\t\t\toptions: controls[\"1\"].getOptions({\r\n\t\t\t\trequired: true,\r\n\t\t\t\tinitialValue: formData.name,\r\n\t\t\t}),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"code\",\r\n\t\t\tlabel: \"表单编码\",\r\n\t\t\tspan: 4,\r\n\t\t\trender: (form, changeFormItems) => {\r\n\t\t\t\treturn controls[\"1\"].getControl({}, undefined, undefined, { disabled: hasCodeRef.current });\r\n\t\t\t},\r\n\t\t\toptions: controls[\"1\"].getOptions({\r\n\t\t\t\trequired: true,\r\n\t\t\t\tinitialValue: formData.code,\r\n\t\t\t}),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"labelLayout\",\r\n\t\t\tlabel: \"label布局\",\r\n\t\t\tspan: 6,\r\n\t\t\tlabelFocused: true,\r\n\t\t\trender: (form, changeFormItems) => {\r\n\t\t\t\treturn controls[\"9\"].getControl(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconfig: {\r\n\t\t\t\t\t\t\tselectList: [\r\n\t\t\t\t\t\t\t\t{ label: \"内联\", value: \"inline\" },\r\n\t\t\t\t\t\t\t\t{ label: \"纵向\", value: \"vertical\" },\r\n\t\t\t\t\t\t\t\t{ label: \"横向\", value: \"horizontal\" },\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tonChange: e => {\r\n\t\t\t\t\t\t\tconst groups = formViewerRef.current.getFormGroups();\r\n\t\t\t\t\t\t\tformViewerRef.current.setFormGroups(\r\n\t\t\t\t\t\t\t\tgroups.map(item => {\r\n\t\t\t\t\t\t\t\t\treturn { ...item, labelLayout: e.target.value };\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\toptions: controls[\"9\"].getOptions({\r\n\t\t\t\tinitialValue: formData.labelLayout,\r\n\t\t\t}),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"buttons\",\r\n\t\t\tlabel: null,\r\n\t\t\tspan: 10,\r\n\t\t\trender: () => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"z-text-right\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tclassName=\"z-margin-right-12\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tcommitFormData(formViewerRef, layoutFormRef, linkageRef, newFormData => {\r\n\t\t\t\t\t\t\t\t\tshowModal({\r\n\t\t\t\t\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t\t\t\t\t\tmodal: \"linkageConfigModal\",\r\n\t\t\t\t\t\t\t\t\t\tcontent: (\r\n\t\t\t\t\t\t\t\t\t\t\t<LinkageConfig\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewFormData={newFormData}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={linkageRef.current}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={newLinkages => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(newLinkages));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlinkageRef.current = newLinkages;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t联动配置\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tclassName=\"z-margin-right-12\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tcommitFormData(formViewerRef, layoutFormRef, linkageRef, newFormData => {\r\n\t\t\t\t\t\t\t\t\tlayerRef.current.methods.showLayer(\r\n\t\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\t\t\t\tshowViewerRef.current.setFormData(newFormData);\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\t)();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t预览\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tclassName=\"z-margin-right-12\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tcommitFormData(formViewerRef, layoutFormRef, linkageRef, onSave);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"description\",\r\n\t\t\tlabel: \"描述\",\r\n\t\t\tspan: 24,\r\n\t\t\trender: (form, changeFormItems) => {\r\n\t\t\t\treturn controls[\"2\"].getControl();\r\n\t\t\t},\r\n\t\t\toptions: controls[\"2\"].getOptions({\r\n\t\t\t\trequired: false,\r\n\t\t\t\tinitialValue: formData.description,\r\n\t\t\t}),\r\n\t\t},\r\n\t]);\r\n\treturn itemsRef.current;\r\n}\r\n\r\nfunction openUpdateControl(showModal, groupId, formViewerRef, linkageRef, formItem, type) {\r\n\tshowModal({\r\n\t\tshow: true,\r\n\t\tmodal: \"controlProtoModal\",\r\n\t\tcontent: (\r\n\t\t\t<AddColForm\r\n\t\t\t\tgroupId={groupId}\r\n\t\t\t\tformItem={formItem}\r\n\t\t\t\tformViewerRef={formViewerRef}\r\n\t\t\t\tlinkageRef={linkageRef}\r\n\t\t\t\ttype={type}\r\n\t\t\t/>\r\n\t\t),\r\n\t\twidth: \"800px\",\r\n\t});\r\n}\r\n\r\nfunction setNewCurrentGroupItems(formViewerRef, item, action) {\r\n\tconst groups = formViewerRef.current.getFormGroups();\r\n\tconst groupRefIndex = groups.findIndex(g => g.id == item.groupId);\r\n\tconst groupRef = groups[groupRefIndex].groupRef;\r\n\tconst currentItems = groupRef.current.getFormItems().slice(0);\r\n\tconst i = currentItems.findIndex(o => o.key == item.key);\r\n\tconst newItems = typeof action === \"function\" ? action(currentItems, i) : currentItems;\r\n\tgroupRef.current.setFormItems(newItems);\r\n}\r\n\r\nfunction useFormProps(showModal, formViewerRef, linkageRef) {\r\n\treturn useRef({\r\n\t\tcolContentRender: (item, form) => {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"z-live-tool\">\r\n\t\t\t\t\t<div style={{ width: \"40%\" }} className=\"z-padding-left-10\">\r\n\t\t\t\t\t\t<Slider\r\n\t\t\t\t\t\t\tmin={2}\r\n\t\t\t\t\t\t\tmax={24}\r\n\t\t\t\t\t\t\tdefaultValue={item.span}\r\n\t\t\t\t\t\t\tonAfterChange={value => {\r\n\t\t\t\t\t\t\t\tsetNewCurrentGroupItems(formViewerRef, item, function(currentItems, i) {\r\n\t\t\t\t\t\t\t\t\tcurrentItems[i][\"span\"] = value;\r\n\t\t\t\t\t\t\t\t\treturn currentItems;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Tooltip placement=\"top\" title=\"移除控件\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName=\"z-live-tool-item right-item delete\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tModal.confirm({\r\n\t\t\t\t\t\t\t\t\t\ttitle: `确认移除[${item.label}]这个控件吗?`,\r\n\t\t\t\t\t\t\t\t\t\tokText: \"确定\",\r\n\t\t\t\t\t\t\t\t\t\tcancelText: \"取消\",\r\n\t\t\t\t\t\t\t\t\t\tonOk() {\r\n\t\t\t\t\t\t\t\t\t\t\tsetNewCurrentGroupItems(formViewerRef, item, function(currentItems, i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlinkageRef.current&&removeSomeLinkage(linkageRef, currentItems[i].fieldKey);\r\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentItems.splice(i, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn currentItems;\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon type=\"delete\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t<Tooltip placement=\"top\" title=\"修改控件\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName=\"z-live-tool-item right-item\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\topenUpdateControl(\r\n\t\t\t\t\t\t\t\t\t\tshowModal,\r\n\t\t\t\t\t\t\t\t\t\titem.groupId,\r\n\t\t\t\t\t\t\t\t\t\tformViewerRef,\r\n\t\t\t\t\t\t\t\t\t\tlinkageRef,\r\n\t\t\t\t\t\t\t\t\t\titem,\r\n\t\t\t\t\t\t\t\t\t\t\"update\",\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon type=\"form\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t<div className=\"z-live-tool-item right-item\">\r\n\t\t\t\t\t\t\t<i className=\"zero-icon zerod-move\" data-handle=\"handle\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t},\r\n\t\tsubmitBtnRender: (onSubmit, props) => {\r\n\t\t\treturn (\r\n\t\t\t\t<Col\r\n\t\t\t\t\tspan={24}\r\n\t\t\t\t\tdata-groupid={props.group.id}\r\n\t\t\t\t\tclassName=\"z-text-center z-margin-bottom-10 z-add-formitem-btn\"\r\n\t\t\t\t\tstyle={{ padding: \"15px 0\", marginTop: \"20px\", cursor: \"pointer\" }}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\topenUpdateControl(showModal, props.group.id, formViewerRef, linkageRef, null, \"add\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Icon type=\"plus\" /> 添加控件\r\n\t\t\t\t</Col>\r\n\t\t\t);\r\n\t\t},\r\n\t}).current;\r\n}\r\nfunction getParentElement(el) {\r\n\tlet _pE = el.parentElement;\r\n\twhile (_pE && !_pE.className.includes(\"z-form-row\")) {\r\n\t\t_pE = el.parentElement;\r\n\t}\r\n\treturn _pE;\r\n}\r\n\r\nfunction getGroupIndex(formViewerRef, group) {\r\n\tconst groups = formViewerRef.current.getFormGroups();\r\n\tconst index = groups.findIndex(g => {\r\n\t\treturn g.id === group.id;\r\n\t});\r\n\tconst newGroups = groups.slice(0);\r\n\treturn [newGroups, index];\r\n}\r\n\r\nfunction getNewGroupData(labelLayout, groupnameNumRef) {\r\n\tconst item = {\r\n\t\tadditive: true,\r\n\t\tname: `组名-${groupnameNumRef.current}`,\r\n\t\tid: GenNonDuplicateID(),\r\n\t\tformFieldInfoList: [],\r\n\t\tlabelLayout,\r\n\t};\r\n\tgroupnameNumRef.current++;\r\n\treturn item;\r\n}\r\n\r\nconst propTypes = {\r\n\tformData: PropTypes.object,\r\n\tonSave: PropTypes.func,\r\n\tshowRightModal: PropTypes.func,\r\n\tshowLayerRightModal: PropTypes.func,\r\n};\r\nconst defaultProps = {\r\n\tformData: {},\r\n};\r\n\r\nconst ShowFormViewer = React.memo(\r\n\tReact.forwardRef(function(props, ref) {\r\n\t\tconst [formData, setFormData] = useState(null);\r\n\t\tuseImperativeHandle(ref, () => {\r\n\t\t\treturn {\r\n\t\t\t\tsetFormData,\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn formData ? (\r\n\t\t\t<div style={{ width: \"90%\", margin: \"0 auto\" }}>\r\n\t\t\t\t<FormViewer formData={formData} />\r\n\t\t\t</div>\r\n\t\t) : (\r\n\t\t\t<div style={{ height: \"100px\" }} />\r\n\t\t);\r\n\t}),\r\n);\r\n\r\nconst ZliveForm = ZerodMainContext.setConsumer(\r\n\tZerodLayerContext.setConsumer(function LiveForm({ formData, onSave, showRightModal, showLayerRightModal }) {\r\n\t\tconst groupnameNumRef = useRef(1);\r\n\t\tconst layerRef = useRef(null);\r\n\t\tconst linkageRef = useRef(null);\r\n\t\tconst showViewerRef = useRef(null);\r\n\t\tconst layoutFormRef = useRef(null);\r\n\t\t//取FormViewer的实例\r\n\t\tconst formViewerRef = useRef(null);\r\n\t\t//打开modal的方法\r\n\t\tconst showModal = dataType.isFunction(showRightModal)\r\n\t\t\t? showRightModal\r\n\t\t\t: dataType.isFunction(showLayerRightModal)\r\n\t\t\t? showLayerRightModal\r\n\t\t\t: () => {};\r\n\t\tif (!formData.sectionList || !formData.sectionList.length) {\r\n\t\t\tformData.sectionList = [getNewGroupData(formData.labelLayout, groupnameNumRef)];\r\n\t\t}\r\n\t\t//当前Zform的items\r\n\t\tconst formRenderedRef = useRef(false);\r\n\t\tconst items = useGetItems(\r\n\t\t\tformData,\r\n\t\t\tformViewerRef,\r\n\t\t\tlayoutFormRef,\r\n\t\t\tshowModal,\r\n\t\t\tonSave,\r\n\t\t\tlayerRef,\r\n\t\t\tshowViewerRef,\r\n\t\t\tformRenderedRef,\r\n\t\t\tlinkageRef,\r\n\t\t);\r\n\t\t//FormGroup里面Zform的扩展属性\r\n\t\tconst formProps = useFormProps(showModal, formViewerRef, linkageRef);\r\n\t\t//存dragula的实例\r\n\t\tconst drakeRef = useRef(null);\r\n\t\t//存拖动元素下一个元素\r\n\t\tconst nextSiblingRef = useRef(null);\r\n\t\t//动态表单组变化的回调\r\n\t\tconst onFormGroupsChange = useCallback(\r\n\t\t\tformGroups => {\r\n\t\t\t\tif (!drakeRef.current) {\r\n\t\t\t\t\tif (formGroups.length) {\r\n\t\t\t\t\t\tdrakeRef.current = dragula(\r\n\t\t\t\t\t\t\tformGroups.map(g => {\r\n\t\t\t\t\t\t\t\treturn g.groupRef.current.getWrapperDom().querySelector(\".z-form-row\");\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tremoveOnSpill: false,\r\n\t\t\t\t\t\t\t\trevertOnSpill: true,\r\n\t\t\t\t\t\t\t\tdirection: \"mixed\",\r\n\t\t\t\t\t\t\t\tcopy: false,\r\n\t\t\t\t\t\t\t\tcopySortSource: false,\r\n\t\t\t\t\t\t\t\taccepts: function(el, target, source, sibling) {\r\n\t\t\t\t\t\t\t\t\t//因为 z-add-formitem-btn 按钮是target/source最后一个子元素，也就是没有sibling时是不能被停放的\r\n\t\t\t\t\t\t\t\t\tif (!sibling) {\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tmoves: function(el, source, handle, sibling) {\r\n\t\t\t\t\t\t\t\t\treturn handle.dataset.handle == \"handle\";\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.on(\"cloned\", (cloneEl, sourceEl, type) => {\r\n\t\t\t\t\t\t\t\tnextSiblingRef.current = sourceEl.nextElementSibling;\r\n\t\t\t\t\t\t\t\tconst _parEl = getParentElement(sourceEl);\r\n\t\t\t\t\t\t\t\tcloneEl.className += ` z-live-form-item-clone ${_parEl.className.slice(\r\n\t\t\t\t\t\t\t\t\t/z\\-form\\-label\\-/g.exec(_parEl.className).index,\r\n\t\t\t\t\t\t\t\t)}`;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.on(\"drop\", function(el, target, source, sibling) {\r\n\t\t\t\t\t\t\t\tconst groups = formViewerRef.current.getFormGroups();\r\n\t\t\t\t\t\t\t\tconst currentItem = JSON.parse(el.dataset.item);\r\n\t\t\t\t\t\t\t\tconst currentGroup = groups.find(g => {\r\n\t\t\t\t\t\t\t\t\treturn g.id == currentItem.groupId;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tconst newFormItems = currentGroup.groupRef.current.getFormItems().slice(0);\r\n\t\t\t\t\t\t\t\tconst currentindex = newFormItems.findIndex(item => {\r\n\t\t\t\t\t\t\t\t\treturn item.key == currentItem.key;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tconst currentFormitem = newFormItems[currentindex];\r\n\t\t\t\t\t\t\t\tif (target === source) {\r\n\t\t\t\t\t\t\t\t\tif (sibling.dataset.item) {\r\n\t\t\t\t\t\t\t\t\t\tconst siblingItem = JSON.parse(sibling.dataset.item);\r\n\t\t\t\t\t\t\t\t\t\tconst sibingindex = newFormItems.findIndex(item => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn item.key == siblingItem.key;\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tif (currentindex < sibingindex) {\r\n\t\t\t\t\t\t\t\t\t\t\tnewFormItems.splice(sibingindex, 0, currentFormitem);\r\n\t\t\t\t\t\t\t\t\t\t\tnewFormItems.splice(currentindex, 1);\r\n\t\t\t\t\t\t\t\t\t\t} else if (currentindex > sibingindex) {\r\n\t\t\t\t\t\t\t\t\t\t\tnewFormItems.splice(currentindex, 1);\r\n\t\t\t\t\t\t\t\t\t\t\tnewFormItems.splice(sibingindex, 0, currentFormitem);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tnewFormItems.splice(currentindex, 1);\r\n\t\t\t\t\t\t\t\t\t\tnewFormItems.push(currentFormitem);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tcurrentGroup.groupRef.current.setFormItems(newFormItems);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tlet targetGroup = null;\r\n\t\t\t\t\t\t\t\t\tlet targetFormItems = [];\r\n\t\t\t\t\t\t\t\t\tif (sibling.dataset.item) {\r\n\t\t\t\t\t\t\t\t\t\tconst siblingItem = JSON.parse(sibling.dataset.item);\r\n\r\n\t\t\t\t\t\t\t\t\t\ttargetGroup = groups.find(g => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn g.id == siblingItem.groupId;\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\ttargetFormItems = targetGroup.groupRef.current.getFormItems().slice(0);\r\n\t\t\t\t\t\t\t\t\t\tconst sibingindex = targetFormItems.findIndex(item => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn item.key == siblingItem.key;\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tcurrentFormitem.groupId = siblingItem.groupId;\r\n\t\t\t\t\t\t\t\t\t\ttargetFormItems.splice(sibingindex, 0, currentFormitem);\r\n\t\t\t\t\t\t\t\t\t} else if (sibling.dataset.groupid) {\r\n\t\t\t\t\t\t\t\t\t\ttargetGroup = groups.find(g => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn g.id == sibling.dataset.groupid;\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\ttargetFormItems = targetGroup.groupRef.current.getFormItems().slice(0);\r\n\t\t\t\t\t\t\t\t\t\tcurrentFormitem.groupId = sibling.dataset.groupid;\r\n\t\t\t\t\t\t\t\t\t\ttargetFormItems.push(currentFormitem);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (targetGroup) {\r\n\t\t\t\t\t\t\t\t\t\ttarget.removeChild(el);\r\n\t\t\t\t\t\t\t\t\t\tsource.appendChild(el);\r\n\t\t\t\t\t\t\t\t\t\t// console.log(target,source)\r\n\t\t\t\t\t\t\t\t\t\tnewFormItems.splice(currentindex, 1);\r\n\t\t\t\t\t\t\t\t\t\ttargetGroup.groupRef.current.setFormItems(targetFormItems);\r\n\t\t\t\t\t\t\t\t\t\tcurrentGroup.groupRef.current.setFormItems(newFormItems);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdrakeRef.current.containers = formGroups.map(g => {\r\n\t\t\t\t\t\treturn g.groupRef.current.getWrapperDom().querySelector(\".z-form-row\");\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t[drakeRef.current, formViewerRef.current, nextSiblingRef.current],\r\n\t\t);\r\n\t\tconst getFormInstance = useCallback(\r\n\t\t\tform => {\r\n\t\t\t\tlayoutFormRef.current = form;\r\n\t\t\t},\r\n\t\t\t[layoutFormRef.current],\r\n\t\t);\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<FormContext.Provider value={formProps}>\r\n\t\t\t\t\t<div className=\"z-panel\">\r\n\t\t\t\t\t\t<div className=\"z-panel-body z-padding-bottom-0-important\">\r\n\t\t\t\t\t\t\t<Zform\r\n\t\t\t\t\t\t\t\titems={items}\r\n\t\t\t\t\t\t\t\tlabelLayout=\"inline\"\r\n\t\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\r\n\t\t\t\t\t\t\t\tsubmitBtnName=\"\"\r\n\t\t\t\t\t\t\t\tgetFormInstance={getFormInstance}\r\n\t\t\t\t\t\t\t\tafterItemsRendered={() => {\r\n\t\t\t\t\t\t\t\t\tformRenderedRef.current = true;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<FormViewer\r\n\t\t\t\t\t\tonFormGroupsChange={onFormGroupsChange}\r\n\t\t\t\t\t\tref={formViewerRef}\r\n\t\t\t\t\t\tclassName=\"z-live-form\"\r\n\t\t\t\t\t\tformData={formData}\r\n\t\t\t\t\t\ttitle={false}\r\n\t\t\t\t\t\tlinkage={false}\r\n\t\t\t\t\t\tgroupTitleLeftRender={(group, stateGroupName, onGroupNameChange, groups) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<GroupNameEdit\r\n\t\t\t\t\t\t\t\t\tvalue={stateGroupName}\r\n\t\t\t\t\t\t\t\t\tonChange={val => {\r\n\t\t\t\t\t\t\t\t\t\tconst hasindex = groups.findIndex(item => item.name === val);\r\n\t\t\t\t\t\t\t\t\t\tif (hasindex > -1) {\r\n\t\t\t\t\t\t\t\t\t\t\tmessage.error(\"组名不能与其他组名相同\");\r\n\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonGroupNameChange(val);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tgroupTitleRightRender={group => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<InsertGroupBtns\r\n\t\t\t\t\t\t\t\t\t\tonInsertUp={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst [newGroups, index] = getGroupIndex(formViewerRef, group);\r\n\t\t\t\t\t\t\t\t\t\t\tconst groupItem = getGroupItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetNewGroupData(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlayoutFormRef.current.getFieldValue(\"labelLayout\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroupnameNumRef,\r\n\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\tif (index === 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewGroups.unshift(groupItem);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewGroups.splice(index, 0, groupItem);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tformViewerRef.current.setFormGroups(newGroups);\r\n\t\t\t\t\t\t\t\t\t\t\tmessage.success(\"向上插入组成功\");\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonInsertDown={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst [newGroups, index] = getGroupIndex(formViewerRef, group);\r\n\t\t\t\t\t\t\t\t\t\t\tconst groupItem = getGroupItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetNewGroupData(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlayoutFormRef.current.getFieldValue(\"labelLayout\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroupnameNumRef,\r\n\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\tif (index === newGroups.length - 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewGroups.push(groupItem);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewGroups.splice(index + 1, 0, groupItem);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tformViewerRef.current.setFormGroups(newGroups);\r\n\t\t\t\t\t\t\t\t\t\t\tmessage.success(\"向下插入组成功\");\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<GroupMoveBtns\r\n\t\t\t\t\t\t\t\t\t\tonMoveUp={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst [newGroups, index] = getGroupIndex(formViewerRef, group);\r\n\t\t\t\t\t\t\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewGroups.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewGroups.splice(index - 1, 0, group);\r\n\t\t\t\t\t\t\t\t\t\t\t\tformViewerRef.current.setFormGroups(newGroups);\r\n\t\t\t\t\t\t\t\t\t\t\t\tmessage.success(\"上移成功\");\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonMoveDown={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst [newGroups, index] = getGroupIndex(formViewerRef, group);\r\n\t\t\t\t\t\t\t\t\t\t\tif (index > -1 && index < newGroups.length - 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewGroups.splice(index + 2, 0, group);\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewGroups.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\tformViewerRef.current.setFormGroups(newGroups);\r\n\t\t\t\t\t\t\t\t\t\t\t\tmessage.success(\"下移成功\");\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonRemove={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tModal.confirm({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: `确认移除[${group.name}]这个组吗?`,\r\n\t\t\t\t\t\t\t\t\t\t\t\tokText: \"确定\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tcancelText: \"取消\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tonOk() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst [newGroups, index] = getGroupIndex(formViewerRef, group);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (newGroups.length === 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.warning(\"最后一组不能移除\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewGroups.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tformViewerRef.current.setFormGroups(newGroups);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.success(\"移除成功\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Tag color={group.additive ? \"blue\" : \"magenta\"}>\r\n\t\t\t\t\t\t\t\t\t\t{group.additive ? `新增` : `ID${group[\"id\"]}`}\r\n\t\t\t\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormContext.Provider>\r\n\t\t\t\t<ZfullLayer ref={layerRef}>\r\n\t\t\t\t\t<ShowFormViewer ref={showViewerRef} />\r\n\t\t\t\t</ZfullLayer>\r\n\t\t\t</>\r\n\t\t);\r\n\t}),\r\n);\r\nZliveForm.propTypes = propTypes;\r\nZliveForm.defaultProps = defaultProps;\r\nZliveForm.FormViewer = FormViewer;\r\nexport default ZliveForm;\r\n","export default {\r\n\tid: 785,\r\n\tname: \"请假流程申请表单\",\r\n\tcode: \"leave_flow_start_form\",\r\n\tversion: 3,\r\n\tseq: 0,\r\n\tdescription: \"请假流程申请表单\",\r\n\tconfiguration: null,\r\n\tlinkages: null,\r\n\tcustomOnChange: null,\r\n\tformTypeId: null,\r\n\tgmtCreate: \"2019-07-16 09:46:04\",\r\n\tgmtModified: \"2019-07-16 09:46:04\",\r\n\tsectionList: [\r\n\t\t{\r\n\t\t\tid: 850,\r\n\t\t\tformId: 785,\r\n\t\t\tname: \"基本信息\",\r\n\t\t\tseq: 1,\r\n\t\t\tdescription: null,\r\n\t\t\tgmtCreate: \"2019-07-16 09:46:04\",\r\n\t\t\tgmtModified: \"2019-07-16 09:46:04\",\r\n\t\t\tformFieldInfoList: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 2759,\r\n\t\t\t\t\tsectionId: 850,\r\n\t\t\t\t\tlabel: \"请假类型\",\r\n\t\t\t\t\tfieldKey: \"leaveType\",\r\n\t\t\t\t\tfieldType: 3,\r\n\t\t\t\t\trequired: 1,\r\n\t\t\t\t\tdisabled: 0,\r\n\t\t\t\t\tregularExpression: null,\r\n\t\t\t\t\tdescription: null,\r\n\t\t\t\t\terrorMsg: null,\r\n\t\t\t\t\tplaceholder: null,\r\n\t\t\t\t\tspan: 12,\r\n\t\t\t\t\tlabelWidth: null,\r\n\t\t\t\t\tconfig:\r\n\t\t\t\t\t\t'{\"selectionsType\":1,\"selectListFieldNames\":{\"label\":\"label\",\"value\":\"value\",\"children\":\"children\"},\"selectList\":[{\"id\":\"808501111562919900000\",\"label\":\"事假\",\"value\":\"1\"},{\"id\":\"609364761562920100000\",\"label\":\"病假\",\"value\":\"2\"},{\"id\":\"244347411562920180000\",\"label\":\"年休假\",\"value\":\"3\"},{\"id\":\"201580921562920160000\",\"label\":\"婚假\",\"value\":\"4\"},{\"id\":\"775874771562920100000\",\"label\":\"调休\",\"value\":\"5\"},{\"id\":\"509046801562920160000\",\"label\":\"产假及看护假\",\"value\":\"6\"}],\"selectionsQuery\":{}}',\r\n\t\t\t\t\tinitialValue: null,\r\n\t\t\t\t\tseq: 1,\r\n\t\t\t\t\tgmtCreate: \"2019-07-16 09:46:04\",\r\n\t\t\t\t\tgmtModified: \"2019-07-16 09:46:04\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 2760,\r\n\t\t\t\t\tsectionId: 850,\r\n\t\t\t\t\tlabel: \"请假小时\",\r\n\t\t\t\t\tfieldKey: \"hours\",\r\n\t\t\t\t\tfieldType: 4,\r\n\t\t\t\t\trequired: 1,\r\n\t\t\t\t\tdisabled: 0,\r\n\t\t\t\t\tregularExpression: null,\r\n\t\t\t\t\tdescription: null,\r\n\t\t\t\t\terrorMsg: null,\r\n\t\t\t\t\tplaceholder: null,\r\n\t\t\t\t\tspan: 12,\r\n\t\t\t\t\tlabelWidth: null,\r\n\t\t\t\t\tconfig: \"{}\",\r\n\t\t\t\t\tinitialValue: null,\r\n\t\t\t\t\tseq: 2,\r\n\t\t\t\t\tgmtCreate: \"2019-07-16 09:46:04\",\r\n\t\t\t\t\tgmtModified: \"2019-07-16 09:46:04\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 2761,\r\n\t\t\t\t\tsectionId: 850,\r\n\t\t\t\t\tlabel: \"开始时间\",\r\n\t\t\t\t\tfieldKey: \"beginTime\",\r\n\t\t\t\t\tfieldType: 5,\r\n\t\t\t\t\trequired: 1,\r\n\t\t\t\t\tdisabled: 0,\r\n\t\t\t\t\tregularExpression: null,\r\n\t\t\t\t\tdescription: null,\r\n\t\t\t\t\terrorMsg: null,\r\n\t\t\t\t\tplaceholder: null,\r\n\t\t\t\t\tspan: 12,\r\n\t\t\t\t\tlabelWidth: null,\r\n\t\t\t\t\tconfig: '{\"format\":\"YYYY-MM-DD HH:mm\"}',\r\n\t\t\t\t\tinitialValue: null,\r\n\t\t\t\t\tseq: 3,\r\n\t\t\t\t\tgmtCreate: \"2019-07-16 09:46:04\",\r\n\t\t\t\t\tgmtModified: \"2019-07-16 09:46:04\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 2762,\r\n\t\t\t\t\tsectionId: 850,\r\n\t\t\t\t\tlabel: \"结束时间\",\r\n\t\t\t\t\tfieldKey: \"finishTime\",\r\n\t\t\t\t\tfieldType: 5,\r\n\t\t\t\t\trequired: 1,\r\n\t\t\t\t\tdisabled: 0,\r\n\t\t\t\t\tregularExpression: null,\r\n\t\t\t\t\tdescription: null,\r\n\t\t\t\t\terrorMsg: null,\r\n\t\t\t\t\tplaceholder: null,\r\n\t\t\t\t\tspan: 12,\r\n\t\t\t\t\tlabelWidth: null,\r\n\t\t\t\t\tconfig: '{\"format\":\"YYYY-MM-DD HH:mm\"}',\r\n\t\t\t\t\tinitialValue: null,\r\n\t\t\t\t\tseq: 4,\r\n\t\t\t\t\tgmtCreate: \"2019-07-16 09:46:04\",\r\n\t\t\t\t\tgmtModified: \"2019-07-16 09:46:04\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 2763,\r\n\t\t\t\t\tsectionId: 850,\r\n\t\t\t\t\tlabel: \"申请理由\",\r\n\t\t\t\t\tfieldKey: \"reason\",\r\n\t\t\t\t\tfieldType: 2,\r\n\t\t\t\t\trequired: 1,\r\n\t\t\t\t\tdisabled: 0,\r\n\t\t\t\t\tregularExpression: null,\r\n\t\t\t\t\tdescription: null,\r\n\t\t\t\t\terrorMsg: null,\r\n\t\t\t\t\tplaceholder: null,\r\n\t\t\t\t\tspan: 24,\r\n\t\t\t\t\tlabelWidth: null,\r\n\t\t\t\t\tconfig: \"{}\",\r\n\t\t\t\t\tinitialValue: null,\r\n\t\t\t\t\tseq: 5,\r\n\t\t\t\t\tgmtCreate: \"2019-07-16 09:46:04\",\r\n\t\t\t\t\tgmtModified: \"2019-07-16 09:46:04\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 2764,\r\n\t\t\t\t\tsectionId: 850,\r\n\t\t\t\t\tlabel: \"附件\",\r\n\t\t\t\t\tfieldKey: \"fileList\",\r\n\t\t\t\t\tfieldType: 11,\r\n\t\t\t\t\trequired: 0,\r\n\t\t\t\t\tdisabled: 0,\r\n\t\t\t\t\tregularExpression: null,\r\n\t\t\t\t\tdescription: null,\r\n\t\t\t\t\terrorMsg: null,\r\n\t\t\t\t\tplaceholder: null,\r\n\t\t\t\t\tspan: 24,\r\n\t\t\t\t\tlabelWidth: null,\r\n\t\t\t\t\tconfig:\r\n\t\t\t\t\t\t'{\"url\":\"/file-upload-service/webapi/v1.0/fileUpload/uploads\",\"urlMethod\":\"post\",\"urlParamName\":\"files\"}',\r\n\t\t\t\t\tinitialValue: null,\r\n\t\t\t\t\tseq: 6,\r\n\t\t\t\t\tgmtCreate: \"2019-07-16 09:46:04\",\r\n\t\t\t\t\tgmtModified: \"2019-07-16 09:46:04\",\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t],\r\n\tbuttonList: [],\r\n};\r\n// export default {\r\n// \tcode: \"dog_check_in_form\",\r\n// \tname: \"养犬信息登记表\",\r\n// \tlabelLayout: \"inline\",\r\n// \tsectionList: [\r\n// \t\t{\r\n// \t\t\tid: 111,\r\n// \t\t\tname: \"犬只信息\",\r\n// \t\t\tformFieldInfoList: [\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"dogName\",\r\n// \t\t\t\t\tfieldType: 1,\r\n// \t\t\t\t\tid: 466,\r\n// \t\t\t\t\tconfig: '{\"maxLength\":8,\"minLength\":1}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"犬只名称\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 111,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 1,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"dogType\",\r\n// \t\t\t\t\tfieldType: 1,\r\n// \t\t\t\t\tid: 467,\r\n// \t\t\t\t\tconfig: '{\"maxLength\":16,\"minLength\":1}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"犬只品种\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 111,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 2,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"dogSex\",\r\n// \t\t\t\t\tfieldType: 9,\r\n// \t\t\t\t\tid: 468,\r\n// \t\t\t\t\tconfig: '{\"selectList\":[{\"label\":\"公\",\"value\":\"1\"},{\"label\":\"母\",\"value\":\"2\"}]}',\r\n// \t\t\t\t\tinitialValue: \"1\",\r\n// \t\t\t\t\tlabel: \"犬只性别\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 111,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 3,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"dogProperty\",\r\n// \t\t\t\t\tfieldType: 3,\r\n// \t\t\t\t\tid: 469,\r\n// \t\t\t\t\tconfig:\r\n// \t\t\t\t\t\t'{\"selectList\":[{\"label\":\"普通宠物\",\"value\":\"1\"},{\"label\":\"导盲犬/扶助犬\",\"value\":\"2\"},{\"label\":\"其他\",\"value\":\"3\"}]}',\r\n// \t\t\t\t\tdisabled: true,\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"犬只性质\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 111,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 4,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"dogColor\",\r\n// \t\t\t\t\tfieldType: 1,\r\n// \t\t\t\t\tid: 470,\r\n// \t\t\t\t\tconfig: '{\"maxLength\":8,\"minLength\":1}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"犬只颜色\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 111,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 5,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"isIris\",\r\n// \t\t\t\t\tfieldType: 9,\r\n// \t\t\t\t\tid: 471,\r\n// \t\t\t\t\tconfig: '{\"selectList\":[{\"label\":\"是\",\"value\":\"1\"},{\"label\":\"否\",\"value\":\"2\"}]}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"录入虹膜\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 111,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 6,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"rfid\",\r\n// \t\t\t\t\tfieldType: 9,\r\n// \t\t\t\t\tid: 472,\r\n// \t\t\t\t\tconfig: '{\"selectList\":[{\"label\":\"是\",\"value\":\"1\"},{\"label\":\"否\",\"value\":\"2\"}]}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"电子标签\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 111,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 7,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"birthday\",\r\n// \t\t\t\t\tfieldType: 5,\r\n// \t\t\t\t\tid: 473,\r\n// \t\t\t\t\tconfig: '{\"format\":\"YYYY-MM-DD\"}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"出生日期\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 111,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 8,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"pic\",\r\n// \t\t\t\t\tfieldType: 11,\r\n// \t\t\t\t\tid: 474,\r\n// \t\t\t\t\tconfig:\r\n// \t\t\t\t\t\t'{\"url\":\"/file-upload-service/webapi/v1.0/fileUpload/uploads\",\"accept\":\"87887878\",\"multiple\":false,\"paramName\":\"7878\",\"detailUrl\":\"/file-upload-service/webapi/v1.0/fileUpload/listUploadInfoByIds\"}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"上传文件\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 111,\r\n// \t\t\t\t\tspan: 24,\r\n// \t\t\t\t\tseq: 9,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"weihubs\",\r\n// \t\t\t\t\tfieldType: 3,\r\n// \t\t\t\t\tconfig:\r\n// \t\t\t\t\t\t'{\"selectionsType\":2,\"selectListFieldNames\":{\"label\":\"deptName\",\"value\":\"id\",\"children\":\"children\"},\"selectionsUrl\":{\"selectionsUrlMethod\":\"post\",\"selectionsUrl\":\"/tibmas2-webapi/api/v1.0/dept/listDeptByPid\",\"requireType\":\"all\"},\"selectionsQuery\":{\"id\":\"0\"}}',\r\n// \t\t\t\t\tdisabled: 0,\r\n// \t\t\t\t\tlabel: \"下拉控件\",\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 10,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"double\",\r\n// \t\t\t\t\tfieldType: 8,\r\n// \t\t\t\t\tconfig:\r\n// \t\t\t\t\t\t'{\"selectionsType\":2,\"selectListFieldNames\":{\"label\":\"deptName\",\"value\":\"id\",\"children\":\"children\"},\"selectionsUrl\":{\"selectionsUrlMethod\":\"post\",\"selectionsUrl\":\"/tibmas2-webapi/api/v1.0/dept/listDeptByPid\",\"requireType\":\"all\"},\"selectionsQuery\":{\"id\":\"0\"}}',\r\n// \t\t\t\t\tdisabled: 0,\r\n// \t\t\t\t\tlabel: \"多选\",\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 11,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"single\",\r\n// \t\t\t\t\tfieldType: 9,\r\n// \t\t\t\t\tconfig:\r\n// \t\t\t\t\t\t'{\"selectionsType\":2,\"selectListFieldNames\":{\"label\":\"deptName\",\"value\":\"id\",\"children\":\"children\"},\"selectionsUrl\":{\"selectionsUrlMethod\":\"post\",\"selectionsUrl\":\"/tibmas2-webapi/api/v1.0/dept/listDeptByPid\",\"requireType\":\"all\"},\"selectionsQuery\":{\"id\":\"0\"}}',\r\n// \t\t\t\t\tdisabled: 0,\r\n// \t\t\t\t\tlabel: \"单选\",\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 12,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"casserole\",\r\n// \t\t\t\t\tfieldType: 6,\r\n// \t\t\t\t\tconfig:\r\n// \t\t\t\t\t\t'{\"selectionsType\":2,\"selectListFieldNames\":{\"label\":\"deptName\",\"value\":\"id\",\"children\":\"children\"},\"selectionsUrl\":{\"selectionsUrlMethod\":\"post\",\"selectionsUrl\":\"/tibmas2-webapi/api/v1.0/dept/listDeptByPid\",\"requireType\":\"part\"},\"selectionsQuery\":{\"id\":\"0\"},\"changeOnSelect\":0}',\r\n// \t\t\t\t\tdisabled: 0,\r\n// \t\t\t\t\tlabel: \"级联控件\",\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 13,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"treeSelect\",\r\n// \t\t\t\t\tfieldType: 7,\r\n// \t\t\t\t\tconfig:\r\n// \t\t\t\t\t\t'{\"selectionsType\":2,\"selectListFieldNames\":{\"label\":\"deptName\",\"value\":\"id\",\"children\":\"children\"},\"selectionsUrl\":{\"selectionsUrlMethod\":\"post\",\"selectionsUrl\":\"/tibmas2-webapi/api/v1.0/dept/listDeptByPid\",\"requireType\":\"part\"},\"selectionsQuery\":{\"id\":\"0\"}}',\r\n// \t\t\t\t\tdisabled: 0,\r\n// \t\t\t\t\tlabel: \"tree控件\",\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 14,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"asyncTests\",\r\n// \t\t\t\t\tfieldType: 3,\r\n// \t\t\t\t\tconfig:\r\n// \t\t\t\t\t\t'{\"selectionsType\":2,\"selectListFieldNames\":{\"label\":\"itemName\",\"value\":\"id\",\"children\":\"children\"},\"selectionsUrl\":{\"selectionsUrlMethod\":\"post\",\"selectionsUrl\":\"/system-service/webapi/sysDictionary/listByTypeCode\",\"requireType\":\"all\"},\"selectionsQuery\":{\"typeCode\":\"case_type\"}}',\r\n// \t\t\t\t\tdisabled: 0,\r\n// \t\t\t\t\tinitialValue: 8,\r\n// \t\t\t\t\tlabel: \"下拉测试异步\",\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 15,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"asyncYYYYYY\",\r\n// \t\t\t\t\tfieldType: 3,\r\n// \t\t\t\t\tconfig:\r\n// \t\t\t\t\t\t'{\"selectionsType\":2,\"selectListFieldNames\":{\"label\":\"itemName\",\"value\":\"id\",\"children\":\"children\"},\"selectionsUrl\":{\"selectionsUrlMethod\":\"post\",\"selectionsUrl\":\"/system-service/webapi/sysDictionary/listByParentId\",\"requireType\":\"all\"},\"selectionsQuery\":{\"id\":\"0\"}}',\r\n// \t\t\t\t\tdisabled: 0,\r\n// \t\t\t\t\tlabel: \"接收异步联动\",\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 16,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"yearssss\",\r\n// \t\t\t\t\tfieldType: 5,\r\n// \t\t\t\t\tconfig: '{\"format\":\"YYYY\"}',\r\n// \t\t\t\t\tdisabled: 0,\r\n// \t\t\t\t\tlabel: \"年份\",\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 17,\r\n// \t\t\t\t},\r\n// \t\t\t],\r\n// \t\t\tseq: 1,\r\n// \t\t},\r\n// \t\t{\r\n// \t\t\tid: 112,\r\n// \t\t\tname: \"养犬人信息\",\r\n// \t\t\tformFieldInfoList: [\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"name\",\r\n// \t\t\t\t\tfieldType: 1,\r\n// \t\t\t\t\tid: 475,\r\n// \t\t\t\t\tconfig: '{\"maxLength\":8,\"minLength\":1}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"养犬人姓名\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 112,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 1,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"type\",\r\n// \t\t\t\t\tfieldType: 3,\r\n// \t\t\t\t\tid: 476,\r\n// \t\t\t\t\tconfig: '{\"selectList\":[{\"label\":\"身份证\",\"value\":\"1\"},{\"label\":\"港澳通行证\",\"value\":\"2\"}]}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"证件类型\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 112,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 2,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"number\",\r\n// \t\t\t\t\tfieldType: 4,\r\n// \t\t\t\t\tid: 477,\r\n// \t\t\t\t\tconfig: '{\"decimalLength\":0}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"证件号码\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 112,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 3,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"tel\",\r\n// \t\t\t\t\tfieldType: 4,\r\n// \t\t\t\t\tid: 478,\r\n// \t\t\t\t\tconfig: '{\"decimalLength\":0}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"移动电话\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 112,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 4,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"telephone\",\r\n// \t\t\t\t\tfieldType: 1,\r\n// \t\t\t\t\tid: 479,\r\n// \t\t\t\t\tconfig: '{\"maxLength\":20,\"minLength\":1}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"固定电话\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 112,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 5,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"email\",\r\n// \t\t\t\t\tfieldType: 1,\r\n// \t\t\t\t\tid: 480,\r\n// \t\t\t\t\tconfig: '{\"maxLength\":20,\"minLength\":1}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"电子邮箱\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 112,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 6,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"dogCount\",\r\n// \t\t\t\t\tfieldType: 4,\r\n// \t\t\t\t\tid: 481,\r\n// \t\t\t\t\tconfig: '{\"decimalLength\":0}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"犬只数量\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 112,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 7,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"address\",\r\n// \t\t\t\t\tfieldType: 1,\r\n// \t\t\t\t\tid: 482,\r\n// \t\t\t\t\tconfig: '{\"maxLength\":50,\"minLength\":1}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"详细地址\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 112,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 8,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"domicile\",\r\n// \t\t\t\t\tfieldType: 3,\r\n// \t\t\t\t\tid: 483,\r\n// \t\t\t\t\tconfig:\r\n// \t\t\t\t\t\t'{\"selectList\":[{\"label\":\"自有\",\"value\":\"1\"},{\"label\":\"租赁\",\"value\":\"2\"},{\"label\":\"其他\",\"value\":\"3\"}]}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"住所性质\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 112,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 9,\r\n// \t\t\t\t},\r\n// \t\t\t],\r\n// \t\t\tseq: 2,\r\n// \t\t},\r\n// \t\t{\r\n// \t\t\tid: 113,\r\n// \t\t\tname: \"领取方式\",\r\n// \t\t\tformFieldInfoList: [\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"dogCard\",\r\n// \t\t\t\t\tfieldType: 1,\r\n// \t\t\t\t\tid: 484,\r\n// \t\t\t\t\tconfig: '{\"maxLength\":8,\"minLength\":1}',\r\n// \t\t\t\t\tinitialValue: \"电子犬证\",\r\n// \t\t\t\t\tlabel: \"电子犬证\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 113,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 1,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"isEntity\",\r\n// \t\t\t\t\tfieldType: 9,\r\n// \t\t\t\t\tid: 490,\r\n// \t\t\t\t\tconfig: '{\"selectList\":[{\"label\":\"是\",\"value\":\"1\"},{\"label\":\"否\",\"value\":\"2\"}]}',\r\n// \t\t\t\t\tinitialValue: \"2\",\r\n// \t\t\t\t\tlabel: \"是否需要实体卡\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 113,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 2,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"payment\",\r\n// \t\t\t\t\tfieldType: 9,\r\n// \t\t\t\t\tid: 485,\r\n// \t\t\t\t\tconfig: '{\"selectList\":[{\"label\":\"自取\",\"value\":\"1\"},{\"label\":\"寄邮到付\",\"value\":\"2\"}]}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"领取方式\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 1,\r\n// \t\t\t\t\tsectionId: 113,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 3,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"location\",\r\n// \t\t\t\t\tfieldType: 1,\r\n// \t\t\t\t\tid: 486,\r\n// \t\t\t\t\tconfig: '{\"maxLength\":50,\"minLength\":1}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"自取地址\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 113,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 4,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"recipientName\",\r\n// \t\t\t\t\tfieldType: 1,\r\n// \t\t\t\t\tid: 487,\r\n// \t\t\t\t\tconfig: '{\"maxLength\":8,\"minLength\":1}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"收件人姓名\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 113,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 5,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"contact\",\r\n// \t\t\t\t\tfieldType: 4,\r\n// \t\t\t\t\tid: 488,\r\n// \t\t\t\t\tconfig: '{\"decimalLength\":0}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"联系方式\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 113,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 6,\r\n// \t\t\t\t},\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \" mailingAddress\",\r\n// \t\t\t\t\tfieldType: 1,\r\n// \t\t\t\t\tid: 489,\r\n// \t\t\t\t\tconfig: '{\"maxLength\":50,\"minLength\":0}',\r\n// \t\t\t\t\tinitialValue: null,\r\n// \t\t\t\t\tlabel: \"邮寄地址\",\r\n// \t\t\t\t\tregularExpression: null,\r\n// \t\t\t\t\trequired: 0,\r\n// \t\t\t\t\tsectionId: 113,\r\n// \t\t\t\t\tspan: 8,\r\n// \t\t\t\t\tseq: 7,\r\n// \t\t\t\t},\r\n// \t\t\t],\r\n// \t\t\tseq: 3,\r\n// \t\t},\r\n// \t],\r\n// \tlinkages:\r\n// \t\t'[{\"linkageType\":\"7\",\"name\":\"单选联动其他控件异步选项\",\"src\":{\"fieldKey\":\"asyncTests\",\"label\":\"下拉测试异步\",\"fieldType\":3},\"dist\":[{\"fields\":[{\"srcKey\":\"asyncTests\",\"fieldKey\":\"asyncYYYYYY\",\"label\":\"接收异步联动\",\"fieldType\":3,\"asyncParamName\":\"id\"}]}],\"asyncParamName\":\"id\"}]',\r\n// };\r\n\r\n// {\r\n// \tlinkageType: \"4\",\r\n// \tname: \"单选/多选 控制 选项\",\r\n// \tsrc: { fieldKey: \"rfid\" },\r\n// \tdist: [\r\n// \t\t{\r\n// \t\t\tsrcValue: \"1\",\r\n// \t\t\tfields: [\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"domicile\",\r\n// \t\t\t\t\tlabel: \"住所性质\",\r\n// \t\t\t\t\toptions: [\r\n// \t\t\t\t\t\t{ label: \"自有\", value: \"1\" },\r\n// \t\t\t\t\t\t{ label: \"租赁\", value: \"2\" },\r\n// \t\t\t\t\t\t{ label: \"其他\", value: \"3\" },\r\n// \t\t\t\t\t],\r\n// \t\t\t\t},\r\n// \t\t\t],\r\n// \t\t},\r\n// \t\t{\r\n// \t\t\tsrcValue: \"2\",\r\n// \t\t\tfields: [\r\n// \t\t\t\t{\r\n// \t\t\t\t\tfieldKey: \"domicile\",\r\n// \t\t\t\t\tlabel: \"住所性质\",\r\n// \t\t\t\t\toptions: [{ label: \"自有\", value: \"1\" }],\r\n// \t\t\t\t},\r\n// \t\t\t],\r\n// \t\t},\r\n// \t],\r\n// },\r\n","import React from \"react\";\r\nimport { ZliveForm } from \"zerod\";\r\nimport HOC from \"@/HOC/load-HOC.js\";\r\nconst { AmdDocHOC, AshowDemoHOC } = HOC;\r\nimport doc from \"zerod/components/ZliveForm/doc.md\";\r\nimport formData from \"./formData\";\r\nimport linkages from \"./linkages\";\r\nimport { Button } from \"antd\";\r\nexport default AmdDocHOC(doc, {\r\n\tdemo0: function() {\r\n\t\tclass Myjavascript extends React.PureComponent {\r\n\t\t\tformData = { ...formData };\r\n\t\t\tonSave = newFormData => {\r\n\t\t\t\tconsole.log(newFormData);\r\n\t\t\t};\r\n\t\t\trender() {\r\n\t\t\t\treturn <ZliveForm formData={this.formData} onSave={this.onSave} />;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst Dom = AshowDemoHOC(<Myjavascript />, true);\r\n\t\treturn <Dom />;\r\n\t},\r\n\tdemo1: function() {\r\n\t\tclass Myjavascript extends React.PureComponent {\r\n\t\t\tstate = {\r\n\t\t\t\tformValue: {\r\n\t\t\t\t\tdogCard: \"我的观点\",\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\tformData = { ...formData };\r\n\t\t\tonSubmit = values => {\r\n\t\t\t\tconsole.log(values);\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t};\r\n\t\t\tcomponentDidMount() {\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t// \tthis.setState({\r\n\t\t\t\t// \t\tformValue:{\r\n\t\t\t\t// \t\t\tdogName:\"8888\"\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t})\r\n\t\t\t\t// }, 2000);\r\n\t\t\t}\r\n\t\t\trender() {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<ZliveForm.FormViewer\r\n\t\t\t\t\t\tformValues={this.state.formValue}\r\n\t\t\t\t\t\tformData={this.formData}\r\n\t\t\t\t\t\tonSubmit={this.onSubmit}\r\n\t\t\t\t\t\tmomentFormat={true}\r\n\t\t\t\t\t\tsubmitBtnRender={submit => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"z-text-center\">\r\n\t\t\t\t\t\t\t\t\t<Button type=\"primary\" onClick={submit}>\r\n\t\t\t\t\t\t\t\t\t\t提交数据\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst Dom = AshowDemoHOC(<Myjavascript />, true);\r\n\t\treturn <Dom />;\r\n\t},\r\n\tdemo2: function() {\r\n\t\tclass Myjavascript extends React.PureComponent {\r\n\t\t\trender() {\r\n\t\t\t\treturn <span />;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn <Myjavascript />;\r\n\t},\r\n});\r\n","var map = {\n\t\"./AmdDocHOC/index.jsx\": \"pnNO\",\n\t\"./AshowDemoHOC/index.jsx\": \"+fre\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"jjl2\";","module.exports = (__webpack_require__(\"dBtz\"))(371);","module.exports = (__webpack_require__(\"dBtz\"))(312);","module.exports = (__webpack_require__(\"dBtz\"))(359);","module.exports = (__webpack_require__(\"dBtz\"))(238);"],"sourceRoot":""}