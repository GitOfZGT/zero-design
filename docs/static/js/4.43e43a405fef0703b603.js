(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"1xVk":function(e,n,r){"use strict";var t=r("tmCC");n.a=function(e,n,r,a){return n.includes("/sys")||(n="/webapi"+n),t.x.httpAjax(e,n,r,a)}},"40mi":function(e,n,r){"use strict";n.a={default:"#Web服务器相关配置\nserver.port=11110\nserver.context-path=/\n#数据连接配置\nspring.datasource.druid.url=jdbc:mysql://172.16.8.18:3306/uap?allowMultiQueries=true&useUnicode=true&characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull\nspring.datasource.druid.username=user\nspring.datasource.druid.password=admin@1\nspring.datasource.druid.driverClassName=com.mysql.jdbc.Driver\nspring.datasource.druid.initial-size=5\nspring.datasource.druid.maxActive=10\nspring.datasource.druid.minIdle=10\nspring.datasource.druid.validation-query=SELECT 'x' from dual\nspring.datasource.druid.test-while-idle=true\nspring.datasource.druid.time-between-eviction-runs-millis=10000\nspring.datasource.druid.min-evictable-idle-time-millis=300000\nspring.datasource.druid.poolPreparedStatements=true\nspring.datasource.druid.maxPoolPreparedStatementPerConnectionSize=20\nspring.datasource.druid.filters=stat,slf4j\nspring.datasource.druid.connectionProperties=druid.stat.mergeSql=true;druid.stat.slowSqlMillis=1000\nspring.datasource.druid.useGlobalDataSourceStat=true\n#Redis连接\nspring.redis.database=0\nspring.redis.host=172.16.8.18\nspring.redis.port=6379\nspring.redis.password=hyzs\nspring.redis.pool.maxActive=11\nspring.redis.pool.maxIdle=11\nspring.redis.pool.maxWait=-1\nspring.redis.pool.minIdle=0\n#json格式化\nspring.jackson.date-format=yyyy-MM-dd HH:mm:ss\nspring.jackson.time-zone=Asia/Shanghai\n#session共享\nspring.session.store-type=redis\n#文件上传\nspring.http.multipart.enabled=true\nspring.http.multipart.max-file-size=10MB\nspring.http.multipart.max-request-size=10MB\n#mybatis\nmybatis.configuration.mapUnderscoreToCamelCase=true\nmybatis.configuration.jdbcTypeForNull=NULL\n#日志\nlogging.level.com.hyzs=DEBUG\n#关闭\nendpoints.shutdown.enabled=true\nendpoints.shutdown.sensitive=false\n#分布助手配置\nlogging.pagehelper.helper-dialect=mysql\nlogging.pagehelper.reasonable=true\nlogging.pagehelper.support-methods-arguments=true\nlogging.pagehelper.params=count=countSql",dev:"#开发环境配置\n#数据连接配置\nspring.datasource.druid.url=jdbc:mysql://172.16.8.18:3306/uap?allowMultiQueries=true&useUnicode=true&characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull\nspring.datasource.druid.username=user\nspring.datasource.druid.password=admin@1\nspring.datasource.druid.initial-size=5\nspring.datasource.druid.maxActive=10\nspring.datasource.druid.minIdle=10\n\n#注册中心地址\neureka.client.service-url.defaultZone=http://172.16.8.20:8761/eureka\n\n#Redis连接\nspring.redis.database=0\nspring.redis.host=172.16.8.18\nspring.redis.port=6379\nspring.redis.password=hyzs\nspring.redis.pool.maxActive=11\nspring.redis.pool.maxIdle=11\nspring.redis.pool.maxWait=-1\nspring.redis.pool.minIdle=0",test:"#测试环境配置\n#数据连接配置\nspring.datasource.druid.url=jdbc:mysql://172.16.8.18:3306/uap?allowMultiQueries=true&useUnicode=true&characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull\nspring.datasource.druid.username=user\nspring.datasource.druid.password=admin@1\nspring.datasource.druid.initial-size=5\nspring.datasource.druid.maxActive=10\nspring.datasource.druid.minIdle=10\n\n#注册中心地址\neureka.client.service-url.defaultZone=http://172.16.8.20:8761/eureka\n\n#Redis连接\nspring.redis.database=0\nspring.redis.host=172.16.8.18\nspring.redis.port=6379\nspring.redis.password=hyzs\nspring.redis.pool.maxActive=11\nspring.redis.pool.maxIdle=11\nspring.redis.pool.maxWait=-1\nspring.redis.pool.minIdle=0",prod:"#生产环境配置\n#数据连接配置\nspring.datasource.druid.url=jdbc:mysql://172.16.8.18:3306/uap?allowMultiQueries=true&useUnicode=true&characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull\nspring.datasource.druid.username=user\nspring.datasource.druid.password=admin@1\nspring.datasource.druid.initial-size=5\nspring.datasource.druid.maxActive=10\nspring.datasource.druid.minIdle=10\n\n#注册中心地址\neureka.client.service-url.defaultZone=http://172.16.8.20:8761/eureka\n\n#Redis连接\nspring.redis.database=0\nspring.redis.host=172.16.8.18\nspring.redis.port=6379\nspring.redis.password=hyzs\nspring.redis.pool.maxActive=11\nspring.redis.pool.maxIdle=11\nspring.redis.pool.maxWait=-1\nspring.redis.pool.minIdle=0"}},"5WI2":function(e,n,r){"use strict";r.r(n);var t=r("tmCC");n.default={name:"config",apis:{getServiceList:function(e){return t.x.httpAjax("post","/webapi/v1.0/config/center/pageServiceInfo",e)},deleteService:function(e){return t.x.httpAjax("post","/webapi/v1.0/config/center/deleteServiceInfo",e)},addService:function(e){return t.x.httpAjax("post","/webapi/v1.0/config/center/addServiceConfig",e)},updateService:function(e){return t.x.httpAjax("post","/webapi/v1.0/config/center/updateServiceInfo",e)},getServiceDetail:function(e){return t.x.httpAjax("post","/webapi/v1.0/config/center/getServiceConfigDetail",e)},updateServiceConfig:function(e){return t.x.httpAjax("post","/webapi/v1.0/config/center/updateConfigProperty",e)}}}},O3gd:function(e,n,r){"use strict";r.r(n);var t=r("1xVk");n.default={name:"login",apis:{getUserInfo:function(){return Object(t.a)("post","/loginUserInfo")}}}},Revr:function(e,n,r){var t={"./area.api.js":"eAri","./config.api.js":"5WI2","./login.api.js":"O3gd"};function a(e){var n=i(e);return r(n)}function i(e){var n=t[e];if(!(n+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return n}a.keys=function(){return Object.keys(t)},a.resolve=i,e.exports=a,a.id="Revr"},WiDR:function(e,n,r){"use strict";var t=r("Q2cO"),a=r.n(t),i=r("Revr"),s={},o=[];i.keys().forEach(function(e){var n=void 0;try{n=i(e).default}catch(n){throw Error(e+":"+n)}if(void 0===n||"object"!==(void 0===n?"undefined":a()(n)))throw Error(e+":内没有 export default 或者export default格式有误 ");if("object"!=a()(n.apis))throw Error(e+":apis不是object");var r=n.name;if("string"!=typeof r)throw Error(e+":缺少name属性");if(r=r.trim(),o.includes(r))throw Error(e+":"+r+"此命名空间已被使用");o.push(r),s[r]=n.apis}),n.a=s},eAri:function(e,n,r){"use strict";r.r(n);var t=r("1xVk");n.default={name:"area",apis:{getChildList:function(e){return Object(t.a)("get","/mzfwjg/sys/areas/"+e.id+"/children")}}}},s1ms:function(e,n,r){"use strict";r.r(n);var t=r("6ZY3"),a=r.n(t),i=r("mGQZ"),s=r.n(i),o=r("bypa"),d=r.n(o),c=r("6cB7"),u=r.n(c),l=r("tmCC"),p=r("WiDR"),g=r("unDg"),m=r.n(g),f=r("+Fg1"),v=r.n(f),h=r("kSOj"),b=r.n(h),y=r("40mi"),C=r("Ds8w"),k=r.n(C),x=r("6ato"),w=r.n(x),E=r("2dj7"),I=r.n(E),P=r("Xtzg"),S=r.n(P),T=r("0dFU"),j=r.n(T),A=r("T9cD"),z=r.n(A),D=function(e){function n(){var e,r,t,a;w()(this,n);for(var i=arguments.length,o=Array(i),d=0;d<i;d++)o[d]=arguments[d];return r=t=S()(this,(e=n.__proto__||k()(n)).call.apply(e,[this].concat(o))),t.methods={saveData:function(e,n){return t.props.showModalLoading(!0),p.a.config.updateServiceConfig({configProperty:n.confProperty,environment:e.key,serviceId:e.serviceId}).then(function(e){s.a.success("更新配置成功")}).catch(function(e){s.a.error(e&&e.msg?e.msg:"更新配置失败")}).finally(function(){t.props.showModalLoading(!1)})}},t.tabContent=function(e){return u.a.createElement(l.j,{items:t.props.formItems,formDefaultValues:{confProperty:e.serviceConfig.confProperty},onSubmit:function(n){return t.methods.saveData(e,n)}})},t.defaultTabPanes=[{tab:"默认环境",key:"default",serviceConfig:{},content:t.tabContent},{tab:"开发环境",key:"dev",serviceConfig:{},content:t.tabContent},{tab:"测试环境",key:"test",serviceConfig:{},content:t.tabContent},{tab:"生产环境",key:"prod",serviceConfig:{},content:t.tabContent}],a=r,S()(t,a)}return j()(n,e),I()(n,[{key:"getTabPanes",value:function(e){var n=this.props.data;return n&&n.cfgcPropertyDOList?e.map(function(e,r){e.serviceId=n.serviceId;for(var t=n.cfgcPropertyDOList,a=0;a<t.length;a++)if(e.key===t[a].environment){e.serviceConfig=t[a];break}return e}):[]}},{key:"render",value:function(){var e=this.getTabPanes(this.defaultTabPanes);return u.a.createElement("div",{className:"z-panel z-margin-top-20"},u.a.createElement("div",{className:"z-panel-heading"},"修改配置信息"),u.a.createElement("div",{className:"z-panel-body"},u.a.createElement(l.v,{tabPanes:e})))}}]),n}(u.a.Component);D.propTypes={data:z.a.object,formItems:z.a.arrayOf(z.a.object)};var N=l.i.setConsumer(D);var B=function(e){var n=e.pageType,r=e.headerTitle,t=e.headerContent,i=e.afterSubmitSuccess,s=[{key:"quick",label:"快捷操作",render:function(e){return u.a.createElement(b.a,{onClick:function(){e.setFieldsValue({confProperty:y.a.default})}},"模板配置")}},{key:"confProperty",label:"默认配置",render:function(e){return u.a.createElement(d.a.TextArea,{rows:15,placeholder:"请输入默认配置",ref:function(e){l.x.scrollDisableWheel(e.textAreaRef)}})},options:{rules:[{required:!0,message:"不能为空。"}]}}],o=[{key:"serviceCode",label:"服务编码",render:function(e){return u.a.createElement(d.a,{placeholder:"请输入服务编码"})},options:{rules:[{required:!0,message:"不能为空。"}]}},{key:"serviceName",label:"服务名称",render:function(e){return u.a.createElement(d.a,{placeholder:"请输入服务名称"})},options:{rules:[{required:!0,message:"不能为空。"}]}},{key:"serviceRemark",label:"服务说明",render:function(e){return u.a.createElement(d.a.TextArea,{rows:2,placeholder:"请输入服务说明"})},options:{rules:[{required:!0,message:"不能为空。"}]}},{key:"servicePort",detailKey:"serviceProt",label:"端口号",render:function(e){return u.a.createElement(v.a,{min:11110,max:65535,step:10})},options:{rules:[{required:!0,message:"不能为空。"}]}}];"add"===n&&(o=[].concat(m()(o),s));var c={pageHeader:{show:!0,title:r,content:t,rightMoreContent:null},form:{type:n,panelHeader:"add"===n?"新增服务信息":"修改基础信息",items:o,detailApiInterface:function(e,n){return p.a.config.getServiceDetail({serviceId:e})},submitApiInterface:function(e,r){return"add"===n?p.a.config.addService(a()({},e,{environment:"default"})):p.a.config.updateService(a()({},e,{serviceId:r.detailId}))},afterSubmitSuccess:i}};return"update"===n&&(c.moreContentRender=function(e){return u.a.createElement(N,{data:e,formItems:s})}),Object(l.g)(c)},R=function(e){function n(){var e,r,t,a;w()(this,n);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t=S()(this,(e=n.__proto__||k()(n)).call.apply(e,[this].concat(s))),t.getConfig=function(e){return e?u.a.createElement("div",{style:{background:"#2B2B2B",padding:16}},e.split("\n").map(function(e,n){var r=e;if(e.startsWith("#"))r=u.a.createElement("span",{style:{color:"#629755"}},e);else if(e.indexOf("=")>0){var t=e.indexOf("="),a=e.substring(0,t),i=e.substring(t+1,e.length);r=u.a.createElement("span",null,u.a.createElement("span",{style:{color:"#9876AA"}},a),u.a.createElement("span",{style:{color:"rgba(255,255,255,0.85)"}},"="),u.a.createElement("span",{style:{color:"#BABABA"}},i))}return u.a.createElement("div",{key:e+"-"+n},r)})):u.a.createElement("div",{className:"z-text-center z-text-gray"},"无相关配置信息")},t.tabContent=function(e){return t.getConfig(e.serviceConfig.confProperty)},t.defaultTabPanes=[{tab:"默认环境",key:"default",serviceConfig:{},content:t.tabContent},{tab:"开发环境",key:"dev",serviceConfig:{},content:t.tabContent},{tab:"测试环境",key:"test",serviceConfig:{},content:t.tabContent},{tab:"生产环境",key:"prod",serviceConfig:{},content:t.tabContent}],a=r,S()(t,a)}return j()(n,e),I()(n,[{key:"getTabPanes",value:function(e){var n=this.props.data;return n&&n.cfgcPropertyDOList?e.map(function(e,r){e.serviceId=n.serviceId;for(var t=n.cfgcPropertyDOList,a=0;a<t.length;a++)if(e.key===t[a].environment){e.serviceConfig=t[a];break}return e}):[]}},{key:"render",value:function(){var e=this.getTabPanes(this.defaultTabPanes);return u.a.createElement("div",{className:"z-panel z-margin-top-20"},u.a.createElement("div",{className:"z-panel-heading"},"配置信息"),u.a.createElement("div",{className:"z-panel-body"},u.a.createElement(l.v,{tabPanes:e})))}}]),n}(u.a.Component);R.propTypes={data:z.a.object};var O=l.i.setConsumer(R);var q=function(e){var n={pageHeader:{show:!0,breadcrumbRoutes:null,title:e.headerTitle,content:e.headerContent,rightMoreContent:u.a.createElement("div",null,"右边")},detail:{panelHeader:"基础信息",items:[{key:"serviceName",label:"服务名称"},{key:"serviceCode",label:"服务编码"},{key:"serviceProt",label:"约定端口号",render:function(e,n){return u.a.createElement("span",{className:"z-text-red"},e)}},{key:"serviceRemark",label:"服务描述",span:{lg:12},render:function(e,n){return e}}],detailApiInterface:function(e,n){return p.a.config.getServiceDetail({serviceId:e})}},moreContentRender:function(e){return u.a.createElement(O,{data:e})}};return Object(l.f)(n)},M={pageHeader:{show:!0,title:"服务配置",content:"微服务的定义，维护其配置。除了Eureka Service及Config Center两种服务不在这里配置，其他服务都必须在此定义和配置！",rightMoreContent:u.a.createElement("div",null,"右边内容")},searchForm:{items:[{key:"serviceCode",label:"服务编码",render:function(e){return u.a.createElement(d.a,{placeholder:"请输入内容"})}},{key:"serviceName",label:"服务名称",render:function(e){return u.a.createElement(d.a,{placeholder:"请输入内容"})}}]},list:{listType:"table",cardCoverRender:null,panelHeader:"列表",actionDataIndex:"serviceName",tableParams:{onChange:function(e,n,r){console.log(r)},expandedRowRender:function(e,n,r,t){return console.log(r),u.a.createElement("div",null,n+"-"+t)}},tableColumns:[{title:"服务名称",dataIndex:"serviceName"},{title:"服务编码",dataIndex:"serviceCode",sorter:!0},{title:"约定端口号",dataIndex:"servicePort",render:function(e,n,r,t){return u.a.createElement("span",{className:"z-text-red"},e)}},{title:"服务描述",dataIndex:"remark"}],showAddBtn:!0,addBtnPermCode:"",addPageRender:function(e){var n=B({pageType:"add",headerTitle:"新增服务配置",headerContent:"新增一个服务,需要录入服务编码服务名称端口号等信息",afterSubmitSuccess:function(n){e.methods.getListData(),n()}});return u.a.createElement(n,null)},showDetailBtn:!0,detailBtnPermCode:"",detailPageRender:function(e){var n=q({headerTitle:e.serviceName,headerContent:e.remark});return u.a.createElement(n,{detailId:e.id})},showUpdateBtn:!0,updateBtnPermCod:"",updatePageRender:function(e,n){var r=B({pageType:"update",headerTitle:e.serviceName,headerContent:e.remark,afterSubmitSuccess:function(e){n.methods.getListData()}});return u.a.createElement(r,{detailId:e.id})},showDeleteBtn:!0,deleteBtnPermCod:"",moreBtnMap:[{key:"0",name:"默认的按钮"}],onMoreBtnClick:function(e,n){s.a.success("您当前点击的是["+n.serviceName+"]这条数据")},listApiInterface:function(e){return p.a.config.getServiceList(a()(e,{servcieName:e.serviceName}))},deleteApiInterface:function(e){return p.a.config.deleteService({id:e.id})},showPagination:!0,paginationType:"paging"}};n.default=Object(l.t)(M)}}]);