(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"3OXX":function(e,t,n){e.exports=n("sG4F")(10)},Revr:function(e,t,n){var a={"./area.api.js":"eAri","./config.api.js":"5WI2","./login.api.js":"O3gd","./scheduling.api.js":"Lwzs"};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id="Revr"},s1ms:function(e,t,n){"use strict";n.r(t);var a=n("eYSq"),r=n("II5r"),i=n.n(r),o=n("nMT3"),c=n("eaxb"),s=n("uqIC"),l=n.n(s),d=n("WiDR"),u=n("4QcI"),f=n("rDdF"),m=n.n(f),p=n("bkI4"),v=n("/sSO"),g=n("9DAX"),b=n("40mi"),y=n("MaNN"),h=n("VQbk"),C=n("+Qac"),k=n("MhH0"),E=n.n(k),P=n("FcZB"),I=n.n(P),w=n("Ratc"),T=n.n(w),N=n("0j8+"),D=n.n(N),x=n("0kOG"),S=n.n(x),A=n("EH+i"),O=n.n(A),B=function(e){function t(){var e,n;E()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=T()(this,(e=D()(t)).call.apply(e,[this].concat(r)))).methods={saveData:function(e,t){return n.props.showModalLoading(!0),d.a.config.updateServiceConfig({configProperty:t.confProperty,environment:e.key,serviceId:e.serviceId}).then(function(e){o.a.success("更新配置成功")}).catch(function(e){o.a.error(e&&e.msg?e.msg:"更新配置失败")}).finally(function(){n.props.showModalLoading(!1)})}},n.tabContent=function(e){return l.a.createElement(C.b,{items:n.props.formItems,formDefaultValues:{confProperty:e.serviceConfig.confProperty},onSubmit:function(t){return n.methods.saveData(e,t)}})},n.defaultTabPanes=[{tab:"默认环境",key:"default",serviceConfig:{},content:n.tabContent},{tab:"开发环境",key:"dev",serviceConfig:{},content:n.tabContent},{tab:"测试环境",key:"test",serviceConfig:{},content:n.tabContent},{tab:"生产环境",key:"prod",serviceConfig:{},content:n.tabContent}],n}return S()(t,e),I()(t,[{key:"getTabPanes",value:function(e){var t=this.props.data;return t&&t.cfgcPropertyDOList?e.map(function(e,n){e.serviceId=t.serviceId;for(var a=t.cfgcPropertyDOList,r=0;r<a.length;r++)if(e.key===a[r].environment){e.serviceConfig=a[r];break}return e}):[]}},{key:"render",value:function(){var e=this.getTabPanes(this.defaultTabPanes);return l.a.createElement("div",{className:"z-panel z-margin-top-20"},l.a.createElement("div",{className:"z-panel-heading"},"修改配置信息"),l.a.createElement("div",{className:"z-panel-body"},l.a.createElement(h.a,{tabPanes:e})))}}]),t}(l.a.PureComponent);B.propTypes={data:O.a.object,formItems:O.a.arrayOf(O.a.object)};var R=y.a.setConsumer(B);var z=function(e){var t=e.pageType,n=e.headerTitle,a=e.headerContent,r=e.afterSubmitSuccess,o=[{key:"quick",label:"快捷操作",render:function(e){return l.a.createElement(g.a,{onClick:function(){e.setFieldsValue({confProperty:b.a.default})}},"模板配置")}},{key:"confProperty",label:"默认配置",render:function(e){return l.a.createElement(c.a.TextArea,{rows:15,placeholder:"请输入默认配置",ref:function(e){v.g.scrollDisableWheel(e.textAreaRef)}})},options:{rules:[{required:!0,message:"不能为空。"}]}}],s=[{key:"serviceCode",label:"服务编码",render:function(e){return l.a.createElement(c.a,{placeholder:"请输入服务编码"})},options:{rules:[{required:!0,message:"不能为空。"}]}},{key:"serviceName",label:"服务名称",render:function(e){return l.a.createElement(c.a,{placeholder:"请输入服务名称"})},options:{rules:[{required:!0,message:"不能为空。"}]}},{key:"serviceRemark",label:"服务说明",render:function(e){return l.a.createElement(c.a.TextArea,{rows:2,placeholder:"请输入服务说明"})},options:{rules:[{required:!0,message:"不能为空。"}]}},{key:"servicePort",detailKey:"serviceProt",label:"端口号",render:function(e){return l.a.createElement(p.a,{min:11110,max:65535,step:10})},options:{rules:[{required:!0,message:"不能为空。"}]}}];"add"===t&&(s=[].concat(m()(s),o));var f={pageHeader:{show:!0,title:n,content:a,rightMoreContent:null},form:{type:t,panelHeader:"add"===t?"新增服务信息":"修改基础信息",items:s,detailApiInterface:function(e,t){return d.a.config.getServiceDetail({serviceId:e})},submitApiInterface:function(e,n){return"add"===t?d.a.config.addService(i()({},e,{environment:"default"})):d.a.config.updateService(i()({},e,{serviceId:n.detailId}))},afterSubmitSuccess:r}};return"update"===t&&(f.moreContentRender=function(e){return l.a.createElement(R,{data:e,formItems:o})}),Object(u.a)(f)},j=n("fdRb"),L=function(e){function t(){var e,n;E()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=T()(this,(e=D()(t)).call.apply(e,[this].concat(r)))).getConfig=function(e){return e?l.a.createElement("div",{style:{background:"#2B2B2B",padding:16}},e.split("\n").map(function(e,t){var n=e;if(e.startsWith("#"))n=l.a.createElement("span",{style:{color:"#629755"}},e);else if(e.indexOf("=")>0){var a=e.indexOf("="),r=e.substring(0,a),i=e.substring(a+1,e.length);n=l.a.createElement("span",null,l.a.createElement("span",{style:{color:"#9876AA"}},r),l.a.createElement("span",{style:{color:"rgba(255,255,255,0.85)"}},"="),l.a.createElement("span",{style:{color:"#BABABA"}},i))}return l.a.createElement("div",{key:"".concat(e,"-").concat(t)},n)})):l.a.createElement("div",{className:"z-text-center z-text-gray"},"无相关配置信息")},n.tabContent=function(e){return n.getConfig(e.serviceConfig.confProperty)},n.defaultTabPanes=[{tab:"默认环境",key:"default",serviceConfig:{},content:n.tabContent},{tab:"开发环境",key:"dev",serviceConfig:{},content:n.tabContent},{tab:"测试环境",key:"test",serviceConfig:{},content:n.tabContent},{tab:"生产环境",key:"prod",serviceConfig:{},content:n.tabContent}],n}return S()(t,e),I()(t,[{key:"getTabPanes",value:function(e){var t=this.props.data;return t&&t.cfgcPropertyDOList?e.map(function(e,n){e.serviceId=t.serviceId;for(var a=t.cfgcPropertyDOList,r=0;r<a.length;r++)if(e.key===a[r].environment){e.serviceConfig=a[r];break}return e}):[]}},{key:"render",value:function(){var e=this.getTabPanes(this.defaultTabPanes);return l.a.createElement("div",{className:"z-panel z-margin-top-20"},l.a.createElement("div",{className:"z-panel-heading"},"配置信息"),l.a.createElement("div",{className:"z-panel-body"},l.a.createElement(h.a,{tabPanes:e})))}}]),t}(l.a.PureComponent);L.propTypes={data:O.a.object};var M=y.a.setConsumer(L);var q=function(e){var t={pageHeader:{show:!0,breadcrumbRoutes:null,title:e.headerTitle,content:e.headerContent,rightMoreContent:l.a.createElement("div",null,"右边")},detail:{panelHeader:"基础信息",items:[{key:"serviceName",label:"服务名称"},{key:"serviceCode",label:"服务编码"},{key:"serviceProt",label:"约定端口号",render:function(e,t){return l.a.createElement("span",{className:"z-text-red"},e)}},{key:"serviceRemark",label:"服务描述",span:{lg:12},render:function(e,t){return e}}],detailApiInterface:function(e,t){return d.a.config.getServiceDetail({serviceId:e})}},moreContentRender:function(e){return l.a.createElement(M,{data:e})}};return Object(j.a)(t)},H={pageHeader:{show:!0,title:"服务配置",content:"微服务的定义，维护其配置。除了Eureka Service及Config Center两种服务不在这里配置，其他服务都必须在此定义和配置！",rightMoreContent:l.a.createElement("div",null,"右边内容")},searchForm:{items:[{key:"serviceCode",label:"服务编码",render:function(e){return l.a.createElement(c.a,{placeholder:"请输入内容"})}},{key:"serviceName",label:"服务名称",render:function(e){return l.a.createElement(c.a,{placeholder:"请输入内容"})}}]},list:{listType:"table",cardCoverRender:null,panelHeader:"列表",actionDataIndex:"serviceName",tableParams:{onChange:function(e,t,n){console.log(n)},expandedRowRender:function(e,t,n,a){return console.log(n),l.a.createElement("div",null,t+"-"+a)}},tableColumns:[{title:"服务名称",dataIndex:"serviceName"},{title:"服务编码",dataIndex:"serviceCode",sorter:!0},{title:"约定端口号",dataIndex:"servicePort",render:function(e,t,n,a){return l.a.createElement("span",{className:"z-text-red"},e)}},{title:"服务描述",dataIndex:"remark"}],showAddBtn:!0,addBtnPermCode:"",addPageRender:function(e){var t=z({pageType:"add",headerTitle:"新增服务配置",headerContent:"新增一个服务,需要录入服务编码服务名称端口号等信息",afterSubmitSuccess:function(t){e.methods.getListData(),t()}});return l.a.createElement(t,null)},showDetailBtn:!0,detailBtnPermCode:"",detailPageRender:function(e){var t=q({headerTitle:e.serviceName,headerContent:e.remark});return l.a.createElement(t,{detailId:e.id})},showUpdateBtn:!0,updateBtnPermCod:"",updatePageRender:function(e,t){var n=z({pageType:"update",headerTitle:e.serviceName,headerContent:e.remark,afterSubmitSuccess:function(e){t.methods.getListData()}});return l.a.createElement(n,{detailId:e.id})},showDeleteBtn:!0,deleteBtnPermCod:"",moreBtnMap:[{key:"0",name:"默认的按钮"}],onMoreBtnClick:function(e,t){o.a.success("您当前点击的是[".concat(t.serviceName,"]这条数据"))},listApiInterface:function(e){return d.a.config.getServiceList(i()(e,{servcieName:e.serviceName}))},deleteApiInterface:function(e){return d.a.config.deleteService({id:e.id})},showPagination:!0,paginationType:"paging"}};t.default=Object(a.a)(H)}}]);
//# sourceMappingURL=45.3a7b73a73edd105d46dd.js.map