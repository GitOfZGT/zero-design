{"version":3,"sources":["webpack:///delegated ./node_modules/_lodash@4.17.11@lodash/merge.js from dll-reference _dll_vendor_e823eb2f1294e4241445","webpack:///./src/Api sync \\.api.js$","webpack:///./src/views/Main/Config/ServiceWithTableList/ServiceTab.jsx","webpack:///./src/views/Main/Config/ServiceWithTableList/getEditPage.js","webpack:///./src/views/Main/Config/ServiceWithTableList/DetailTab.jsx","webpack:///./src/views/Main/Config/ServiceWithTableList/getDetailPage.js","webpack:///./src/views/Main/Config/ServiceWithTableList/index.jsx"],"names":["module","exports","__webpack_require__","map","./area.api.js","./config.api.js","./login.api.js","./scheduling.api.js","webpackContext","req","id","webpackContextResolve","o","e","Error","code","keys","Object","resolve","ServiceTab","methods","saveData","item","values","_this","props","showModalLoading","api","config","updateServiceConfig","configProperty","environment","key","serviceId","then","re","message","success","catch","error","msg","finally","tabContent","_react_16_8_6_reactfrom_dll_reference_dll_vendor_e823eb2f1294e4241445_default","a","createElement","Zform","items","formItems","formDefaultValues","confProperty","serviceConfig","onSubmit","defaultTabPanes","tab","content","data","this","cfgcPropertyDOList","index","tabpanes","i","length","tabPanes","getTabPanes","className","Ztabs","React","PureComponent","propTypes","PropTypes","object","arrayOf","ServiceWithTableList_ServiceTab","ZerodMainContext","setConsumer","getEditPage","_ref","pageType","headerTitle","headerContent","afterSubmitSuccess","configFormItems","label","render","form","es_button","onClick","setFieldsValue","defaultConfigData","default","input","TextArea","rows","placeholder","ref","el","zTool","scrollDisableWheel","textAreaRef","options","rules","required","detailKey","input_number","min","max","step","concat","toConsumableArray_default","pageCofig","pageHeader","show","title","rightMoreContent","type","panelHeader","detailApiInterface","getServiceDetail","submitApiInterface","addService","assign_default","updateService","detailId","moreContentRender","detail","ZeditSimpleFormHOC","DetailTab","getConfig","style","background","padding","split","line","n","tmp","startsWith","color","indexOf","idx","substring","value","ServiceWithTableList_DetailTab","getPage","breadcrumbRoutes","record","span","lg","ZdetailSimpleBaseHOC","searchForm","list","listType","cardCoverRender","actionDataIndex","tableParams","onChange","pagination","filters","sorter","console","log","expandedRowRender","indent","expanded","tableColumns","dataIndex","text","instance","showAddBtn","addBtnPermCode","addPageRender","panel","AddPage","closeRightModal","getListData","showDetailBtn","detailBtnPermCode","detailPageRender","DetailPage","getDetailPage","serviceName","remark","showUpdateBtn","updateBtnPermCod","updatePageRender","UpdatePage","showDeleteBtn","deleteBtnPermCod","moreBtnMap","name","onMoreBtnClick","listApiInterface","query","getServiceList","servcieName","deleteApiInterface","deleteService","showPagination","paginationType","__webpack_exports__","ZsearchListHOC"],"mappings":"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","file":"js/45.3a7b73a73edd105d46dd.js","sourcesContent":["module.exports = (__webpack_require__(\"sG4F\"))(10);","var map = {\n\t\"./area.api.js\": \"eAri\",\n\t\"./config.api.js\": \"5WI2\",\n\t\"./login.api.js\": \"O3gd\",\n\t\"./scheduling.api.js\": \"Lwzs\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"Revr\";","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n// zerod\r\nimport { Ztabs, Zform, ZerodMainContext } from \"zerod\";\r\n// 第三方组件\r\nimport { message } from \"antd\";\r\n\r\nimport api from \"@/App.api.js\";\r\n\r\nclass ServiceTab extends React.PureComponent {\r\n\tstatic propTypes = {\r\n\t\tdata: PropTypes.object,\r\n\t\tformItems: PropTypes.arrayOf(PropTypes.object),\r\n\t};\r\n\tmethods = {\r\n\t\tsaveData: (item, values) => {\r\n\t\t\tthis.props.showModalLoading(true);\r\n\t\t\treturn api.config\r\n\t\t\t\t.updateServiceConfig({\r\n\t\t\t\t\tconfigProperty: values[\"confProperty\"],\r\n\t\t\t\t\tenvironment: item.key,\r\n\t\t\t\t\tserviceId: item.serviceId,\r\n\t\t\t\t})\r\n\t\t\t\t.then((re) => {\r\n\t\t\t\t\tmessage.success(\"更新配置成功\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch((re) => {\r\n\t\t\t\t\tmessage.error(re && re.msg ? re.msg : \"更新配置失败\");\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tthis.props.showModalLoading(false);\r\n\t\t\t\t});\r\n\t\t},\r\n\t};\r\n\ttabContent = (item) => {\r\n\t\treturn (\r\n\t\t\t<Zform\r\n\t\t\t\titems={this.props.formItems}\r\n\t\t\t\tformDefaultValues={{\r\n\t\t\t\t\tconfProperty: item.serviceConfig[\"confProperty\"],\r\n\t\t\t\t}}\r\n\t\t\t\tonSubmit={(values) => {\r\n\t\t\t\t\treturn this.methods.saveData(item, values);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n\tdefaultTabPanes = [\r\n\t\t{ tab: \"默认环境\", key: \"default\", serviceConfig: {}, content: this.tabContent },\r\n\t\t{ tab: \"开发环境\", key: \"dev\", serviceConfig: {}, content: this.tabContent },\r\n\t\t{ tab: \"测试环境\", key: \"test\", serviceConfig: {}, content: this.tabContent },\r\n\t\t{ tab: \"生产环境\", key: \"prod\", serviceConfig: {}, content: this.tabContent },\r\n\t];\r\n\tgetTabPanes(defaultTabPanes) {\r\n\t\tconst { data } = this.props;\r\n\t\tif (data && data.cfgcPropertyDOList) {\r\n\t\t\treturn defaultTabPanes.map((item, index) => {\r\n\t\t\t\titem.serviceId = data.serviceId;\r\n\t\t\t\tconst tabpanes = data.cfgcPropertyDOList;\r\n\t\t\t\tfor (let i = 0; i < tabpanes.length; i++) {\r\n\t\t\t\t\tif (item.key === tabpanes[i][\"environment\"]) {\r\n\t\t\t\t\t\titem.serviceConfig = tabpanes[i];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn item;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst tabPanes = this.getTabPanes(this.defaultTabPanes);\r\n\t\treturn (\r\n\t\t\t<div className=\"z-panel z-margin-top-20\">\r\n\t\t\t\t<div className=\"z-panel-heading\">修改配置信息</div>\r\n\t\t\t\t<div className=\"z-panel-body\">\r\n\t\t\t\t\t<Ztabs tabPanes={tabPanes} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ZerodMainContext.setConsumer(ServiceTab);\r\n","import React from \"react\";\r\n// 第三方组件\r\nimport { Input, InputNumber, Button, message } from \"antd\";\r\n// zerod\r\nimport { ZeditSimpleFormHOC ,zTool} from \"zerod\";\r\n// 后台接口\r\nimport api from \"@/App.api.js\";\r\n\r\n// import components from '@/components/load-components'\r\n\r\nimport defaultConfigData from \"@/mock/serviceDefaultConfigData.js\";\r\n\r\nimport ServiceTab from \"./ServiceTab\";\r\n\r\nfunction getEditPage({ pageType, headerTitle, headerContent, afterSubmitSuccess }) {\r\n\tconst configFormItems = [\r\n\t\t{\r\n\t\t\tkey: \"quick\",\r\n\t\t\tlabel: \"快捷操作\",\r\n\t\t\trender: (form) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tform.setFieldsValue({\r\n\t\t\t\t\t\t\t\tconfProperty: defaultConfigData.default,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t模板配置\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"confProperty\",\r\n\t\t\tlabel: \"默认配置\",\r\n\t\t\trender: (form) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Input.TextArea\r\n\t\t\t\t\t\trows={15}\r\n\t\t\t\t\t\tplaceholder=\"请输入默认配置\"\r\n\t\t\t\t\t\tref={(el) => {\r\n\t\t\t\t\t\t\tzTool.scrollDisableWheel(el.textAreaRef);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t//antd的 form.getFieldDecorator的options\r\n\t\t\toptions: {\r\n\t\t\t\t//验证规则\r\n\t\t\t\trules: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"不能为空。\",\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\r\n\tlet formItems = [\r\n\t\t{\r\n\t\t\tkey: \"serviceCode\",\r\n\t\t\tlabel: \"服务编码\",\r\n\t\t\trender: (form) => {\r\n\t\t\t\treturn <Input placeholder=\"请输入服务编码\" />;\r\n\t\t\t},\r\n\t\t\t//antd的 form.getFieldDecorator的options\r\n\t\t\toptions: {\r\n\t\t\t\t//验证规则\r\n\t\t\t\trules: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"不能为空。\",\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"serviceName\",\r\n\t\t\tlabel: \"服务名称\",\r\n\t\t\trender: (form) => {\r\n\t\t\t\treturn <Input placeholder=\"请输入服务名称\" />;\r\n\t\t\t},\r\n\t\t\t//antd的 form.getFieldDecorator的options\r\n\t\t\toptions: {\r\n\t\t\t\t//验证规则\r\n\t\t\t\trules: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"不能为空。\",\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"serviceRemark\",\r\n\t\t\tlabel: \"服务说明\",\r\n\t\t\trender: (form) => {\r\n\t\t\t\treturn <Input.TextArea rows={2} placeholder=\"请输入服务说明\" />;\r\n\t\t\t},\r\n\t\t\t//antd的 form.getFieldDecorator的options\r\n\t\t\toptions: {\r\n\t\t\t\t//验证规则\r\n\t\t\t\trules: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"不能为空。\",\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"servicePort\",\r\n\t\t\tdetailKey:'serviceProt',\r\n\t\t\tlabel: \"端口号\",\r\n\t\t\trender: (form) => {\r\n\t\t\t\treturn <InputNumber min={11110} max={65535} step={10} />;\r\n\t\t\t},\r\n\t\t\t//antd的 form.getFieldDecorator的options\r\n\t\t\toptions: {\r\n\t\t\t\t//验证规则\r\n\t\t\t\trules: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"不能为空。\",\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\tif (pageType === \"add\") {\r\n\t\tformItems = [...formItems, ...configFormItems];\r\n\t}\r\n\tconst pageCofig = {\r\n\t\tpageHeader: {\r\n\t\t\tshow: true,\r\n\t\t\t// any\r\n\t\t\ttitle: headerTitle,\r\n\t\t\t//any\r\n\t\t\tcontent: headerContent,\r\n\t\t\t//element | node\r\n\t\t\trightMoreContent: null,\r\n\t\t},\r\n\t\tform: {\r\n\t\t\ttype: pageType,\r\n\t\t\tpanelHeader: pageType === \"add\" ? \"新增服务信息\" : \"修改基础信息\",\r\n\t\t\titems: formItems,\r\n\t\t\tdetailApiInterface: (id, props) => {\r\n\t\t\t\treturn api.config.getServiceDetail({ serviceId: id });\r\n\t\t\t},\r\n\t\t\tsubmitApiInterface: (values, props) => {\r\n\t\t\t\tif (pageType === \"add\") {\r\n\t\t\t\t\treturn api.config.addService(Object.assign({}, values, { environment: \"default\" }));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn api.config.updateService(Object.assign({}, values, { serviceId: props.detailId }));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tafterSubmitSuccess,\r\n\t\t},\r\n\t};\r\n\tif (pageType === \"update\") {\r\n\t\tpageCofig.moreContentRender = (detail) => {\r\n\t\t\t// console.log(detail);\r\n\t\t\treturn <ServiceTab data={detail} formItems={configFormItems} />;\r\n\t\t};\r\n\t}\r\n\treturn ZeditSimpleFormHOC(pageCofig);\r\n}\r\nexport default getEditPage;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n// zerod\r\nimport { Ztabs, ZerodMainContext } from \"zerod\";\r\n\r\nclass DetailTab extends React.PureComponent {\r\n\tstatic propTypes = {\r\n\t\tdata: PropTypes.object,\r\n\t};\r\n\tgetConfig = (content) => {\r\n\t\tif (!content) {\r\n\t\t\treturn <div className=\"z-text-center z-text-gray\">无相关配置信息</div>;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div style={{ background: \"#2B2B2B\", padding: 16 }}>\r\n\t\t\t\t{content.split(\"\\n\").map((line, n) => {\r\n\t\t\t\t\tlet tmp = line;\r\n\t\t\t\t\tif (line.startsWith(\"#\")) {\r\n\t\t\t\t\t\ttmp = <span style={{ color: \"#629755\" }}>{line}</span>;\r\n\t\t\t\t\t} else if (line.indexOf(\"=\") > 0) {\r\n\t\t\t\t\t\tconst idx = line.indexOf(\"=\");\r\n\t\t\t\t\t\tconst key = line.substring(0, idx);\r\n\t\t\t\t\t\tconst value = line.substring(idx + 1, line.length);\r\n\t\t\t\t\t\ttmp = (\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<span style={{ color: \"#9876AA\" }}>{key}</span>\r\n\t\t\t\t\t\t\t\t<span style={{ color: \"rgba(255,255,255,0.85)\" }}>=</span>\r\n\t\t\t\t\t\t\t\t<span style={{ color: \"#BABABA\" }}>{value}</span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn <div key={`${line}-${n}`}>{tmp}</div>;\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\ttabContent = (item) => {\r\n\t\treturn this.getConfig(item.serviceConfig[\"confProperty\"]);\r\n\t};\r\n\tdefaultTabPanes = [\r\n\t\t{ tab: \"默认环境\", key: \"default\", serviceConfig: {}, content: this.tabContent },\r\n\t\t{ tab: \"开发环境\", key: \"dev\", serviceConfig: {}, content: this.tabContent },\r\n\t\t{ tab: \"测试环境\", key: \"test\", serviceConfig: {}, content: this.tabContent },\r\n\t\t{ tab: \"生产环境\", key: \"prod\", serviceConfig: {}, content: this.tabContent },\r\n\t];\r\n\tgetTabPanes(defaultTabPanes) {\r\n\t\tconst { data } = this.props;\r\n\t\tif (data && data.cfgcPropertyDOList) {\r\n\t\t\treturn defaultTabPanes.map((item, index) => {\r\n\t\t\t\titem.serviceId = data.serviceId;\r\n\t\t\t\tconst tabpanes = data.cfgcPropertyDOList;\r\n\t\t\t\tfor (let i = 0; i < tabpanes.length; i++) {\r\n\t\t\t\t\tif (item.key === tabpanes[i][\"environment\"]) {\r\n\t\t\t\t\t\titem.serviceConfig = tabpanes[i];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn item;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst tabPanes = this.getTabPanes(this.defaultTabPanes);\r\n\t\treturn (\r\n\t\t\t<div className=\"z-panel z-margin-top-20\">\r\n\t\t\t\t<div className=\"z-panel-heading\">配置信息</div>\r\n\t\t\t\t<div className=\"z-panel-body\">\r\n\t\t\t\t\t<Ztabs tabPanes={tabPanes} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ZerodMainContext.setConsumer(DetailTab);\r\n","import React from \"react\";\r\n// import { Input, InputNumber, Button } from \"antd\";\r\nimport { ZdetailSimpleBaseHOC } from \"zerod\";\r\nimport api from \"@/App.api.js\";\r\nimport DetailTab from \"./DetailTab\";\r\n\r\nfunction getPage({ headerTitle, headerContent }) {\r\n\tconst pageCofig = {\r\n\t\tpageHeader: {\r\n\t\t\tshow: true,\r\n\t\t\t// array>[object] | null,如果是null则不显示面包屑\r\n\t\t\tbreadcrumbRoutes: null,\r\n\t\t\t// any\r\n\t\t\ttitle: headerTitle,\r\n\t\t\t//any\r\n\t\t\tcontent: headerContent,\r\n\t\t\t//element | node\r\n\t\t\trightMoreContent: <div>右边</div>,\r\n\t\t},\r\n\t\tdetail: {\r\n\t\t\tpanelHeader: \"基础信息\",\r\n\t\t\titems: [\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: \"serviceName\",\r\n\t\t\t\t\tlabel: \"服务名称\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: \"serviceCode\",\r\n\t\t\t\t\tlabel: \"服务编码\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: \"serviceProt\",\r\n\t\t\t\t\tlabel: \"约定端口号\",\r\n\t\t\t\t\trender: (value, record) => {\r\n\t\t\t\t\t\treturn <span className=\"z-text-red\">{value}</span>;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: \"serviceRemark\",\r\n\t\t\t\t\tlabel: \"服务描述\",\r\n\t\t\t\t\tspan: { lg: 12 },\r\n\t\t\t\t\trender: (value, record) => {\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tdetailApiInterface: (id, props) => {\r\n\t\t\t\treturn api.config.getServiceDetail({ serviceId: id });\r\n\t\t\t},\r\n\t\t},\r\n\t\tmoreContentRender: (detail) => {\r\n\t\t\treturn <DetailTab data={detail} />;\r\n\t\t},\r\n\t};\r\n\treturn ZdetailSimpleBaseHOC(pageCofig);\r\n}\r\nexport default getPage;\r\n","import React from \"react\";\r\nimport { Input,message } from \"antd\";\r\nimport{ ZsearchListHOC } from \"zerod\";\r\n\r\nimport api from \"@/App.api.js\";\r\n\r\nimport getEditPage from \"./getEditPage.js\";\r\nimport getDetailPage from \"./getDetailPage.js\";\r\n// let listExports = null;\r\nconst config = {\r\n\r\n\tpageHeader: {\r\n\t\tshow: true,\r\n\t\t//any\r\n\t\ttitle: \"服务配置\",\r\n\t\t//any\r\n\t\tcontent:\r\n\t\t\t\"微服务的定义，维护其配置。除了Eureka Service及Config Center两种服务不在这里配置，其他服务都必须在此定义和配置！\",\r\n\t\t//element | node\r\n\t\trightMoreContent: <div>右边内容</div>,\r\n\t},\r\n\tsearchForm: {\r\n\t\t// array>[object] | null，如果是null则不显示搜索表单\r\n\t\titems: [\r\n\t\t\t{\r\n\t\t\t\tkey: \"serviceCode\",\r\n\t\t\t\tlabel: \"服务编码\",\r\n\t\t\t\trender: (form) => {\r\n\t\t\t\t\treturn <Input placeholder=\"请输入内容\" />;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: \"serviceName\",\r\n\t\t\t\tlabel: \"服务名称\",\r\n\t\t\t\trender: (form) => {\r\n\t\t\t\t\treturn <Input placeholder=\"请输入内容\" />;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\tlist: {\r\n        // table | card\r\n        listType:\"table\",\r\n        cardCoverRender:null,// listType==\"card\"时的一个前置render\r\n\t\tpanelHeader: \"列表\",\r\n\t\t// 表格操作列的字段key\r\n        actionDataIndex: \"serviceName\",\r\n        // antd  Table的参数\r\n        tableParams:{\r\n            onChange:function(pagination, filters, sorter){\r\n                console.log(sorter)\r\n            },\r\n            expandedRowRender:(record, index, indent, expanded)=>{\r\n                console.log(indent)\r\n                return <div>{index+\"-\"+expanded}</div>\r\n            }\r\n        },\r\n\t\t// 表格列map数据数据，同antd的表格 columns\r\n\t\ttableColumns: [\r\n            {\r\n                title: \"服务名称\",\r\n                dataIndex: \"serviceName\",\r\n            },\r\n\t\t\t{\r\n\t\t\t\ttitle: \"服务编码\",\r\n                dataIndex: \"serviceCode\",\r\n                sorter:true,\r\n\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"约定端口号\",\r\n\t\t\t\tdataIndex: \"servicePort\",\r\n\t\t\t\trender: (text,record,index,instance) => {\r\n                    return <span className=\"z-text-red\">{text}</span>},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"服务描述\",\r\n\t\t\t\tdataIndex: \"remark\",\r\n\t\t\t},\r\n\t\t],\r\n\t\t// 是否显示新建按钮\r\n\t\tshowAddBtn: true,\r\n\t\t// 新建按钮权限控制代码\r\n\t\taddBtnPermCode: \"\",\r\n\t\taddPageRender: (panel) => {\r\n\t\t\tconst AddPage = getEditPage({\r\n\t\t\t\tpageType: \"add\",\r\n\t\t\t\theaderTitle: \"新增服务配置\",\r\n\t\t\t\theaderContent: \"新增一个服务,需要录入服务编码服务名称端口号等信息\",\r\n\t\t\t\t// 保存数据成功的回调\r\n\t\t\t\tafterSubmitSuccess: (closeRightModal) => {\r\n\t\t\t\t\t// 保存数据成功后刷新列表数据\r\n\t\t\t\t\tpanel.methods.getListData();\r\n\t\t\t\t\t// 关闭右边modal\r\n\t\t\t\t\tcloseRightModal();\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\treturn <AddPage />;\r\n\t\t},\r\n\t\t// 是否显示详情按钮\r\n\t\tshowDetailBtn: true,\r\n\t\t// 详情按钮权限控制代码\r\n\t\tdetailBtnPermCode: \"\",\r\n\t\tdetailPageRender: (record) => {\r\n\t\t\tconst DetailPage = getDetailPage({ headerTitle: record.serviceName, headerContent: record.remark });\r\n\t\t\treturn <DetailPage detailId={record.id}/>;\r\n\t\t},\r\n\t\t// 是否显示修改按钮\r\n\t\tshowUpdateBtn: true,\r\n\t\t// 修改按钮权限控制代码\r\n\t\tupdateBtnPermCod: \"\",\r\n\t\tupdatePageRender: (record,panel) => {\r\n\t\t\tconst UpdatePage = getEditPage({\r\n\t\t\t\tpageType: \"update\",\r\n\t\t\t\theaderTitle: record.serviceName,\r\n\t\t\t\theaderContent: record.remark,\r\n\t\t\t\tafterSubmitSuccess: (closeRightModal) => {\r\n\t\t\t\t\tpanel.methods.getListData(); // 保存数据成功后刷新列表数据\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\treturn <UpdatePage detailId={record.id} />;\r\n\t\t},\r\n\t\t// 是否显示删除按钮\r\n\t\tshowDeleteBtn: true,\r\n\t\t// 删除按钮权限控制代码\r\n\t\tdeleteBtnPermCod: \"\",\r\n\t\t//更多操作按钮的map数据\r\n\t\tmoreBtnMap: [\r\n\t\t\t{\r\n\t\t\t\tkey: '0',\r\n\t\t\t\tname: \"默认的按钮\",\r\n\t\t\t},\r\n\t\t],\r\n\t\t//更多操作按钮的的点击事件\r\n\t\tonMoreBtnClick:(item,record)=>{\r\n\t\t\tmessage.success(`您当前点击的是[${record.serviceName}]这条数据`)\r\n\t\t},\r\n\t\t// 获取列表数据的后台接口函数，其必须内部返回Promise\r\n\t\tlistApiInterface: (query) => {\r\n\t\t\treturn api.config.getServiceList(Object.assign(query, { servcieName: query.serviceName })); //处理字段名\r\n\t\t},\r\n\t\t// 删除按钮的后台接口函数，其必须内部返回Promise\r\n\t\tdeleteApiInterface: (data) => {\r\n\t\t\treturn api.config.deleteService({ id: data.id });\r\n\t\t},\r\n\t\t// exportSomething: (obj) => (listExports = obj),\r\n\t\t//是否显示分页\r\n        showPagination: true,\r\n         // 分页类型 paging | infinite\r\n         paginationType:'paging',\r\n\t},\r\n};\r\nexport default ZsearchListHOC(config);\r\n"],"sourceRoot":""}